var _P=Object.defineProperty,vP=Object.defineProperties;var wP=Object.getOwnPropertyDescriptors;var XI=Object.getOwnPropertySymbols,EP=Object.getPrototypeOf,IP=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable,DP=Reflect.get;var e0=(t,e,n)=>e in t?_P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||={})IP.call(e,n)&&e0(t,n,e[n]);if(XI)for(var n of XI(e))CP.call(e,n)&&e0(t,n,e[n]);return t},ge=(t,e)=>vP(t,wP(e));var Fr=(t,e,n)=>DP(EP(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var t0=null;var dp=1;function kt(t){let e=t0;return t0=t,e}var n0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TP(t){if(!(pp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===dp)){if(!t.producerMustRecompute(t)&&!hp(t)){t.dirty=!1,t.lastCleanEpoch=dp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=dp}}function r0(t){return t&&(t.nextProducerIndex=0),kt(t)}function i0(t,e){if(kt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(pp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)fp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function hp(t){Gu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(TP(n),r!==n.version))return!0}return!1}function s0(t){if(Gu(t),pp(t))for(let e=0;e<t.producerNode.length;e++)fp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function fp(t,e){if(bP(t),Gu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)fp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Gu(i),i.producerIndexOfThis[r]=e}}function pp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Gu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function bP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function SP(){throw new Error}var AP=SP;function o0(t){AP=t}function H(t){return typeof t=="function"}function Fs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wu=Fs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ei(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(s){e=s instanceof Wu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{a0(s)}catch(o){e=e??[],o instanceof Wu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)a0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ei(n,e)}remove(e){let{_finalizers:n}=this;n&&Ei(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var mp=Fe.EMPTY;function zu(t){return t instanceof Fe||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function a0(t){H(t)?t():t.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ls={setTimeout(t,e,...n){let{delegate:r}=Ls;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ls;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ku(t){Ls.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(t);else throw t})}function Ta(){}var c0=(()=>gp("C",void 0,void 0))();function u0(t){return gp("E",void 0,t)}function l0(t){return gp("N",t,void 0)}function gp(t,e,n){return{kind:t,value:e,error:n}}var Ii=null;function Vs(t){if(hn.useDeprecatedSynchronousErrorHandling){let e=!Ii;if(e&&(Ii={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ii;if(Ii=null,n)throw r}}else t()}function d0(t){hn.useDeprecatedSynchronousErrorHandling&&Ii&&(Ii.errorThrown=!0,Ii.error=t)}var Ci=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zu(e)&&e.add(this)):this.destination=MP}static create(e,n,r){return new Us(e,n,r)}next(e){this.isStopped?_p(l0(e),this):this._next(e)}error(e){this.isStopped?_p(u0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_p(c0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xP=Function.prototype.bind;function yp(t,e){return xP.call(t,e)}var vp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Qu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Qu(r)}else Qu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Qu(n)}}},Us=class extends Ci{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&hn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yp(e.next,s),error:e.error&&yp(e.error,s),complete:e.complete&&yp(e.complete,s)}):i=e}this.destination=new vp(i)}};function Qu(t){hn.useDeprecatedSynchronousErrorHandling?d0(t):Ku(t)}function RP(t){throw t}function _p(t,e){let{onStoppedNotification:n}=hn;n&&Ls.setTimeout(()=>n(t,e))}var MP={closed:!0,next:Ta,error:RP,complete:Ta};var js=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Ft(t){return t}function wp(...t){return Ep(t)}function Ep(t){return t.length===0?Ft:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=PP(n)?n:new Us(n,r,i);return Vs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=h0(r),new r((i,s)=>{let o=new Us({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[js](){return this}pipe(...n){return Ep(n)(this)}toPromise(n){return n=h0(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function h0(t){var e;return(e=t??hn.Promise)!==null&&e!==void 0?e:Promise}function NP(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function PP(t){return t&&t instanceof Ci||NP(t)&&zu(t)}function Ip(t){return H(t?.lift)}function ae(t){return e=>{if(Ip(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,e,n,r,i){return new Cp(t,e,n,r,i)}var Cp=class extends Ci{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Bs(){return ae((t,e)=>{let n=null;t._refCount++;let r=te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var $s=class extends ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ip(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return Bs()(this)}};var f0=Fs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class t extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new f0}next(n){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?mp:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,Ei(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return t.create=(e,n)=>new Yu(e,n),t})(),Yu=class extends St{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:mp}};var ct=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dp={now(){return(Dp.delegate||Date).now()},delegate:void 0};var Zu=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var ba={setInterval(t,e,...n){let{delegate:r}=ba;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ba;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Hs=class extends Zu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ba.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ei(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var qs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};qs.now=Dp.now;var Gs=class extends qs{constructor(e,n=qs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Tp=new Gs(Hs);var Ju=class extends Hs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xu=class extends Gs{};var bp=new Xu(Ju);var Kt=new ee(t=>t.complete());function p0(t){return t&&H(t.schedule)}function m0(t){return t[t.length-1]}function el(t){return H(m0(t))?t.pop():void 0}function Lr(t){return p0(m0(t))?t.pop():void 0}function Sp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function y0(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function g0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Di(t){return this instanceof Di?(this.v=t,this):new Di(t)}function _0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(_,w){s.push([h,f,_,w])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(_){d(s[0][3],_)}}function c(h){h.value instanceof Di?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof g0=="function"?g0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var tl=t=>t&&typeof t.length=="number"&&typeof t!="function";function nl(t){return H(t?.then)}function rl(t){return H(t[js])}function il(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function sl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ol=OP();function al(t){return H(t?.[ol])}function cl(t){return _0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Di(n.read());if(i)return yield Di(void 0);yield yield Di(r)}}finally{n.releaseLock()}})}function ul(t){return H(t?.getReader)}function Le(t){if(t instanceof ee)return t;if(t!=null){if(rl(t))return kP(t);if(tl(t))return FP(t);if(nl(t))return LP(t);if(il(t))return w0(t);if(al(t))return VP(t);if(ul(t))return UP(t)}throw sl(t)}function kP(t){return new ee(e=>{let n=t[js]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FP(t){return new ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LP(t){return new ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ku)})}function VP(t){return new ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function w0(t){return new ee(e=>{jP(t,e).catch(n=>e.error(n))})}function UP(t){return w0(cl(t))}function jP(t,e){var n,r,i,s;return y0(this,void 0,void 0,function*(){try{for(n=v0(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function At(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Vr(t,e=0){return ae((n,r)=>{n.subscribe(te(r,i=>At(r,t,()=>r.next(i),e),()=>At(r,t,()=>r.complete(),e),i=>At(r,t,()=>r.error(i),e)))})}function Ur(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function E0(t,e){return Le(t).pipe(Ur(e),Vr(e))}function I0(t,e){return Le(t).pipe(Ur(e),Vr(e))}function C0(t,e){return new ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function D0(t,e){return new ee(n=>{let r;return At(n,e,()=>{r=t[ol](),At(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function ll(t,e){if(!t)throw new Error("Iterable cannot be null");return new ee(n=>{At(n,e,()=>{let r=t[Symbol.asyncIterator]();At(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function T0(t,e){return ll(cl(t),e)}function b0(t,e){if(t!=null){if(rl(t))return E0(t,e);if(tl(t))return C0(t,e);if(nl(t))return I0(t,e);if(il(t))return ll(t,e);if(al(t))return D0(t,e);if(ul(t))return T0(t,e)}throw sl(t)}function Ae(t,e){return e?b0(t,e):Le(t)}function q(...t){let e=Lr(t);return Ae(t,e)}function Ws(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new ee(e?i=>e.schedule(r,0,i):r)}function Ap(t){return!!t&&(t instanceof ee||H(t.lift)&&H(t.subscribe))}var dr=Fs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(t,e){return ae((n,r)=>{let i=0;n.subscribe(te(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:BP}=Array;function $P(t,e){return BP(e)?t(...e):t(e)}function dl(t){return Q(e=>$P(t,e))}var{isArray:HP}=Array,{getPrototypeOf:qP,prototype:GP,keys:WP}=Object;function hl(t){if(t.length===1){let e=t[0];if(HP(e))return{args:e,keys:null};if(zP(e)){let n=WP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function zP(t){return t&&typeof t=="object"&&qP(t)===GP}function fl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function pl(...t){let e=Lr(t),n=el(t),{args:r,keys:i}=hl(t);if(r.length===0)return Ae([],e);let s=new ee(KP(r,e,i?o=>fl(i,o):Ft));return n?s.pipe(dl(n)):s}function KP(t,e,n=Ft){return r=>{S0(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)S0(e,()=>{let u=Ae(t[c],e),l=!1;u.subscribe(te(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function S0(t,e,n){t?At(n,t,e):e()}function A0(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=w=>u<r?_(w):c.push(w),_=w=>{s&&e.next(w),u++;let E=!1;Le(n(w,l++)).subscribe(te(e,A=>{i?.(A),s?f(A):e.next(A)},()=>{E=!0},void 0,()=>{if(E)try{for(u--;c.length&&u<r;){let A=c.shift();o?At(e,o,()=>_(A)):_(A)}h()}catch(A){e.error(A)}}))};return t.subscribe(te(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ge(t,e,n=1/0){return H(e)?Ge((r,i)=>Q((s,o)=>e(r,s,i,o))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>A0(r,i,t,n)))}function xp(t=1/0){return Ge(Ft,t)}function x0(){return xp(1)}function zs(...t){return x0()(Ae(t,Lr(t)))}function ml(t){return new ee(e=>{Le(t()).subscribe(e)})}function Rp(...t){let e=el(t),{args:n,keys:r}=hl(t),i=new ee(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;Le(n[l]).subscribe(te(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?fl(r,a):a),s.complete())}))}});return e?i.pipe(dl(e)):i}function fn(t,e){return ae((n,r)=>{let i=0;n.subscribe(te(r,s=>t.call(e,s,i++)&&r.next(s)))})}function jr(t){return ae((e,n)=>{let r=null,i=!1,s;r=e.subscribe(te(n,void 0,void 0,o=>{s=Le(t(o,jr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function R0(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(te(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ks(t,e){return H(e)?Ge(t,e,1):Ge(t,1)}function Br(t){return ae((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qt(t){return t<=0?()=>Kt:ae((e,n)=>{let r=0;e.subscribe(te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Mp(t){return Q(()=>t)}function gl(t=QP){return ae((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function QP(){return new dr}function Sa(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function kn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?fn((i,s)=>t(i,s,r)):Ft,Qt(1),n?Br(e):gl(()=>new dr))}function Qs(t){return t<=0?()=>Kt:ae((e,n)=>{let r=[];e.subscribe(te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Np(t,e){let n=arguments.length>=2;return r=>r.pipe(t?fn((i,s)=>t(i,s,r)):Ft,Qs(1),n?Br(e):gl(()=>new dr))}function Pp(t,e){return ae(R0(t,e,arguments.length>=2,!0))}function Op(...t){let e=Lr(t);return ae((n,r)=>{(e?zs(t,n,e):zs(t,n)).subscribe(r)})}function pn(t,e){return ae((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(te(r,c=>{i?.unsubscribe();let u=0,l=s++;Le(t(c,l)).subscribe(i=te(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function kp(t){return ae((e,n)=>{Le(t).subscribe(te(n,()=>n.complete(),Ta)),!n.closed&&e.subscribe(n)})}function Ve(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(te(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Ft}function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function yl(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function M0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YP=Ee({__forward_ref__:Ee});function gr(t){return t.__forward_ref__=gr,t.toString=function(){return pt(this())},t}function It(t){return gC(t)?t():t}function gC(t){return typeof t=="function"&&t.hasOwnProperty(YP)&&t.__forward_ref__===gr}function yC(t){return t&&!!t.\u0275providers}var _C="https://g.co/ng/security#xss",N=class extends Error{constructor(e,n){super(Lm(e,n)),this.code=e}};function Lm(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var ZP=Ee({\u0275cmp:Ee}),JP=Ee({\u0275dir:Ee}),XP=Ee({\u0275pipe:Ee}),eO=Ee({\u0275mod:Ee}),Sl=Ee({\u0275fac:Ee}),Aa=Ee({__NG_ELEMENT_ID__:Ee}),N0=Ee({__NG_ENV_ID__:Ee});function zl(t){return typeof t=="string"?t:t==null?"":String(t)}function tO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zl(t)}function nO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new N(-200,`Circular dependency in DI detected for ${t}${n}`)}function Vm(t,e){let n=e?` in ${e}`:"";throw new N(-201,!1)}function rO(t,e){t==null&&iO(e,t,null,"!=")}function iO(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kl(t){return P0(t,wC)||P0(t,EC)}function vC(t){return Kl(t)!==null}function P0(t,e){return t.hasOwnProperty(e)?t[e]:null}function sO(t){let e=t&&(t[wC]||t[EC]);return e||null}function O0(t){return t&&(t.hasOwnProperty(k0)||t.hasOwnProperty(oO))?t[k0]:null}var wC=Ee({\u0275prov:Ee}),k0=Ee({\u0275inj:Ee}),EC=Ee({ngInjectableDef:Ee}),oO=Ee({ngInjectorDef:Ee}),Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Y||{}),Zp;function aO(){return Zp}function Yt(t){let e=Zp;return Zp=t,e}function IC(t,e,n){let r=Kl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(e!==void 0)return e;Vm(pt(t),"Injector")}var Ti=globalThis;var k=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var cO={},Ma=cO,Jp="__NG_DI_FLAG__",Al="ngTempTokenPath",uO="ngTokenPath",lO=/\n/gm,dO="\u0275",F0="__source",xa;function $r(t){let e=xa;return xa=t,e}function hO(t,e=Y.Default){if(xa===void 0)throw new N(-203,!1);return xa===null?IC(t,void 0,e):xa.get(t,e&Y.Optional?null:void 0,e)}function U(t,e=Y.Default){return(aO()||hO)(It(t),e)}function R(t,e=Y.Default){return U(t,Ql(e))}function Ql(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xp(t){let e=[];for(let n=0;n<t.length;n++){let r=It(t[n]);if(Array.isArray(r)){if(r.length===0)throw new N(900,!1);let i,s=Y.Default;for(let o=0;o<r.length;o++){let a=r[o],c=fO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(U(i,s))}else e.push(U(r))}return e}function CC(t,e){return t[Jp]=e,t.prototype[Jp]=e,t}function fO(t){return t[Jp]}function pO(t,e,n,r){let i=t[Al];throw e[F0]&&i.unshift(e[F0]),t.message=mO(`
`+t.message,i,n,r),t[uO]=i,t[Al]=null,t}function mO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==dO?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(lO,`
  `)}`}function $a(t){return{toString:t}.toString()}var DC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(DC||{}),Vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vn||{}),eo={},Zt=[];function TC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function em(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];gO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function bC(t){return t===3||t===4||t===6}function gO(t){return t.charCodeAt(0)===64}function Na(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?L0(t,n,i,null,e[++r]):L0(t,n,i,null,null))}}return t}function L0(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var SC="ng-template";function yO(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&TC(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function AC(t){return t.type===4&&t.value!==SC}function _O(t,e,n){let r=t.type===4&&!n?SC:t.value;return e===r}function vO(t,e,n){let r=4,i=t.attrs||[],s=IO(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!mn(r)&&!mn(c))return!1;if(o&&mn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!_O(t,c,n)||c===""&&e.length===1){if(mn(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!yO(t.attrs,u,n)){if(mn(r))return!1;o=!0}continue}let l=r&8?"class":c,d=wO(l,i,AC(t),n);if(d===-1){if(mn(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&TC(f,u,0)!==-1||r&2&&u!==h){if(mn(r))return!1;o=!0}}}}return mn(r)||o}function mn(t){return(t&1)===0}function wO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return CO(e,t)}function EO(t,e,n=!1){for(let r=0;r<e.length;r++)if(vO(t,e[r],n))return!0;return!1}function IO(t){for(let e=0;e<t.length;e++){let n=t[e];if(bC(n))return e}return t.length}function CO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function V0(t,e){return t?":not("+e.trim()+")":e}function DO(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!mn(o)&&(e+=V0(s,i),i=""),r=o,s=s||!mn(r);n++}return i!==""&&(e+=V0(s,i)),e}function TO(t){return t.map(DO).join(",")}function bO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!mn(i))break;i=s}r++}return{attrs:e,classes:n}}function Ue(t){return $a(()=>{let e=PC(t),n=ge(S({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===DC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vn.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});OC(n);let r=t.dependencies;return n.directiveDefs=j0(r,!1),n.pipeDefs=j0(r,!0),n.id=xO(n),n})}function SO(t){return Si(t)||xC(t)}function AO(t){return t!==null}function et(t){return $a(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function U0(t,e){if(t==null)return eo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Re(t){return $a(()=>{let e=PC(t);return OC(e),e})}function Si(t){return t[ZP]||null}function xC(t){return t[JP]||null}function RC(t){return t[XP]||null}function MC(t){let e=Si(t)||xC(t)||RC(t);return e!==null?e.standalone:!1}function NC(t,e){let n=t[eO]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function PC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||eo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:U0(t.inputs,e),outputs:U0(t.outputs),debugInfo:null}}function OC(t){t.features?.forEach(e=>e(t))}function j0(t,e){if(!t)return null;let n=e?RC:SO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(AO)}function xO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var yr=0,se=1,F=2,We=3,gn=4,vn=5,xl=6,Pa=7,yn=8,to=9,hr=10,ze=11,Oa=12,B0=13,uo=14,Un=15,Yl=16,Ys=17,ka=18,Zl=19,kC=20,Ra=21,Fp=22,Ai=23,jn=25,FC=1;var xi=7,Rl=8,Ml=9,Jt=10,no=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(no||{});function Hr(t){return Array.isArray(t)&&typeof t[FC]=="object"}function _n(t){return Array.isArray(t)&&t[FC]===!0}function Um(t){return(t.flags&4)!==0}function Jl(t){return t.componentOffset>-1}function Xl(t){return(t.flags&1)===1}function qr(t){return!!t.template}function RO(t){return(t[F]&512)!==0}function ro(t,e){let n=t.hasOwnProperty(Sl);return n?t[Sl]:null}var tm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function _r(){return LC}function LC(t){return t.type.prototype.ngOnChanges&&(t.setInput=NO),MO}_r.ngInherit=!0;function MO(){let t=UC(this),e=t?.current;if(e){let n=t.previous;if(n===eo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function NO(t,e,n,r){let i=this.declaredInputs[n],s=UC(t)||PO(t,{previous:eo,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new tm(c&&c.currentValue,e,a===eo),t[r]=e}var VC="__ngSimpleChanges__";function UC(t){return t[VC]||null}function PO(t,e){return t[VC]=e}var $0=null;var Fn=function(t,e,n){$0?.(t,e,n)},OO="svg",kO="math",FO=!1;function LO(){return FO}function Bn(t){for(;Array.isArray(t);)t=t[yr];return t}function jC(t,e){return Bn(e[t])}function en(t,e){return Bn(e[t.index])}function BC(t,e){return t.data[e]}function VO(t,e){return t[e]}function zr(t,e){let n=e[t];return Hr(n)?n:n[yr]}function jm(t){return(t[F]&128)===128}function UO(t){return _n(t[We])}function io(t,e){return e==null?null:t[e]}function $C(t){t[Ys]=0}function jO(t){t[F]&1024||(t[F]|=1024,jm(t)&&Fa(t))}function BO(t,e){for(;t>0;)e=e[uo],t--;return e}function HC(t){return t[F]&9216||t[Ai]?.dirty}function nm(t){HC(t)?Fa(t):t[F]&64&&(LO()?(t[F]|=1024,Fa(t)):t[hr].changeDetectionScheduler?.notify())}function Fa(t){t[hr].changeDetectionScheduler?.notify();let e=t[We];for(;e!==null&&!(_n(e)&&e[F]&no.HasChildViewsToRefresh||Hr(e)&&e[F]&8192);){if(_n(e))e[F]|=no.HasChildViewsToRefresh;else if(e[F]|=8192,!jm(e))break;e=e[We]}}function $O(t,e){if((t[F]&256)===256)throw new N(911,!1);t[Ra]===null&&(t[Ra]=[]),t[Ra].push(e)}var Z={lFrame:YC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function HO(){return Z.lFrame.elementDepthCount}function qO(){Z.lFrame.elementDepthCount++}function GO(){Z.lFrame.elementDepthCount--}function qC(){return Z.bindingsEnabled}function WO(){return Z.skipHydrationRootTNode!==null}function zO(t){return Z.skipHydrationRootTNode===t}function KO(){Z.skipHydrationRootTNode=null}function be(){return Z.lFrame.lView}function Lt(){return Z.lFrame.tView}function wn(t){return Z.lFrame.contextLView=t,t[yn]}function En(t){return Z.lFrame.contextLView=null,t}function xt(){let t=GC();for(;t!==null&&t.type===64;)t=t.parent;return t}function GC(){return Z.lFrame.currentTNode}function QO(){let t=Z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Oi(t,e){let n=Z.lFrame;n.currentTNode=t,n.isParent=e}function Bm(){return Z.lFrame.isParent}function WC(){Z.lFrame.isParent=!1}function YO(){return Z.lFrame.contextLView}function ZO(){let t=Z.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JO(t){return Z.lFrame.bindingIndex=t}function $m(){return Z.lFrame.bindingIndex++}function XO(t){let e=Z.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ek(){return Z.lFrame.inI18n}function tk(t,e){let n=Z.lFrame;n.bindingIndex=n.bindingRootIndex=t,rm(e)}function nk(){return Z.lFrame.currentDirectiveIndex}function rm(t){Z.lFrame.currentDirectiveIndex=t}function rk(t){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zC(t){Z.lFrame.currentQueryIndex=t}function ik(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[vn]:null}function KC(t,e,n){if(n&Y.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Y.Host);)if(i=ik(s),i===null||(s=s[uo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Z.lFrame=QC();return r.currentTNode=e,r.lView=t,!0}function Hm(t){let e=QC(),n=t[se];Z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QC(){let t=Z.lFrame,e=t===null?null:t.child;return e===null?YC(t):e}function YC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ZC(){let t=Z.lFrame;return Z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var JC=ZC;function qm(){let t=ZC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sk(t){return(Z.lFrame.contextLView=BO(t,Z.lFrame.contextLView))[yn]}function lo(){return Z.lFrame.selectedIndex}function Ri(t){Z.lFrame.selectedIndex=t}function XC(){let t=Z.lFrame;return BC(t.tView,t.selectedIndex)}function ok(){return Z.lFrame.currentNamespace}var eD=!0;function ed(){return eD}function td(t){eD=t}function ak(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=LC(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function nd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Il(t,e,n){tD(t,e,3,n)}function Cl(t,e,n,r){(t[F]&3)===n&&tD(t,e,n,r)}function Lp(t,e){let n=t[F];(n&3)===e&&(n&=16383,n+=1,t[F]=n)}function tD(t,e,n,r){let i=r!==void 0?t[Ys]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ys]+=65536),(a<s||s==-1)&&(ck(t,n,e,c),t[Ys]=(t[Ys]&4294901760)+c+2),c++}function H0(t,e){Fn(4,t,e);let n=kt(null);try{e.call(t)}finally{kt(n),Fn(5,t,e)}}function ck(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[F]>>14<t[Ys]>>16&&(t[F]&3)===e&&(t[F]+=16384,H0(a,s)):H0(a,s)}var Xs=-1,Mi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function uk(t){return t instanceof Mi}function lk(t){return(t.flags&8)!==0}function dk(t){return(t.flags&16)!==0}function nD(t){return t!==Xs}function Nl(t){let e=t&32767;return t&32767}function hk(t){return t>>16}function Pl(t,e){let n=hk(t),r=e;for(;n>0;)r=r[uo],n--;return r}var im=!0;function q0(t){let e=im;return im=t,e}var fk=256,rD=fk-1,iD=5,pk=0,Ln={};function mk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Aa)&&(r=n[Aa]),r==null&&(r=n[Aa]=pk++);let i=r&rD,s=1<<i;e.data[t+(i>>iD)]|=s}function Ol(t,e){let n=sD(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Vp(r.data,t),Vp(e,null),Vp(r.blueprint,null));let i=Gm(t,e),s=t.injectorIndex;if(nD(i)){let o=Nl(i),a=Pl(i,e),c=a[se].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Vp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Gm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=lD(i),r===null)return Xs;if(n++,i=i[uo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Xs}function sm(t,e,n){mk(t,e,n)}function gk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(bC(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function oD(t,e,n){if(n&Y.Optional||t!==void 0)return t;Vm(e,"NodeInjector")}function aD(t,e,n,r){if(n&Y.Optional&&r===void 0&&(r=null),!(n&(Y.Self|Y.Host))){let i=t[to],s=Yt(void 0);try{return i?i.get(e,r,n&Y.Optional):IC(e,r,n&Y.Optional)}finally{Yt(s)}}return oD(r,e,n)}function cD(t,e,n,r=Y.Default,i){if(t!==null){if(e[F]&2048&&!(r&Y.Self)){let o=Ek(t,e,n,r,Ln);if(o!==Ln)return o}let s=uD(t,e,n,r,Ln);if(s!==Ln)return s}return aD(e,n,r,i)}function uD(t,e,n,r,i){let s=vk(n);if(typeof s=="function"){if(!KC(e,t,r))return r&Y.Host?oD(i,n,r):aD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Y.Optional))Vm(n);else return o}finally{JC()}}else if(typeof s=="number"){let o=null,a=sD(t,e),c=Xs,u=r&Y.Host?e[Un][vn]:null;for((a===-1||r&Y.SkipSelf)&&(c=a===-1?Gm(t,e):e[a+8],c===Xs||!W0(r,!1)?a=-1:(o=e[se],a=Nl(c),e=Pl(c,e)));a!==-1;){let l=e[se];if(G0(s,a,l.data)){let d=yk(a,e,n,o,r,u);if(d!==Ln)return d}c=e[a+8],c!==Xs&&W0(r,e[se].data[a+8]===u)&&G0(s,a,e)?(o=l,a=Nl(c),e=Pl(c,e)):a=-1}}return i}function yk(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],c=r==null?Jl(a)&&im:r!=o&&(a.type&3)!==0,u=i&Y.Host&&s===a,l=_k(a,o,n,c,u);return l!==null?so(e,o,l,a):Ln}function _k(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let _=o[f];if(f<c&&n===_||f>=c&&_.type===n)return f}if(i){let f=o[c];if(f&&qr(f)&&f.type===n)return c}return null}function so(t,e,n,r){let i=t[n],s=e.data;if(uk(i)){let o=i;o.resolving&&nO(tO(s[n]));let a=q0(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Yt(o.injectImpl):null,l=KC(t,r,Y.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&ak(n,s[n],e)}finally{u!==null&&Yt(u),q0(a),o.resolving=!1,JC()}}return i}function vk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Aa)?t[Aa]:void 0;return typeof e=="number"?e>=0?e&rD:wk:e}function G0(t,e,n){let r=1<<t;return!!(n[e+(t>>iD)]&r)}function W0(t,e){return!(t&Y.Self)&&!(t&Y.Host&&e)}var bi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return cD(this._tNode,this._lView,e,Ql(r),n)}};function wk(){return new bi(xt(),be())}function Kr(t){return $a(()=>{let e=t.prototype.constructor,n=e[Sl]||om(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Sl]||om(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function om(t){return gC(t)?()=>{let e=om(It(t));return e&&e()}:ro(t)}function Ek(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[F]&2048&&!(o[F]&512);){let a=uD(s,o,n,r|Y.Self,Ln);if(a!==Ln)return a;let c=s.parent;if(!c){let u=o[kC];if(u){let l=u.get(n,Ln,r);if(l!==Ln)return l}c=lD(o),o=o[uo]}s=c}return i}function lD(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[vn]:null}function Wm(t){return gk(xt(),t)}var _l="__parameters__";function Ik(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function dD(t,e,n){return $a(()=>{let r=Ik(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(_l)?c[_l]:Object.defineProperty(c,_l,{value:[]})[_l];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ck(t){return typeof t=="function"}function zm(t,e){t.forEach(n=>Array.isArray(n)?zm(n,e):e(n))}function hD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Dk(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Tk(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function bk(t,e,n){let r=Ha(t,e);return r>=0?t[r|1]=n:(r=~r,Tk(t,r,e,n)),r}function Up(t,e){let n=Ha(t,e);if(n>=0)return t[n|1]}function Ha(t,e){return Sk(t,e,1)}function Sk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ke=CC(dD("Optional"),8);var Km=CC(dD("SkipSelf"),4);var oo=new k("ENVIRONMENT_INITIALIZER"),fD=new k("INJECTOR",-1),pD=new k("INJECTOR_DEF_TYPES"),Fl=class{get(e,n=Ma){if(n===Ma){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}};function rd(t){return{\u0275providers:t}}function qa(...t){return{\u0275providers:mD(!0,t),\u0275fromNgModule:!0}}function mD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return zm(e,o=>{let a=o;am(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gD(i,s),n}function gD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Qm(i,s=>{e(s,r)})}}function am(t,e,n,r){if(t=It(t),!t)return!1;let i=null,s=O0(t),o=!s&&Si(t);if(!s&&!o){let c=t.ngModule;if(s=O0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)am(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{zm(s.imports,l=>{am(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&gD(u,e)}if(!a){let u=ro(i)||(()=>new i);e({provide:i,useFactory:u,deps:Zt},i),e({provide:pD,useValue:i,multi:!0},i),e({provide:oo,useValue:()=>U(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Qm(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Qm(t,e){for(let n of t)yC(n)&&(n=n.\u0275providers),Array.isArray(n)?Qm(n,e):e(n)}var Ak=Ee({provide:String,useValue:Ee});function yD(t){return t!==null&&typeof t=="object"&&Ak in t}function xk(t){return!!(t&&t.useExisting)}function Rk(t){return!!(t&&t.useFactory)}function ao(t){return typeof t=="function"}function Mk(t){return!!t.useClass}var id=new k("Set Injector scope."),Dl={},Nk={},jp;function Ym(){return jp===void 0&&(jp=new Fl),jp}var Xt=class{},La=class extends Xt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,um(e,o=>this.processProvider(o)),this.records.set(fD,Zs(void 0,this)),i.has("environment")&&this.records.set(Xt,Zs(void 0,this));let s=this.records.get(id);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pD,Zt,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$r(this),r=Yt(void 0),i;try{return e()}finally{$r(n),Yt(r)}}get(e,n=Ma,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(N0))return e[N0](this);r=Ql(r);let i,s=$r(this),o=Yt(void 0);try{if(!(r&Y.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=Lk(e)&&Kl(e);u&&this.injectableDefInScope(u)?c=Zs(cm(e),Dl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Y.Self?Ym():this.parent;return n=r&Y.Optional&&n===Ma?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Al]=a[Al]||[]).unshift(pt(e)),s)throw a;return pO(a,e,"R3InjectorError",this.source)}else throw a}finally{Yt(o),$r(s)}}resolveInjectorInitializers(){let e=$r(this),n=Yt(void 0),r;try{let i=this.get(oo,Zt,Y.Self);for(let s of i)s()}finally{$r(e),Yt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new N(205,!1)}processProvider(e){e=It(e);let n=ao(e)?e:It(e&&e.provide),r=Ok(e);if(!ao(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Zs(void 0,Dl,!0),i.factory=()=>Xp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===Dl&&(n.value=Nk,n.value=n.factory()),typeof n.value=="object"&&n.value&&Fk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=It(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cm(t){let e=Kl(t),n=e!==null?e.factory:ro(t);if(n!==null)return n;if(t instanceof k)throw new N(204,!1);if(t instanceof Function)return Pk(t);throw new N(204,!1)}function Pk(t){let e=t.length;if(e>0){let r=Dk(e,"?");throw new N(204,!1)}let n=sO(t);return n!==null?()=>n.factory(t):()=>new t}function Ok(t){if(yD(t))return Zs(void 0,t.useValue);{let e=_D(t);return Zs(e,Dl)}}function _D(t,e,n){let r;if(ao(t)){let i=It(t);return ro(i)||cm(i)}else if(yD(t))r=()=>It(t.useValue);else if(Rk(t))r=()=>t.useFactory(...Xp(t.deps||[]));else if(xk(t))r=()=>U(It(t.useExisting));else{let i=It(t&&(t.useClass||t.provide));if(kk(t))r=()=>new i(...Xp(t.deps));else return ro(i)||cm(i)}return r}function Zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kk(t){return!!t.deps}function Fk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Lk(t){return typeof t=="function"||typeof t=="object"&&t instanceof k}function um(t,e){for(let n of t)Array.isArray(n)?um(n,e):n&&yC(n)?um(n.\u0275providers,e):e(n)}function ki(t,e){t instanceof La&&t.assertNotDestroyed();let n,r=$r(t),i=Yt(void 0);try{return e()}finally{$r(r),Yt(i)}}function z0(t,e=null,n=null,r){let i=vD(t,e,n,r);return i.resolveInjectorInitializers(),i}function vD(t,e=null,n=null,r,i=new Set){let s=[n||Zt,qa(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new La(s,e||Ym(),r||null,i)}var Rt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return z0({name:""},i,r,"");{let s=r.name??"";return z0({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Ma,e.NULL=new Fl,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>U(fD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var lm;function wD(t){lm=t}function Vk(){if(lm!==void 0)return lm;if(typeof document<"u")return document;throw new N(210,!1)}var Zm=new k("AppId",{providedIn:"root",factory:()=>Uk}),Uk="ng",Jm=new k("Platform Initializer"),Qr=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Xm=new k("CSP nonce",{providedIn:"root",factory:()=>Vk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function ED(t){return t instanceof Function?t():t}function ID(t){return(t.flags&128)===128}var fr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fr||{}),jk=/^>|^->|<!--|-->|--!>|<!-$/g,Bk=/(<|>)/g,$k="\u200B$1\u200B";function Hk(t){return t.replace(jk,e=>e.replace(Bk,$k))}var CD=new Map,qk=0;function Gk(){return qk++}function Wk(t){CD.set(t[Zl],t)}function zk(t){CD.delete(t[Zl])}var K0="__ngContext__";function Gr(t,e){Hr(e)?(t[K0]=e[Zl],Wk(e)):t[K0]=e}var Kk;function eg(t,e){return Kk(t,e)}function tg(t){let e=t[We];return _n(e)?e[We]:e}function DD(t){return bD(t[Oa])}function TD(t){return bD(t[gn])}function bD(t){for(;t!==null&&!_n(t);)t=t[gn];return t}function Js(t,e,n,r,i){if(r!=null){let s,o=!1;_n(r)?s=r:Hr(r)&&(o=!0,r=r[yr]);let a=Bn(r);t===0&&n!==null?i==null?RD(e,n,a):Ll(e,n,a,i||null,!0):t===1&&n!==null?Ll(e,n,a,i||null,!0):t===2?f1(e,a,o):t===3&&e.destroyNode(a),s!=null&&m1(e,t,s,n,i)}}function Qk(t,e){return t.createText(e)}function Yk(t,e,n){t.setValue(e,n)}function Zk(t,e){return t.createComment(Hk(e))}function SD(t,e,n){return t.createElement(e,n)}function Jk(t,e){let n=e[ze];Ga(t,e,n,2,null,null),e[yr]=null,e[vn]=null}function Xk(t,e,n,r,i,s){r[yr]=i,r[vn]=e,Ga(t,r,n,1,i,s)}function e1(t,e){Ga(t,e,e[ze],2,null,null)}function t1(t){let e=t[Oa];if(!e)return Bp(t[se],t);for(;e;){let n=null;if(Hr(e))n=e[Oa];else{let r=e[Jt];r&&(n=r)}if(!n){for(;e&&!e[gn]&&e!==t;)Hr(e)&&Bp(e[se],e),e=e[We];e===null&&(e=t),Hr(e)&&Bp(e[se],e),n=e&&e[gn]}e=n}}function n1(t,e,n,r){let i=Jt+r,s=n.length;r>0&&(n[i-1][gn]=e),r<s-Jt?(e[gn]=n[i],hD(n,Jt+r,e)):(n.push(e),e[gn]=null),e[We]=n;let o=e[Yl];o!==null&&n!==o&&r1(o,e);let a=e[ka];a!==null&&a.insertView(t),nm(e),e[F]|=128}function r1(t,e){let n=t[Ml],i=e[We][We][Un];e[Un]!==i&&(t[F]|=no.HasTransplantedViews),n===null?t[Ml]=[e]:n.push(e)}function AD(t,e){let n=t[Ml],r=n.indexOf(e),i=e[We];n.splice(r,1)}function dm(t,e){if(t.length<=Jt)return;let n=Jt+e,r=t[n];if(r){let i=r[Yl];i!==null&&i!==t&&AD(i,r),e>0&&(t[n-1][gn]=r[gn]);let s=kl(t,Jt+e);Jk(r[se],r);let o=s[ka];o!==null&&o.detachView(s[se]),r[We]=null,r[gn]=null,r[F]&=-129}return r}function xD(t,e){if(!(e[F]&256)){let n=e[ze];n.destroyNode&&Ga(t,e,n,3,null,null),t1(e)}}function Bp(t,e){if(!(e[F]&256)){e[F]&=-129,e[F]|=256,e[Ai]&&s0(e[Ai]),s1(t,e),i1(t,e),e[se].type===1&&e[ze].destroy();let n=e[Yl];if(n!==null&&_n(e[We])){n!==e[We]&&AD(n,e);let r=e[ka];r!==null&&r.detachView(t)}zk(e)}}function i1(t,e){let n=t.cleanup,r=e[Pa];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Pa]=null);let i=e[Ra];if(i!==null){e[Ra]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function s1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Mi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Fn(4,a,c);try{c.call(a)}finally{Fn(5,a,c)}}else{Fn(4,i,s);try{s.call(i)}finally{Fn(5,i,s)}}}}}function o1(t,e,n){return a1(t,e.parent,n)}function a1(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[yr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Vn.None||s===Vn.Emulated)return null}return en(r,n)}}function Ll(t,e,n,r,i){t.insertBefore(e,n,r,i)}function RD(t,e,n){t.appendChild(e,n)}function Q0(t,e,n,r,i){r!==null?Ll(t,e,n,r,i):RD(t,e,n)}function c1(t,e,n,r){t.removeChild(e,n,r)}function ng(t,e){return t.parentNode(e)}function u1(t,e){return t.nextSibling(e)}function l1(t,e,n){return h1(t,e,n)}function d1(t,e,n){return t.type&40?en(t,n):null}var h1=d1,Y0;function sd(t,e,n,r){let i=o1(t,r,e),s=e[ze],o=r.parent||e[vn],a=l1(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Q0(s,i,n[c],a,!1);else Q0(s,i,n,a,!1);Y0!==void 0&&Y0(s,r,e,n,i)}function Tl(t,e){if(e!==null){let n=e.type;if(n&3)return en(e,t);if(n&4)return hm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Tl(t,r);{let i=t[e.index];return _n(i)?hm(-1,i):Bn(i)}}else{if(n&32)return eg(e,t)()||Bn(t[e.index]);{let r=MD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=tg(t[Un]);return Tl(i,r)}else return Tl(t,e.next)}}}return null}function MD(t,e){if(e!==null){let r=t[Un][vn],i=e.projection;return r.projection[i]}return null}function hm(t,e){let n=Jt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return Tl(r,i)}return e[xi]}function f1(t,e,n){let r=ng(t,e);r&&c1(t,r,e,n)}function rg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Gr(Bn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)rg(t,e,n.child,r,i,s,!1),Js(e,t,i,a,s);else if(c&32){let u=eg(n,r),l;for(;l=u();)Js(e,t,i,l,s);Js(e,t,i,a,s)}else c&16?p1(t,e,r,n,i,s):Js(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ga(t,e,n,r,i,s){rg(n,r,t.firstChild,e,i,s,!1)}function p1(t,e,n,r,i,s){let o=n[Un],c=o[vn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Js(e,t,i,l,s)}else{let u=c,l=o[We];ID(r)&&(u.flags|=128),rg(t,e,u,l,i,s,!0)}}function m1(t,e,n,r,i){let s=n[xi],o=Bn(n);s!==o&&Js(e,t,r,s,i);for(let a=Jt;a<n.length;a++){let c=n[a];Ga(c[se],c,t,e,r,s)}}function g1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fr.Important),t.setStyle(n,r,i,s))}}function y1(t,e,n){t.setAttribute(e,"style",n)}function ND(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function PD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&em(t,e,r),i!==null&&ND(t,e,i),s!==null&&y1(t,e,s)}var vl;function _1(){if(vl===void 0&&(vl=null,Ti.trustedTypes))try{vl=Ti.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vl}function Z0(t){return _1()?.createScriptURL(t)||t}var Vl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_C})`}};function Wa(t){return t instanceof Vl?t.changingThisBreaksApplicationSecurity:t}function ig(t,e){let n=v1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${_C})`)}return n===e}function v1(t){return t instanceof Vl&&t.getTypeName()||null}var w1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function OD(t){return t=String(t),t.match(w1)?t:"unsafe:"+t}var od=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(od||{});function E1(t){let e=FD();return e?e.sanitize(od.URL,t)||"":ig(t,"URL")?Wa(t):OD(zl(t))}function I1(t){let e=FD();if(e)return Z0(e.sanitize(od.RESOURCE_URL,t)||"");if(ig(t,"ResourceURL"))return Z0(Wa(t));throw new N(904,!1)}function C1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?I1:E1}function kD(t,e,n){return C1(e,n)(t)}function FD(){let t=be();return t&&t[hr].sanitizer}var fm=class{};var D1="h",T1="b";var b1=(t,e,n)=>null;function sg(t,e,n=!1){return b1(t,e,n)}var pm=class{},Ul=class{};function S1(t){let e=Error(`No component factory found for ${pt(t)}.`);return e[A1]=t,e}var A1="ngComponent";var mm=class{resolveComponentFactory(e){throw S1(e)}},ad=(()=>{let e=class e{};e.NULL=new mm;let t=e;return t})();function x1(){return cd(xt(),be())}function cd(t,e){return new In(en(t,e))}var In=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=x1;let t=e;return t})();var Va=class{},$n=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>R1();let t=e;return t})();function R1(){let t=be(),e=xt(),n=zr(e.index,t);return(Hr(n)?n:t)[ze]}var M1=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),$p={};function LD(t){return og(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function N1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function og(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var gm=class{constructor(){}supports(e){return LD(e)}create(e){return new ym(e)}},P1=(t,e)=>e,ym=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||P1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<J0(r,i,s)?n:r,a=J0(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,_=f+h;l<=_&&_<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!LD(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,N1(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new _m(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new jl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_m=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},jl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new vm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function J0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var wm=class{constructor(){}supports(e){return e instanceof Map||og(e)}create(){return new Em}},Em=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||og(e)))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Im(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Im=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function X0(){return new ud([new gm])}var ud=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||X0()),deps:[[e,new Km,new Ke]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new N(901,!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:X0});let t=e;return t})();function eC(){return new ag([new wm])}var ag=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||eC()),deps:[[e,new Km,new Ke]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new N(901,!1)}};e.\u0275prov=P({token:e,providedIn:"root",factory:eC});let t=e;return t})();function Bl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Bn(s)),_n(s)&&O1(s,r);let o=n.type;if(o&8)Bl(t,e,n.child,r);else if(o&32){let a=eg(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=MD(e,n);if(Array.isArray(a))r.push(...a);else{let c=tg(e[Un]);Bl(c[se],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function O1(t,e){for(let n=Jt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&Bl(r[se],r,i,e)}t[xi]!==t[yr]&&e.push(t[xi])}var VD=[];function k1(t){return t[Ai]??F1(t)}function F1(t){let e=VD.pop()??Object.create(V1);return e.lView=t,e}function L1(t){t.lView[Ai]!==t&&(t.lView=null,VD.push(t))}var V1=ge(S({},n0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Fa(t.lView)},consumerOnSignalRead(){this.lView[Ai]=this}}),U1="ngOriginalError";function Hp(t){return t[U1]}var pr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hp(e);for(;n&&Hp(n);)n=Hp(n);return n||null}},UD=new k("",{providedIn:"root",factory:()=>R(pr).handleError.bind(void 0)});var jD=!1,j1=new k("",{providedIn:"root",factory:()=>jD});var Fi={};function C(t){BD(Lt(),be(),lo()+t,!1)}function BD(t,e,n,r){if(!r)if((e[F]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Il(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Cl(e,s,0,n)}Ri(n)}function D(t,e=Y.Default){let n=be();if(n===null)return U(t,e);let r=xt();return cD(r,n,It(t),e)}function B1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ri(~i);else{let s=i,o=n[++r],a=n[++r];tk(o,s);let c=e[s];a(2,c)}}}finally{Ri(-1)}}function ld(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[yr]=i,d[F]=r|4|128|8|64,(u!==null||t&&t[F]&2048)&&(d[F]|=2048),$C(d),d[We]=d[uo]=t,d[yn]=n,d[hr]=o||t&&t[hr],d[ze]=a||t&&t[ze],d[to]=c||t&&t[to]||null,d[vn]=s,d[Zl]=Gk(),d[xl]=l,d[kC]=u,d[Un]=e.type==2?t[Un]:d,d}function za(t,e,n,r,i){let s=t.data[e];if(s===null)s=$1(t,e,n,r,i),ek()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=QO();s.injectorIndex=o===null?-1:o.injectorIndex}return Oi(s,!0),s}function $1(t,e,n,r,i){let s=GC(),o=Bm(),a=o?s:s&&s.parent,c=t.data[e]=z1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function $D(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function HD(t,e,n,r,i){let s=lo(),o=r&2;try{Ri(-1),o&&e.length>jn&&BD(t,e,jn,!1),Fn(o?2:0,i),n(r,i)}finally{Ri(s),Fn(o?3:1,i)}}function cg(t,e,n){if(Um(e)){let r=kt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{kt(r)}}}function ug(t,e,n){qC()&&(eF(t,e,n,en(n,e)),(n.flags&64)===64&&WD(t,e,n))}function lg(t,e,n=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function qD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dg(t,e,n,r,i,s,o,a,c,u,l){let d=jn+r,h=d+i,f=H1(d,h),_=typeof u=="function"?u():u;return f[se]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:l}}function H1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fi);return n}function q1(t,e,n,r){let s=r.get(j1,jD)||n===Vn.ShadowDom,o=t.selectRootElement(e,s);return G1(o),o}function G1(t){W1(t)}var W1=t=>null;function z1(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return WO()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tC(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let s=t[i];r===null?nC(n,e,i,s):r.hasOwnProperty(i)&&nC(n,e,r[i],s)}return n}function nC(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function K1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,_=h?h.outputs:null;c=tC(d.inputs,l,c,f),u=tC(d.outputs,l,u,_);let w=c!==null&&o!==null&&!AC(e)?dF(c,l,o):null;a.push(w)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function Q1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Y1(t,e,n,r,i,s,o,a){let c=en(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(fg(t,n,l,r,i),Jl(e)&&Z1(n,e.index)):e.type&3?(r=Q1(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Z1(t,e){let n=zr(e,t);n[F]&16||(n[F]|=64)}function hg(t,e,n,r){if(qC()){let i=r===null?null:{"":-1},s=nF(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&GD(t,e,n,o,i,a),i&&rF(n,r,i)}n.mergedAttrs=Na(n.mergedAttrs,n.attrs)}function GD(t,e,n,r,i,s){for(let u=0;u<r.length;u++)sm(Ol(n,e),t,r[u].type);sF(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=$D(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Na(n.mergedAttrs,l.hostAttrs),oF(t,n,e,c,l),iF(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}K1(t,n,s)}function J1(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;X1(o)!=a&&o.push(a),o.push(n,r,s)}}function X1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function eF(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Jl(n)&&aF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ol(n,e),Gr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=so(e,t,a,n);if(Gr(u,e),o!==null&&lF(e,a-i,u,c,n,o),qr(c)){let l=zr(n.index,e);l[yn]=so(e,t,a,n)}}}function WD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=nk();try{Ri(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];rm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&tF(c,u)}}finally{Ri(-1),rm(o)}}function tF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function nF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(EO(e,o.selectors,!1))if(r||(r=[]),qr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Cm(t,e,c)}else r.unshift(o),Cm(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Cm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new N(-301,!1);r.push(e[i],s)}}}function iF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qr(e)&&(n[""]=t)}}function sF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oF(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ro(i.type,!0)),o=new Mi(s,qr(i),D);t.blueprint[r]=o,n[r]=o,J1(t,e,r,$D(t,n,i.hostVars,Fi),i)}function aF(t,e,n){let r=en(e,t),i=qD(n),s=t[hr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=dd(t,ld(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function cF(t,e,n,r,i,s){let o=en(t,e);uF(e[ze],o,s,t.value,n,r,i)}function uF(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?zl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function lF(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++];zD(r,n,c,u,l)}}function zD(t,e,n,r,i){let s=kt(null);try{let o=t.inputTransforms;o!==null&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{kt(s)}}function dF(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}return r}function KD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function QD(t,e){let n=t.contentQueries;if(n!==null){let r=kt(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];zC(s),a.contentQueries(2,e[o],o)}}}finally{kt(r)}}}function dd(t,e){return t[Oa]?t[B0][gn]=e:t[Oa]=e,t[B0]=e,e}function Dm(t,e,n){zC(0);let r=kt(null);try{e(t,n)}finally{kt(r)}}function hF(t){return t[Pa]||(t[Pa]=[])}function fF(t){return t.cleanup||(t.cleanup=[])}function YD(t,e){let n=t[to],r=n?n.get(pr,null):null;r&&r.handleError(e)}function fg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=e[o],u=t.data[o];zD(u,c,r,a,i)}}function pF(t,e,n){let r=jC(e,t);Yk(t[ze],r,n)}var mF=100;function gF(t,e=!0){let n=t[hr],r=n.rendererFactory,i=n.afterRenderEventManager,s=!1;s||(r.begin?.(),i?.begin());try{yF(t)}catch(o){throw e&&YD(t,o),o}finally{s||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function yF(t){Tm(t,0);let e=0;for(;HC(t);){if(e===mF)throw new N(103,!1);e++,Tm(t,1)}}function _F(t,e,n,r){let i=e[F];if((i&256)===256)return;let s=!1;!s&&e[hr].inlineEffectRunner?.flush(),Hm(e);let o=null,a=null;!s&&vF(t)&&(a=k1(e),o=r0(a));try{$C(e),JO(t.bindingStartIndex),n!==null&&HD(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Il(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Cl(e,d,0,null),Lp(e,0)}if(wF(e),ZD(e,0),t.contentQueries!==null&&QD(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Il(e,d)}else{let d=t.contentHooks;d!==null&&Cl(e,d,1),Lp(e,1)}B1(t,e);let u=t.components;u!==null&&XD(e,u,0);let l=t.viewQuery;if(l!==null&&Dm(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Il(e,d)}else{let d=t.viewHooks;d!==null&&Cl(e,d,2),Lp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Fp]){for(let d of e[Fp])d();e[Fp]=null}s||(e[F]&=-73)}catch(c){throw Fa(e),c}finally{a!==null&&(i0(a,o),L1(a)),qm()}}function vF(t){return t.type!==2}function ZD(t,e){for(let n=DD(t);n!==null;n=TD(n)){n[F]&=~no.HasChildViewsToRefresh;for(let r=Jt;r<n.length;r++){let i=n[r];JD(i,e)}}}function wF(t){for(let e=DD(t);e!==null;e=TD(e)){if(!(e[F]&no.HasTransplantedViews))continue;let n=e[Ml];for(let r=0;r<n.length;r++){let i=n[r],s=i[We];jO(i)}}}function EF(t,e,n){let r=zr(e,t);JD(r,n)}function JD(t,e){jm(t)&&Tm(t,e)}function Tm(t,e){let r=t[se],i=t[F],s=t[Ai],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&hp(s)),s&&(s.dirty=!1),t[F]&=-9217,o)_F(r,t,r.template,t[yn]);else if(i&8192){ZD(t,1);let a=r.components;a!==null&&XD(t,a,1)}}function XD(t,e,n){for(let r=0;r<e.length;r++)EF(t,e[r],n)}function pg(t){for(t[hr].changeDetectionScheduler?.notify();t;){t[F]|=64;let e=tg(t);if(RO(t)&&!e)return t;t=e}return null}var Ni=class{get rootNodes(){let e=this._lView,n=e[se];return Bl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(_n(e)){let n=e[Rl],r=n?n.indexOf(this):-1;r>-1&&(dm(e,r),kl(n,r))}this._attachedToViewContainer=!1}xD(this._lView[se],this._lView)}onDestroy(e){$O(this._lView,e)}markForCheck(){pg(this._cdRefInjectingView||this._lView)}detach(){this._lView[F]&=-129}reattach(){nm(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,gF(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,e1(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e,nm(this._lView)}},Ka=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IF;let t=e;return t})();function IF(t){return CF(xt(),be(),(t&16)===16)}function CF(t,e,n){if(Jl(t)&&!n){let r=zr(t.index,e);return new Ni(r,r)}else if(t.type&47){let r=e[Un];return new Ni(r,e)}return null}var rC=new Set;function eT(t){rC.has(t)||(rC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var bm=class extends St{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=qp(s),i&&(i=qp(i)),o&&(o=qp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function qp(t){return e=>{setTimeout(t,void 0,e)}}var ft=bm;function iC(...t){}function DF(){let t=typeof Ti.requestAnimationFrame=="function",e=Ti[t?"requestAnimationFrame":"setTimeout"],n=Ti[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ye=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ft(!1),this.onMicrotaskEmpty=new ft(!1),this.onStable=new ft(!1),this.onError=new ft(!1),typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=DF().nativeRequestAnimationFrame,SF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new N(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,TF,iC,iC);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},TF={};function mg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ti,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Sm(t),t.isCheckStableRunning=!0,mg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Sm(t))}function SF(t){let e=()=>{bF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(AF(a))return n.invokeTask(i,s,o,a);try{return sC(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),oC(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return sC(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),oC(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Sm(t),mg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Sm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oC(t){t._nesting--,mg(t)}function AF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var xF=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function RF(t,e){let n=zr(e,t),r=n[se];MF(r,n);let i=n[yr];i!==null&&n[xl]===null&&(n[xl]=sg(i,n[to])),gg(r,n,n[yn])}function MF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gg(t,e,n){Hm(e);try{let r=t.viewQuery;r!==null&&Dm(1,r,n);let i=t.template;i!==null&&HD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&QD(t,e),t.staticViewQueries&&Dm(2,t.viewQuery,n);let s=t.components;s!==null&&NF(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[F]&=-5,qm()}}function NF(t,e){for(let n=0;n<e.length;n++)RF(t,e[n])}function $l(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=M0(i,a);else if(s==2){let c=a,u=e[++o];r=M0(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Hl=class extends ad{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Si(e);return new Ua(n,this.ngModule)}};function aC(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function PF(t){let e=t.toLowerCase();return e==="svg"?OO:e==="math"?kO:null}var Am=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ql(r);let i=this.injector.get(e,$p,r);return i!==$p||n===$p?i:this.parentInjector.get(e,n,r)}},Ua=class extends Ul{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=aC(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return aC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=TO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof Xt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Am(e,s):e,a=o.get(Va,null);if(a===null)throw new N(407,!1);let c=o.get(M1,null),u=o.get(xF,null),l=o.get(fm,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?q1(h,r,this.componentDef.encapsulation,o):SD(h,f,PF(f)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let E=null;_!==null&&(E=sg(_,o,!0));let A=dg(0,null,null,1,0,null,null,null,null,null,null),$=ld(null,A,null,w,null,null,d,h,o,null,E);Hm($);let ie,pe;try{let ke=this.componentDef,ve,Ot=null;ke.findHostDirectiveDefs?(ve=[],Ot=new Map,ke.findHostDirectiveDefs(ke,ve,Ot),ve.push(ke)):ve=[ke];let kr=OF($,_),wi=kF(kr,_,ke,ve,$,d,h);pe=BC(A,jn),_&&VF(h,ke,_,r),n!==void 0&&UF(pe,this.ngContentSelectors,n),ie=LF(wi,ke,ve,Ot,$,[jF]),gg(A,$,null)}finally{qm()}return new xm(this.componentType,ie,cd(pe,$),$,pe)}},xm=class extends pm{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ni(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;fg(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=zr(this._tNode.index,s);pg(o)}}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function OF(t,e){let n=t[se],r=jn;return t[r]=e,za(n,r,2,"#host",null)}function kF(t,e,n,r,i,s,o){let a=i[se];FF(r,t,e,o);let c=null;e!==null&&(c=sg(e,i[to]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=ld(i,qD(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&Cm(a,t,r.length-1),dd(i,d),i[t.index]=d}function FF(t,e,n,r){for(let i of t)e.mergedAttrs=Na(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&($l(e,e.mergedAttrs,!0),n!==null&&PD(r,n,e))}function LF(t,e,n,r,i,s){let o=xt(),a=i[se],c=en(o,i);GD(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=so(i,a,d,o);Gr(h,i)}WD(a,i,o),c&&Gr(c,i);let u=so(i,a,o.directiveStart+o.componentOffset,o);if(t[yn]=i[yn]=u,s!==null)for(let l of s)l(u,e);return cg(a,o,t),u}function VF(t,e,n,r){if(r)em(t,n,["ng-version","17.0.8"]);else{let{attrs:i,classes:s}=bO(e.selectors[0]);i&&em(t,n,i),s&&s.length>0&&ND(t,n,s.join(" "))}}function UF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function jF(){let t=xt();nd(be()[se],t)}function BF(t){return Object.getPrototypeOf(t.prototype).constructor}function Cn(t){let e=BF(t.type),n=!0,r=[t];for(;e;){let i;if(qr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new N(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=wl(t.inputs),o.inputTransforms=wl(t.inputTransforms),o.declaredInputs=wl(t.declaredInputs),o.outputs=wl(t.outputs);let a=i.hostBindings;a&&GF(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&HF(t,c),u&&qF(t,u),yl(t.inputs,i.inputs),yl(t.declaredInputs,i.declaredInputs),yl(t.outputs,i.outputs),i.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),yl(o.inputTransforms,i.inputTransforms)),qr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Cn&&(n=!1)}}e=Object.getPrototypeOf(e)}$F(r)}function $F(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Na(i.hostAttrs,n=Na(n,i.hostAttrs))}}function wl(t){return t===eo?{}:t===Zt?[]:t}function HF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function qF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function GF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function yg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function WF(t,e,n){return t[e]=n}function Qa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ya(t,e,n,r){let i=be(),s=$m();if(Qa(i,s,e)){let o=Lt(),a=XC();cF(a,i,t,e,n,r)}return Ya}function zF(t,e,n,r){return Qa(t,$m(),n)?e+zl(n)+r:Fi}function El(t,e){return t<<17|e<<2}function Pi(t){return t>>17&32767}function KF(t){return(t&2)==2}function QF(t,e){return t&131071|e<<17}function Rm(t){return t|2}function co(t){return(t&131068)>>2}function Gp(t,e){return t&-131069|e<<2}function YF(t){return(t&1)===1}function Mm(t){return t|1}function ZF(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pi(o),c=co(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Ha(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Pi(t[a+1]);t[r+1]=El(h,a),h!==0&&(t[h+1]=Gp(t[h+1],r)),t[a+1]=QF(t[a+1],r)}else t[r+1]=El(a,0),a!==0&&(t[a+1]=Gp(t[a+1],r)),a=r;else t[r+1]=El(c,0),a===0?a=r:t[c+1]=Gp(t[c+1],r),c=r;u&&(t[r+1]=Rm(t[r+1])),cC(t,l,r,!0,s),cC(t,l,r,!1,s),JF(e,l,t,r,s),o=El(a,c),s?e.classBindings=o:e.styleBindings=o}function JF(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ha(s,e)>=0&&(n[r+1]=Mm(n[r+1]))}function cC(t,e,n,r,i){let s=t[n+1],o=e===null,a=r?Pi(s):co(s),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],l=t[a+1];XF(u,e)&&(c=!0,t[a+1]=r?Mm(l):Rm(l)),a=r?Pi(l):co(l)}c&&(t[n+1]=r?Rm(s):Mm(s))}function XF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ha(t,e)>=0:!1}function L(t,e,n){let r=be(),i=$m();if(Qa(r,i,e)){let s=Lt(),o=XC();Y1(s,o,r,t,e,r[ze],n,!1)}return L}function uC(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";fg(t,n,s[o],o,r)}function Yr(t,e){return eL(t,e,null,!0),Yr}function eL(t,e,n,r){let i=be(),s=Lt(),o=XO(2);if(s.firstUpdatePass&&nL(s,t,o,r),e!==Fi&&Qa(i,o,e)){let a=s.data[lo()];aL(s,a,i,i[ze],t,i[o+1]=cL(e,n),r,o)}}function tL(t,e){return e>=t.expandoStartIndex}function nL(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[lo()],o=tL(t,n);uL(s,r)&&e===null&&!o&&(e=!1),e=rL(i,s,e,r),ZF(i,s,e,n,o,r)}}function rL(t,e,n,r){let i=rk(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Wp(null,t,e,n,r),n=ja(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Wp(i,t,e,n,r),s===null){let c=iL(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Wp(null,t,e,c[1],r),c=ja(c,e.attrs,r),sL(t,e,r,c))}else s=oL(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function iL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(co(r)!==0)return t[Pi(r)]}function sL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Pi(i)]=r}function oL(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ja(r,o,n)}return ja(r,e.attrs,n)}function Wp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ja(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ja(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),bk(t,o,n?!0:e[++s]))}return t===void 0?null:t}function aL(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=YF(u)?lC(c,e,n,i,co(u),o):void 0;if(!ql(l)){ql(s)||KF(u)&&(s=lC(c,null,n,i,a,o));let d=jC(lo(),n);g1(r,o,d,i,s)}}function lC(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Fi&&(h=d?Zt:void 0);let f=d?Up(h,r):l===r?h:void 0;if(u&&!ql(f)&&(f=Up(c,r)),ql(f)&&(a=f,o))return a;let _=t[i+1];i=o?Pi(_):co(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Up(c,r))}return a}function ql(t){return t!==void 0}function cL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(Wa(t)))),t}function uL(t,e){return(t.flags&(e?8:16))!==0}var cQ=new RegExp(`^(\\d+)*(${T1}|${D1})*(.*)`);var lL=(t,e)=>null;function dC(t,e){return lL(t,e)}function dL(t,e,n,r){let i=e.tView,o=t[F]&4096?4096:16,a=ld(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Yl]=c;let u=t[ka];return u!==null&&(a[ka]=u.createEmbeddedView(i)),gg(i,a,n),a}function hC(t,e){return!e||e.firstChild===null||ID(t)}function hL(t,e,n,r=!0){let i=e[se];if(n1(i,e,t,n),r){let o=hm(n,t),a=e[ze],c=ng(a,t[xi]);c!==null&&Xk(i,t[vn],a,e,c,o)}let s=e[xl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var ho=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fL;let t=e;return t})();function fL(){let t=xt();return mL(t,be())}var pL=ho,tT=class extends pL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return cd(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gm(this._hostTNode,this._hostLView);if(nD(e)){let n=Pl(e,this._hostLView),r=Nl(e),i=n[se].data[r+8];return new bi(i,n)}else return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=fC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=dC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,hC(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!Ck(e),a;if(o)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new Ua(Si(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let w=(o?u:this.parentInjector).get(Xt,null);w&&(s=w)}let l=Si(c.componentType??{}),d=dC(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,hC(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[We],u=new tT(c,c[vn],c[We]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return hL(o,i,s,r),e.attachToViewContainerRef(),hD(zp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=fC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=dm(this._lContainer,n);r&&(kl(zp(this._lContainer),n),xD(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=dm(this._lContainer,n);return r&&kl(zp(this._lContainer),n)!=null?new Ni(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fC(t){return t[Rl]}function zp(t){return t[Rl]||(t[Rl]=[])}function mL(t,e){let n,r=e[t.index];return _n(r)?n=r:(n=KD(r,e,null,t),e[t.index]=n,dd(e,n)),yL(n,e,t,r),new tT(n,t,e)}function gL(t,e){let n=t[ze],r=n.createComment(""),i=en(e,t),s=ng(n,i);return Ll(n,s,r,u1(n,i),!1),r}var yL=wL,_L=(t,e,n)=>!1;function vL(t,e,n){return _L(t,e,n)}function wL(t,e,n,r){if(t[xi])return;let i;n.type&8?i=Bn(r):i=gL(e,n),t[xi]=i}function EL(t,e,n,r,i,s,o,a,c){let u=e.consts,l=za(e,t,4,o||null,io(u,a));hg(e,n,l,io(u,c)),nd(e,l);let d=l.tView=dg(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function de(t,e,n,r,i,s,o,a){let c=be(),u=Lt(),l=t+jn,d=u.firstCreatePass?EL(l,u,c,e,n,r,i,s,o):u.data[l];Oi(d,!1);let h=IL(u,c,d,t);ed()&&sd(u,c,h,d),Gr(h,c);let f=KD(h,c,h,d);return c[l]=f,dd(c,f),vL(f,d,c),Xl(d)&&ug(u,c,d),o!=null&&lg(c,d,a),de}var IL=CL;function CL(t,e,n,r){return td(!0),e[ze].createComment("")}function DL(t,e,n,r,i,s){let o=e.consts,a=io(o,i),c=za(e,t,2,r,a);return hg(e,n,c,io(o,s)),c.attrs!==null&&$l(c,c.attrs,!1),c.mergedAttrs!==null&&$l(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function m(t,e,n,r){let i=be(),s=Lt(),o=jn+t,a=i[ze],c=s.firstCreatePass?DL(o,s,i,e,n,r):s.data[o],u=TL(s,i,c,a,e,t);i[o]=u;let l=Xl(c);return Oi(c,!0),PD(a,u,c),(c.flags&32)!==32&&ed()&&sd(s,i,u,c),HO()===0&&Gr(u,i),qO(),l&&(ug(s,i,c),cg(s,c,i)),r!==null&&lg(i,c),m}function g(){let t=xt();Bm()?WC():(t=t.parent,Oi(t,!1));let e=t;zO(e)&&KO(),GO();let n=Lt();return n.firstCreatePass&&(nd(n,t),Um(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&lk(e)&&uC(n,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dk(e)&&uC(n,e,be(),e.stylesWithoutHost,!1),g}function z(t,e,n,r){return m(t,e,n,r),g(),z}var TL=(t,e,n,r,i,s)=>(td(!0),SD(r,i,ok()));function bL(t,e,n,r,i){let s=e.consts,o=io(s,r),a=za(e,t,8,"ng-container",o);o!==null&&$l(a,o,!0);let c=io(s,i);return hg(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function _g(t,e,n){let r=be(),i=Lt(),s=t+jn,o=i.firstCreatePass?bL(s,i,r,e,n):i.data[s];Oi(o,!0);let a=SL(i,r,o,t);return r[s]=a,ed()&&sd(i,r,a,o),Gr(a,r),Xl(o)&&(ug(i,r,o),cg(i,o,r)),n!=null&&lg(r,o),_g}function vg(){let t=xt(),e=Lt();return Bm()?WC():(t=t.parent,Oi(t,!1)),e.firstCreatePass&&(nd(e,t),Um(t)&&e.queries.elementEnd(t)),vg}var SL=(t,e,n,r)=>(td(!0),Zk(e[ze],""));function Li(){return be()}var Gl="en-US";var AL=Gl;function xL(t){rO(t,"Expected localeId to be defined"),typeof t=="string"&&(AL=t.toLowerCase().replace(/_/g,"-"))}function Vi(t){return!!t&&typeof t.then=="function"}function nT(t){return!!t&&typeof t.subscribe=="function"}function he(t,e,n,r){let i=be(),s=Lt(),o=xt();return ML(s,i,i[ze],o,t,e,r),he}function RL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Pa],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function ML(t,e,n,r,i,s,o){let a=Xl(r),u=t.firstCreatePass&&fF(t),l=e[yn],d=hF(e),h=!0;if(r.type&3||o){let w=en(r,e),E=o?o(w):w,A=d.length,$=o?pe=>o(Bn(pe[r.index])):r.index,ie=null;if(!o&&a&&(ie=RL(t,e,i,r.index)),ie!==null){let pe=ie.__ngLastListenerFn__||ie;pe.__ngNextListenerFn__=s,ie.__ngLastListenerFn__=s,h=!1}else{s=mC(r,e,l,s,!1);let pe=n.listen(E,i,s);d.push(s,pe),u&&u.push(i,$,A,A+1)}}else s=mC(r,e,l,s,!1);let f=r.outputs,_;if(h&&f!==null&&(_=f[i])){let w=_.length;if(w)for(let E=0;E<w;E+=2){let A=_[E],$=_[E+1],ke=e[A][$].subscribe(s),ve=d.length;d.push(s,ke),u&&u.push(i,r.index,ve,-(ve+1))}}}function pC(t,e,n,r){try{return Fn(6,e,n),n(r)!==!1}catch(i){return YD(t,i),!1}finally{Fn(7,e,n)}}function mC(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?zr(t.index,e):e;pg(a);let c=pC(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=pC(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Qe(t=1){return sk(t)}function rT(t){let e=YO();return VO(e,jn+t)}function y(t,e=""){let n=be(),r=Lt(),i=t+jn,s=r.firstCreatePass?za(r,i,1,e,null):r.data[i],o=NL(r,n,s,e,t);n[i]=o,ed()&&sd(r,n,o,s),Oi(s,!1)}var NL=(t,e,n,r,i)=>(td(!0),Qk(e[ze],r));function J(t){return Dn("",t,""),J}function Dn(t,e,n){let r=be(),i=zF(r,t,e,n);return i!==Fi&&pF(r,lo(),i),Dn}function PL(t,e,n){let r=Lt();if(r.firstCreatePass){let i=qr(t);Nm(n,r.data,r.blueprint,i,!0),Nm(e,r.data,r.blueprint,i,!1)}}function Nm(t,e,n,r,i){if(t=It(t),Array.isArray(t))for(let s=0;s<t.length;s++)Nm(t[s],e,n,r,i);else{let s=Lt(),o=be(),a=xt(),c=ao(t)?t:It(t.provide),u=_D(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ao(t)||!t.multi){let f=new Mi(u,i,D),_=Qp(c,e,i?l:l+h,d);_===-1?(sm(Ol(a,o),s,c),Kp(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[_]=f,o[_]=f)}else{let f=Qp(c,e,l+h,d),_=Qp(c,e,l,l+h),w=f>=0&&n[f],E=_>=0&&n[_];if(i&&!E||!i&&!w){sm(Ol(a,o),s,c);let A=FL(i?kL:OL,n.length,i,r,u);!i&&E&&(n[_].providerFactory=A),Kp(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),o.push(A)}else{let A=iT(n[i?_:f],u,!i&&r);Kp(s,t,f>-1?f:_,A)}!i&&r&&E&&n[_].componentProviders++}}}function Kp(t,e,n,r){let i=ao(e),s=Mk(e);if(i||s){let c=(s?It(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function iT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function OL(t,e,n,r){return Pm(this.multi,[])}function kL(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=so(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),Pm(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Pm(i,s);return s}function Pm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function FL(t,e,n,r,i){let s=new Mi(t,n,D);return s.multi=[],s.index=e,s.componentProviders=0,iT(s,i,r&&!n),s}function Ui(t,e=[]){return n=>{n.providersResolver=(r,i)=>PL(r,i?i(t):t,e)}}var Wr=class{},Ba=class{};var Om=class extends Wr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hl(this);let i=NC(e);this._bootstrapComponents=ED(i.bootstrap),this._r3Injector=vD(e,n,[{provide:Wr,useValue:this},{provide:ad,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},km=class extends Ba{constructor(e){super(),this.moduleType=e}create(e){return new Om(this.moduleType,e,[])}};var Wl=class extends Wr{constructor(e){super(),this.componentFactoryResolver=new Hl(this),this.instance=null;let n=new La([...e.providers,{provide:Wr,useValue:this},{provide:ad,useValue:this.componentFactoryResolver}],e.parent||Ym(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wg(t,e,n=null){return new Wl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var LL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=mD(!1,r.type),s=i.length>0?wg([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(U(Xt))});let t=e;return t})();function je(t){eT("NgStandalone"),t.getStandaloneInjector=e=>e.get(LL).getOrCreateStandaloneInjector(t)}function ji(t,e,n,r){return UL(be(),ZO(),t,e,n,r)}function VL(t,e){let n=t[e];return n===Fi?void 0:n}function UL(t,e,n,r,i,s){let o=e+n;return Qa(t,o,i)?WF(t,o+1,s?r.call(s,i):r(i)):VL(t,o+1)}var hd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$L;let t=e;return t})(),jL=hd,BL=class extends jL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=dL(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Ni(i)}};function $L(){return sT(xt(),be())}function sT(t,e){return t.type&4?new BL(e,t,cd(t,e)):null}function oT(t,e){return sT(t,e)}var mr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},aT=new mr("17.0.8");var fd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Fm=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Eg=(()=>{let e=class e{compileModuleSync(r){return new km(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=NC(r),o=ED(s.declarations).reduce((a,c)=>{let u=Si(c);return u&&a.push(new Ua(u)),a},[]);return new Fm(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pd=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cT=new k("");var uT=new k("Application Initializer"),lT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=R(uT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Vi(o))r.push(o);else if(nT(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ig=new k("appBootstrapListener");function HL(){o0(()=>{throw new N(600,!1)})}function qL(t){return t.isBoundToModule}function GL(t,e,n){try{let r=n();return Vi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Za=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=R(UD),this.componentTypes=[],this.components=[],this.isStable=R(pd).hasPendingTasks.pipe(Q(r=>!r)),this._injector=R(Xt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Ul;if(!this._injector.get(lT).done){let _="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&MC(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new N(405,!1)}let a;s?a=r:a=this._injector.get(ad).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=qL(a)?void 0:this._injector.get(Wr),u=i||a.selector,l=a.create(Rt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(cT,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Yp(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new N(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Yp(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ig,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Yp(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new N(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var WL=(()=>{let e=class e{constructor(){this.zone=R(ye),this.applicationRef=R(Za)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zL(t){return[{provide:ye,useFactory:t},{provide:oo,multi:!0,useFactory:()=>{let e=R(WL,{optional:!0});return()=>e.initialize()}},{provide:oo,multi:!0,useFactory:()=>{let e=R(ZL);return()=>{e.initialize()}}},{provide:UD,useFactory:KL}]}function KL(){let t=R(ye),e=R(pr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function QL(t){let e=zL(()=>new ye(YL(t)));return rd([[],e])}function YL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var ZL=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=R(ye),this.pendingTasks=R(pd)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JL(){return typeof $localize<"u"&&$localize.locale||Gl}var Cg=new k("LocaleId",{providedIn:"root",factory:()=>R(Cg,Y.Optional|Y.SkipSelf)||JL()});var dT=new k("PlatformDestroyListeners");var bl=null;function XL(t=[],e){return Rt.create({name:e,providers:[{provide:id,useValue:"platform"},{provide:dT,useValue:new Set([()=>bl=null])},...t]})}function eV(t=[]){if(bl)return bl;let e=XL(t);return bl=e,HL(),tV(e),e}function tV(t){t.get(Jm,null)?.forEach(n=>n())}function hT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=eV(r),s=[QL(),...n||[]],a=new Wl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ye);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(pr,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(dT);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),GL(u,c,()=>{let f=a.get(lT);return f.runInitializers(),f.donePromise.then(()=>{let _=a.get(Cg,Gl);xL(_||Gl);let w=a.get(Za);return e!==void 0&&w.bootstrap(e),w})})})}catch(e){return Promise.reject(e)}}function Bi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Tg=null;function vr(){return Tg}function _T(t){Tg||(Tg=t)}var md=class{},Vt=new k("DocumentToken"),vT=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(nV))(),providedIn:"platform"});let t=e;return t})();var nV=(()=>{let e=class e extends vT{constructor(){super(),this._doc=R(Vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vr().getBaseHref(this._doc)}onPopState(r){let i=vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function wT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function fT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $i(t){return t&&t[0]!=="?"?"?"+t:t}var fo=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(ET))(),providedIn:"root"});let t=e;return t})(),rV=new k("appBaseHref"),ET=(()=>{let e=class e extends fo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??R(Vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return wT(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$i(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+$i(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+$i(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(vT),U(rV,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ja=(()=>{let e=class e{constructor(r){this._subject=new ft,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=oV(fT(pT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$i(i))}normalize(r){return e.stripTrailingSlash(sV(this._basePath,pT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$i(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$i(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=$i,e.joinWithSlash=wT,e.stripTrailingSlash=fT,e.\u0275fac=function(i){return new(i||e)(U(fo))},e.\u0275prov=P({token:e,factory:()=>iV(),providedIn:"root"});let t=e;return t})();function iV(){return new Ja(U(fo))}function sV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function pT(t){return t.replace(/\/index.html$/,"")}function oV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function IT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Dg=/\s+/,mT=[],po=(()=>{let e=class e{constructor(r,i,s,o){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=s,this._renderer=o,this.initialClasses=mT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Dg):mT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Dg):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Dg).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(D(ud),D(ag),D(In),D($n))},e.\u0275dir=Re({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var bg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yd=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new bg(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),gT(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);gT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(D(ho),D(hd),D(ud))},e.\u0275dir=Re({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function gT(t,e){t.context.$implicit=e.item}var Hn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Sg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){yT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){yT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(D(ho),D(hd))},e.\u0275dir=Re({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Sg=class{constructor(){this.$implicit=null,this.ngIf=null}};function yT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}var Ye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Xe({});let t=e;return t})(),CT="browser",aV="server";function Ag(t){return t===aV}var gd=class{};var Mg=class extends md{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ng=class t extends Mg{static makeCurrent(){_T(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=cV();return n==null?null:uV(n)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return IT(document.cookie,e)}},Xa=null;function cV(){return Xa=Xa||document.querySelector("base"),Xa?Xa.getAttribute("href"):null}function uV(t){return new URL(t,document.baseURI).pathname}var lV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Pg=new k("EventManagerPlugins"),ST=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new N(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(Pg),U(ye))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),vd=class{constructor(e){this._doc=e}},xg="ng-app-id",AT=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ag(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${xg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(xg),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(xg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(Vt),U(Zm),U(Xm,8),U(Qr))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Rg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kg=/%COMP%/g,xT="%COMP%",dV=`_nghost-${xT}`,hV=`_ngcontent-${xT}`,fV=!0,pV=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>fV});function mV(t){return hV.replace(kg,t)}function gV(t){return dV.replace(kg,t)}function RT(t,e){return e.map(n=>n.replace(kg,t))}var DT=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ag(c),this.defaultRenderer=new ec(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Vn.ShadowDom&&(i=ge(S({},i),{encapsulation:Vn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof wd?s.applyToHost(r):s instanceof tc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Vn.Emulated:o=new wd(u,l,i,this.appId,d,a,c,h);break;case Vn.ShadowDom:return new Og(u,l,r,i,a,c,this.nonce,h);default:o=new tc(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(ST),U(AT),U(Zm),U(pV),U(Vt),U(Qr),U(ye),U(Xm))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),ec=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Rg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(TT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(TT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new N(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Rg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Rg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(n,r,i&fr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&fr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function TT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Og=class extends ec{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=RT(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},tc=class extends ec{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?RT(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wd=class extends tc{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=mV(u),this.hostAttr=gV(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},yV=(()=>{let e=class e extends vd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(U(Vt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),bT=["alt","control","meta","shift"],_V={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wV=(()=>{let e=class e extends vd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),bT.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=_V[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bT.forEach(a=>{if(a!==s){let c=vV[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(Vt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function MT(t,e){return hT(S({rootComponent:t},EV(e)))}function EV(t){return{appProviders:[...bV,...t?.providers??[]],platformProviders:TV}}function IV(){Ng.makeCurrent()}function CV(){return new pr}function DV(){return wD(document),document}var TV=[{provide:Qr,useValue:CT},{provide:Jm,useValue:IV,multi:!0},{provide:Vt,useFactory:DV,deps:[]}];var bV=[{provide:id,useValue:"root"},{provide:pr,useFactory:CV,deps:[]},{provide:Pg,useClass:yV,multi:!0,deps:[Vt,ye,Qr]},{provide:Pg,useClass:wV,multi:!0,deps:[Vt]},DT,AT,ST,{provide:Va,useExisting:DT},{provide:gd,useClass:lV,deps:[]},[]];function SV(){return new Fg(U(Vt))}var Fg=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(Vt))},e.\u0275prov=P({token:e,factory:function(i){let s=null;return i?s=new i:s=SV(),s},providedIn:"root"});let t=e;return t})();var K="primary",mc=Symbol("RouteTitle"),Bg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vo(t){return new Bg(t)}function xV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function RV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qn(t[n],e[n]))return!1;return!0}function qn(t,e){let n=t?$g(t):void 0,r=e?$g(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!LT(t[i],e[i]))return!1;return!0}function $g(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function VT(t){return t.length>0?t[t.length-1]:null}function ei(t){return Ap(t)?t:Vi(t)?Ae(Promise.resolve(t)):q(t)}var MV={exact:jT,subset:BT},UT={exact:NV,subset:PV,ignored:()=>!0};function NT(t,e,n){return MV[n.paths](t.root,e.root,n.matrixParams)&&UT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function NV(t,e){return qn(t,e)}function jT(t,e,n){if(!qi(t.segments,e.segments)||!Cd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!jT(t.children[r],e.children[r],n))return!1;return!0}function PV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LT(t[n],e[n]))}function BT(t,e,n){return $T(t,e,e.segments,n)}function $T(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!qi(i,n)||e.hasChildren()||!Cd(i,n,r))}else if(t.segments.length===n.length){if(!qi(t.segments,n)||!Cd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!BT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!qi(t.segments,i)||!Cd(t.segments,i,r)||!t.children[K]?!1:$T(t.children[K],e,s,r)}}function Cd(t,e,n){return e.every((r,i)=>UT[n](t[i].parameters,r.parameters))}var Zr=class{constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){return FV.serialize(this)}},me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dd(this)}},Hi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=vo(this.parameters)),this._parameterMap}toString(){return qT(this)}};function OV(t,e){return qi(t,e)&&t.every((n,r)=>qn(n.parameters,e[r].parameters))}function qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function kV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===K&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==K&&(n=n.concat(e(i,r)))}),n}var fy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>new bd)(),providedIn:"root"});let t=e;return t})(),bd=class{parse(e){let n=new qg(e);return new Zr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nc(e.root,!0)}`,r=UV(e.queryParams),i=typeof e.fragment=="string"?`#${LV(e.fragment)}`:"";return`${n}${r}${i}`}},FV=new bd;function Dd(t){return t.segments.map(e=>qT(e)).join("/")}function nc(t,e){if(!t.hasChildren())return Dd(t);if(e){let n=t.children[K]?nc(t.children[K],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${nc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=kV(t,(r,i)=>i===K?[nc(t.children[K],!1)]:[`${i}:${nc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[K]!=null?`${Dd(t)}/${n[0]}`:`${Dd(t)}/(${n.join("//")})`}}function HT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ed(t){return HT(t).replace(/%3B/gi,";")}function LV(t){return encodeURI(t)}function Hg(t){return HT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Td(t){return decodeURIComponent(t)}function PT(t){return Td(t.replace(/\+/g,"%20"))}function qT(t){return`${Hg(t.path)}${VV(t.parameters)}`}function VV(t){return Object.keys(t).map(e=>`;${Hg(e)}=${Hg(t[e])}`).join("")}function UV(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${Ed(n)}=${Ed(i)}`).join("&"):`${Ed(n)}=${Ed(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var jV=/^[^\/()?;#]+/;function Lg(t){let e=t.match(jV);return e?e[0]:""}var BV=/^[^\/()?;=#]+/;function $V(t){let e=t.match(BV);return e?e[0]:""}var HV=/^[^=?&#]+/;function qV(t){let e=t.match(HV);return e?e[0]:""}var GV=/^[^&#]+/;function WV(t){let e=t.match(GV);return e?e[0]:""}var qg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[K]=new me(e,n)),r}parseSegment(){let e=Lg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(e),new Hi(Td(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=$V(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Lg(this.remaining);i&&(r=i,this.capture(r))}e[Td(n)]=Td(r)}parseQueryParam(e){let n=qV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=WV(this.remaining);o&&(r=o,this.capture(r))}let i=PT(n),s=PT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new N(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=K);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[K]:new me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new N(4011,!1)}};function GT(t){return t.segments.length>0?new me([],{[K]:t}):t}function WT(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],s=WT(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new me(t.segments,e);return zV(n)}function zV(t){if(t.numberOfChildren===1&&t.children[K]){let e=t.children[K];return new me(t.segments.concat(e.segments),e.children)}return t}function wo(t){return t instanceof Zr}function KV(t,e,n=null,r=null){let i=zT(t);return KT(i,e,n,r)}function zT(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=GT(r);return e??i}function KT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Vg(i,i,i,n,r);let s=QV(e);if(s.toRoot())return Vg(i,i,new me([],{}),n,r);let o=YV(s,i,t),a=o.processChildren?sc(o.segmentGroup,o.index,s.commands):YT(o.segmentGroup,o.index,s.commands);return Vg(i,o.segmentGroup,a,n,r)}function Sd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function cc(t){return typeof t=="object"&&t!=null&&t.outlets}function Vg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=QT(t,e,n);let a=GT(WT(o));return new Zr(a,s,i)}function QT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=QT(s,e,n)}),new me(t.segments,r)}var Ad=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Sd(r[0]))throw new N(4003,!1);let i=r.find(cc);if(i&&i!==VT(r))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ad(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ad(n,e,r)}var yo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function YV(t,e,n){if(t.isAbsolute)return new yo(e,!0,0);if(!n)return new yo(e,!1,NaN);if(n.parent===null)return new yo(n,!0,0);let r=Sd(t.commands[0])?0:1,i=n.segments.length-1+r;return ZV(n,i,t.numberOfDoubleDots)}function ZV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new N(4005,!1);i=r.segments.length}return new yo(r,!1,i-s)}function JV(t){return cc(t[0])?t[0].outlets:{[K]:t}}function YT(t,e,n){if(t||(t=new me([],{})),t.segments.length===0&&t.hasChildren())return sc(t,e,n);let r=XV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new me(t.segments.slice(0,r.pathIndex),{});return s.children[K]=new me(t.segments.slice(r.pathIndex),t.children),sc(s,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Gg(t,e,n):r.match?sc(t,0,i):Gg(t,e,n)}function sc(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=JV(n),i={};if(Object.keys(r).some(s=>s!==K)&&t.children[K]&&t.numberOfChildren===1&&t.children[K].segments.length===0){let s=sc(t.children[K],e,n);return new me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=YT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(t.segments,i)}}function XV(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(cc(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!kT(c,u,o))return s;r+=2}else{if(!kT(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(cc(s)){let c=e2(s.outlets);return new me(r,c)}if(i===0&&Sd(n[0])){let c=t.segments[e];r.push(new Hi(c.path,OT(n[0]))),i++;continue}let o=cc(s)?s.outlets[K]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Sd(a)?(r.push(new Hi(o,OT(a))),i+=2):(r.push(new Hi(o,{})),i++)}return new me(r,{})}function e2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Gg(new me([],{}),0,r))}),e}function OT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function kT(t,e,n){return t==n.path&&qn(e,n.parameters)}var oc="imperative",tn=class{constructor(e,n){this.id=e,this.url=n}},Gi=class extends tn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jr=class extends tn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xr=class extends tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wi=class extends tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},uc=class extends tn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xd=class extends tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zg=class extends tn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kg=class extends tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qg=class extends tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zg=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jg=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ey=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lc=class{},dc=class{constructor(e){this.url=e}};var ny=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kd,this.attachRef=null}},kd=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ny,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ry(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ry(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=iy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iy(e,this._root).map(n=>n.value)}};function ry(t,e){if(t===e.value)return e;for(let n of e.children){let r=ry(t,n);if(r)return r}return null}function iy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=iy(t,n);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function go(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Md=class extends Rd{constructor(e,n){super(e),this.snapshot=n,my(this,e)}toString(){return this.snapshot.toString()}};function ZT(t,e){let n=t2(t,e),r=new ct([new Hi("",{})]),i=new ct({}),s=new ct({}),o=new ct({}),a=new ct(""),c=new wr(r,i,o,a,s,K,e,n.root);return c.snapshot=n.root,new Md(new Ut(c,[]),n)}function t2(t,e){let n={},r={},i={},s="",o=new hc([],n,i,s,r,K,e,null,{});return new Nd("",new Ut(o,[]))}var wr=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(u=>u[mc]))??q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Q(e=>vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Q(e=>vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function py(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:S(S({},e.params),t.params),data:S(S({},e.data),t.data),resolve:S(S(S(S({},t.data),e.data),i?.data),t._resolvedData)}:r={params:S({},t.params),data:S({},t.data),resolve:S(S({},t.data),t._resolvedData??{})},i&&XT(i)&&(r.resolve[mc]=i.title),r}var hc=class{get title(){return this.data?.[mc]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Nd=class extends Rd{constructor(e,n){super(n),this.url=e,my(this,n)}toString(){return JT(this._root)}};function my(t,e){e.value._routerState=t,e.children.forEach(n=>my(t,n))}function JT(t){let e=t.children.length>0?` { ${t.children.map(JT).join(", ")} } `:"";return`${t.value}${e}`}function Ug(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qn(e.params,n.params)||t.paramsSubject.next(n.params),RV(e.url,n.url)||t.urlSubject.next(n.url),qn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sy(t,e){let n=qn(t.params,e.params)&&OV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sy(t.parent,e.parent))}function XT(t){return typeof t.title=="string"||t.title===null}var gy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new ft,this.deactivateEvents=new ft,this.attachEvents=new ft,this.detachEvents=new ft,this.parentContexts=R(kd),this.location=R(ho),this.changeDetector=R(Ka),this.environmentInjector=R(Xt),this.inputBinder=R(yy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new oy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Re({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_r]});let t=e;return t})(),oy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wr?this.route:e===kd?this.childContexts:this.parent.get(e,n)}},yy=new k("");function n2(t,e,n){let r=fc(t,e._root,n?n._root:void 0);return new Md(r,e)}function fc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=r2(t,e,n);return new Ut(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fc(t,a)),o}}let r=i2(e.value),i=e.children.map(s=>fc(t,s));return new Ut(r,i)}}function r2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return fc(t,r,i);return fc(t,r)})}function i2(t){return new wr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var eb="ngNavigationCancelingError";function tb(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=wo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nb(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function nb(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[eb]=!0,r.cancellationCode=e,n&&(r.url=n),r}function s2(t){return rb(t)&&wo(t.url)}function rb(t){return t&&t[eb]}var o2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ue({type:e,selectors:[["ng-component"]],standalone:!0,features:[je],decls:1,vars:0,template:function(i,s){i&1&&z(0,"router-outlet")},dependencies:[gy],encapsulation:2});let t=e;return t})();function a2(t,e){return t.providers&&!t._injector&&(t._injector=wg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function _y(t){let e=t.children&&t.children.map(_y),n=e?ge(S({},t),{children:e}):S({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==K&&(n.component=o2),n}function Gn(t){return t.outlet||K}function c2(t,e){let n=t.filter(r=>Gn(r)===e);return n.push(...t.filter(r=>Gn(r)!==e)),n}function gc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var u2=(t,e,n,r)=>Q(i=>(new ay(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ay=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ug(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=go(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=go(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=go(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=go(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ty(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Ug(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ug(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=gc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Pd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_o=class{constructor(e,n){this.component=e,this.route=n}};function l2(t,e,n){let r=t._root,i=e?e._root:null;return rc(r,i,n,[r.value])}function d2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Io(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!vC(t)?t:e.get(t):r}function rc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=go(e);return t.children.forEach(o=>{h2(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ac(a,n.getContext(o),i)),i}function h2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=f2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rc(t,e,a?a.children:null,r,i):rc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _o(a.outlet.component,o))}else o&&ac(e,a,i),i.canActivateChecks.push(new Pd(r)),s.component?rc(t,null,a?a.children:null,r,i):rc(t,null,n,r,i);return i}function f2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qi(t.url,e.url)||!qn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sy(t,e)||!qn(t.queryParams,e.queryParams);case"paramsChange":default:return!sy(t,e)}}function ac(t,e,n){let r=go(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ac(o,e.children.getContext(s),n):ac(o,null,n):ac(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _o(e.outlet.component,i)):n.canDeactivateChecks.push(new _o(null,i)):n.canDeactivateChecks.push(new _o(null,i))}function yc(t){return typeof t=="function"}function p2(t){return typeof t=="boolean"}function m2(t){return t&&yc(t.canLoad)}function g2(t){return t&&yc(t.canActivate)}function y2(t){return t&&yc(t.canActivateChild)}function _2(t){return t&&yc(t.canDeactivate)}function v2(t){return t&&yc(t.canMatch)}function ib(t){return t instanceof dr||t?.name==="EmptyError"}var Id=Symbol("INITIAL_VALUE");function Eo(){return pn(t=>pl(t.map(e=>e.pipe(Qt(1),Op(Id)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===Id)return Id;if(n===!1||n instanceof Zr)return n}return!0}),fn(e=>e!==Id),Qt(1)))}function w2(t,e){return Ge(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?q(ge(S({},n),{guardsResult:!0})):E2(o,r,i,t).pipe(Ge(a=>a&&p2(a)?I2(r,s,t,e):q(a)),Q(a=>ge(S({},n),{guardsResult:a})))})}function E2(t,e,n,r){return Ae(t).pipe(Ge(i=>S2(i.component,i.route,n,e,r)),kn(i=>i!==!0,!0))}function I2(t,e,n,r){return Ae(e).pipe(Ks(i=>zs(D2(i.route.parent,r),C2(i.route,r),b2(t,i.path,n),T2(t,i.route,n))),kn(i=>i!==!0,!0))}function C2(t,e){return t!==null&&e&&e(new ey(t)),q(!0)}function D2(t,e){return t!==null&&e&&e(new Jg(t)),q(!0)}function T2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(s=>ml(()=>{let o=gc(e)??n,a=Io(s,o),c=g2(a)?a.canActivate(e,t):ki(o,()=>a(e,t));return ei(c).pipe(kn())}));return q(i).pipe(Eo())}function b2(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>d2(o)).filter(o=>o!==null).map(o=>ml(()=>{let a=o.guards.map(c=>{let u=gc(o.node)??n,l=Io(c,u),d=y2(l)?l.canActivateChild(r,t):ki(u,()=>l(r,t));return ei(d).pipe(kn())});return q(a).pipe(Eo())}));return q(s).pipe(Eo())}function S2(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(a=>{let c=gc(e)??i,u=Io(a,c),l=_2(u)?u.canDeactivate(t,e,n,r):ki(c,()=>u(t,e,n,r));return ei(l).pipe(kn())});return q(o).pipe(Eo())}function A2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let s=i.map(o=>{let a=Io(o,t),c=m2(a)?a.canLoad(e,n):ki(t,()=>a(e,n));return ei(c)});return q(s).pipe(Eo(),sb(r))}function sb(t){return wp(Ve(e=>{if(wo(e))throw tb(t,e)}),Q(e=>e===!0))}function x2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let s=i.map(o=>{let a=Io(o,t),c=v2(a)?a.canMatch(e,n):ki(t,()=>a(e,n));return ei(c)});return q(s).pipe(Eo(),sb(r))}var pc=class{constructor(e){this.segmentGroup=e||null}},Od=class extends Error{constructor(e){super(),this.urlTree=e}};function mo(t){return Ws(new pc(t))}function R2(t){return Ws(new N(4e3,!1))}function M2(t){return Ws(nb(!1,3))}var cy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[K])return R2(e.redirectTo);i=i.children[K]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Od(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Zr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new N(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},uy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N2(t,e,n,r,i){let s=vy(t,e,n);return s.matched?(r=a2(e,r),x2(r,e,n,i).pipe(Q(o=>o===!0?s:S({},uy)))):q(s)}function vy(t,e,n){if(e.path==="**")return P2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?S({},uy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xV)(n,t,e);if(!i)return S({},uy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?S(S({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function P2(t){return{matched:!0,parameters:t.length>0?VT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function FT(t,e,n,r){return n.length>0&&F2(t,n,r)?{segmentGroup:new me(e,k2(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&L2(t,n,r)?{segmentGroup:new me(t.segments,O2(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function O2(t,e,n,r,i){let s={};for(let o of r)if(Fd(t,n,o)&&!i[Gn(o)]){let a=new me([],{});s[Gn(o)]=a}return S(S({},i),s)}function k2(t,e){let n={};n[K]=e;for(let r of t)if(r.path===""&&Gn(r)!==K){let i=new me([],{});n[Gn(r)]=i}return n}function F2(t,e,n){return n.some(r=>Fd(t,e,r)&&Gn(r)!==K)}function L2(t,e,n){return n.some(r=>Fd(t,e,r))}function Fd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function V2(t,e,n,r){return Gn(t)!==r&&(r===K||!Fd(e,n,t))?!1:vy(e,t,n).matched}function U2(t,e,n){return e.length===0&&!t.children[n]}var ly=class{};function j2(t,e,n,r,i,s,o="emptyOnly"){return new dy(t,e,n,r,i,o,s).recognize()}var B2=31,dy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new N(4002,`'${e.segmentGroup}'`)}recognize(){let e=FT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(n=>{let r=new hc([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},K,this.rootComponentType,null,{}),i=new Ut(r,n),s=new Nd("",i),o=KV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,K).pipe(jr(r=>{if(r instanceof Od)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=py(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Q(s=>s instanceof Ut?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ae(i).pipe(Ks(s=>{let o=r.children[s],a=c2(n,s);return this.processSegmentGroup(e,a,o,s)}),Pp((s,o)=>(s.push(...o),s)),Br(null),Np(),Ge(s=>{if(s===null)return mo(r);let o=ob(s);return $2(o),q(o)}))}processSegment(e,n,r,i,s,o){return Ae(n).pipe(Ks(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(jr(c=>{if(c instanceof pc)return q(null);throw c}))),kn(a=>!!a),jr(a=>{if(ib(a))return U2(r,i,s)?q(new ly):mo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return V2(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):mo(i):mo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=vy(n,i,s);if(!a)return mo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>B2&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ge(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=N2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(pn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pn(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new hc(l,h,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,q2(r),Gn(r),r.component??r._loadedComponent??null,r,G2(r)),{segmentGroup:_,slicedSegments:w}=FT(n,l,d,c);if(w.length===0&&_.hasChildren())return this.processChildren(u,c,_).pipe(Q(A=>A===null?null:new Ut(f,A)));if(c.length===0&&w.length===0)return q(new Ut(f,[]));let E=Gn(r)===s;return this.processSegment(u,c,_,w,E?K:s,!0).pipe(Q(A=>new Ut(f,A instanceof Ut?[A]:[])))}))):mo(n)))}getChildConfig(e,n,r){return n.children?q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?q({routes:n._loadedRoutes,injector:n._loadedInjector}):A2(e,n,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,n).pipe(Ve(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):M2(n))):q({routes:[],injector:e})}};function $2(t){t.sort((e,n)=>e.value.outlet===K?-1:n.value.outlet===K?1:e.value.outlet.localeCompare(n.value.outlet))}function H2(t){let e=t.value.routeConfig;return e&&e.path===""}function ob(t){let e=[],n=new Set;for(let r of t){if(!H2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ob(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!n.has(r))}function q2(t){return t.data||{}}function G2(t){return t.resolve||{}}function W2(t,e,n,r,i,s){return Ge(o=>j2(t,e,n,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>ge(S({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function z2(t,e){return Ge(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return q(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of ab(c))o.add(u);let a=0;return Ae(o).pipe(Ks(c=>s.has(c)?K2(c,r,t,e):(c.data=py(c,c.parent,t).resolve,q(void 0))),Ve(()=>a++),Qs(1),Ge(c=>a===o.size?q(n):Kt))})}function ab(t){let e=t.children.map(n=>ab(n)).flat();return[t,...e]}function K2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!XT(i)&&(s[mc]=i.title),Q2(s,t,e,r).pipe(Q(o=>(t._resolvedData=o,t.data=py(t,t.parent,n).resolve,null)))}function Q2(t,e,n,r){let i=$g(t);if(i.length===0)return q({});let s={};return Ae(i).pipe(Ge(o=>Y2(t[o],e,n,r).pipe(kn(),Ve(a=>{s[o]=a}))),Qs(1),Mp(s),jr(o=>ib(o)?Kt:Ws(o)))}function Y2(t,e,n,r){let i=gc(e)??r,s=Io(t,i),o=s.resolve?s.resolve(e,n):ki(i,()=>s(e,n));return ei(o)}function jg(t){return pn(e=>{let n=t(e);return n?Ae(n).pipe(Q(()=>e)):q(e)})}var cb=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===K);return i}getResolvedTitleForRoute(r){return r.data[mc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(Z2))(),providedIn:"root"});let t=e;return t})(),Z2=(()=>{let e=class e extends cb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(Fg))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wy=new k("",{providedIn:"root",factory:()=>({})}),Ey=new k("ROUTES"),J2=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=R(Eg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ei(r.loadComponent()).pipe(Q(ub),Ve(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Sa(()=>{this.componentLoaders.delete(r)})),s=new $s(i,()=>new St).pipe(Bs());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=X2(i,this.compiler,r,this.onLoadEndListener).pipe(Sa(()=>{this.childrenLoaders.delete(i)})),a=new $s(o,()=>new St).pipe(Bs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X2(t,e,n,r){return ei(t.loadChildren()).pipe(Q(ub),Ge(i=>i instanceof Ba||Array.isArray(i)?q(i):Ae(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ey,[],{optional:!0,self:!0}).flat()),{routes:o.map(_y),injector:s}}))}function eU(t){return t&&typeof t=="object"&&"default"in t}function ub(t){return eU(t)?t.default:t}var Iy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(tU))(),providedIn:"root"});let t=e;return t})(),tU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nU=new k("");var rU=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=R(J2),this.environmentInjector=R(Xt),this.urlSerializer=R(fy),this.rootContexts=R(kd),this.location=R(Ja),this.inputBindingEnabled=R(yy,{optional:!0})!==null,this.titleStrategy=R(cb),this.options=R(wy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=R(Iy),this.createViewTransition=R(nU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Yg(s)),i=s=>this.events.next(new Zg(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ge(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ct({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fn(o=>o.id!==0),Q(o=>ge(S({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pn(o=>{this.currentTransition=o;let a=!1,c=!1;return q(o).pipe(Ve(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ge(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pn(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Wi(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),Kt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(pn(h=>{let f=this.transitions?.getValue();return this.events.next(new Gi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Kt:Promise.resolve(h)}),W2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ge(S({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new xd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:w,extras:E}=u,A=new Gi(h,this.urlSerializer.serialize(f),_,w);this.events.next(A);let $=ZT(f,this.rootComponentType).snapshot;return this.currentTransition=o=ge(S({},u),{targetSnapshot:$,urlAfterRedirects:f,extras:ge(S({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,q(o)}else{let h="";return this.events.next(new Wi(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),Kt}}),Ve(u=>{let l=new Wg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=o=ge(S({},u),{guards:l2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),w2(this.environmentInjector,u=>this.events.next(u)),Ve(u=>{if(o.guardsResult=u.guardsResult,wo(u.guardsResult))throw tb(this.urlSerializer,u.guardsResult);let l=new zg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),fn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),jg(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(Ve(l=>{let d=new Kg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),pn(l=>{let d=!1;return q(l).pipe(z2(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Ve(l=>{let d=new Qg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),jg(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ve(f=>{d.component=f}),Q(()=>{})));for(let f of d.children)h.push(...l(f));return h};return pl(l(u.targetSnapshot.root)).pipe(Br(null),Qt(1))}),jg(()=>this.afterPreactivation()),pn(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Ae(d).pipe(Q(()=>o)):q(o)}),Q(u=>{let l=n2(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ge(S({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ve(()=>{this.events.next(new lc)}),u2(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Qt(1),Ve({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),kp(this.transitionAbortSubject.pipe(Ve(u=>{throw u}))),Sa(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(o,u,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),jr(u=>{if(c=!0,rb(u))this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),s2(u)?this.events.next(new dc(u.url)):o.resolve(!1);else{this.events.next(new uc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){o.reject(l)}}return Kt}))}))}cancelNavigationTransition(r,i,s){let o=new Xr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iU(t){return t!==oc}var sU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(oU))(),providedIn:"root"});let t=e;return t})(),hy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},oU=(()=>{let e=class e extends hy{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>(()=>R(aU))(),providedIn:"root"});let t=e;return t})(),aU=(()=>{let e=class e extends lb{constructor(){super(...arguments),this.location=R(Ja),this.urlSerializer=R(fy),this.options=R(wy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=R(Iy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Zr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZT(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Gi)this.stateMemento=this.createStateMemento();else if(r instanceof Wi)this.rawUrlTree=i.initialUrl;else if(r instanceof xd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof lc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Xr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof uc?this.restoreHistory(i,!0):r instanceof Jr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ic=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ic||{});function cU(t,e){t.events.pipe(fn(n=>n instanceof Jr||n instanceof Xr||n instanceof uc||n instanceof Wi),Q(n=>n instanceof Jr||n instanceof Wi?ic.COMPLETE:(n instanceof Xr?n.code===0||n.code===1:!1)?ic.REDIRECTING:ic.FAILED),fn(n=>n!==ic.REDIRECTING),Qt(1)).subscribe(()=>{e()})}function uU(t){throw t}var lU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ut=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=R(fd),this.stateManager=R(lb),this.options=R(wy,{optional:!0})||{},this.pendingTasks=R(pd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=R(rU),this.urlSerializer=R(fy),this.location=R(Ja),this.urlHandlingStrategy=R(Iy),this._events=new St,this.errorHandler=this.options.errorHandler||uU,this.navigated=!1,this.routeReuseStrategy=R(sU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=R(Ey,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!R(yy,{optional:!0}),this.eventsSubscription=new Fe,this.isNgZoneEnabled=R(ye)instanceof ye&&ye.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Xr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Jr)this.navigated=!0;else if(i instanceof dc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||iU(s.source)};this.scheduleNavigation(a,oc,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}fU(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=S({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(_y),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=S(S({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=zT(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return KT(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=wo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,oc,null,i)}navigate(r,i={skipLocationChange:!1}){return hU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=S({},lU):i===!1?s=S({},dU):s=i,wo(r))return NT(this.currentUrlTree,r,s);let o=this.parseUrl(r);return NT(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{let o=r[s];return o!=null&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return cU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new N(4008,!1)}function fU(t){return!(t instanceof lc)&&!(t instanceof dc)}var db=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new St,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof Jr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:kD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(D(ut),D(wr),Wm("tabindex"),D($n),D(In),D(fo))},e.\u0275dir=Re({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&he("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ya("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Bi],skipLocationChange:["skipLocationChange","skipLocationChange",Bi],replaceUrl:["replaceUrl","replaceUrl",Bi],routerLink:"routerLink"},standalone:!0,features:[yg,_r]});let t=e;return t})();var pU=new k("");function hb(t,...e){return rd([{provide:Ey,multi:!0,useValue:t},[],{provide:wr,useFactory:mU,deps:[ut]},{provide:Ig,multi:!0,useFactory:gU},e.map(n=>n.\u0275providers)])}function mU(t){return t.routerState.root}function gU(){let t=R(Rt);return e=>{let n=t.get(Za);if(e!==n.components[0])return;let r=t.get(ut),i=t.get(yU);t.get(_U)===1&&r.initialNavigation(),t.get(vU,null,Y.Optional)?.setUpPreloading(),t.get(pU,null,Y.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yU=new k("",{factory:()=>new St}),_U=new k("",{providedIn:"root",factory:()=>1});var vU=new k("");var Dy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var T=function(t,e){if(!t)throw Qi(e)},Qi=function(t){return new Error("Firebase Database ("+Dy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var pb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new Ty;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ty=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Sy=function(t){let e=pb(t);return Vd.encodeByteArray(e,!0)},_c=function(t){return Sy(t).replace(/\./g,"")},vc=function(t){try{return Vd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mb(t){return gb(void 0,t)}function gb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!EU(n)||(t[n]=gb(t[n],e[n]));return t}function EU(t){return t!=="__proto__"}function IU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CU=()=>IU().__FIREBASE_DEFAULTS__,DU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&vc(t[1]);return e&&JSON.parse(e)},Ay=()=>{try{return CU()||DU()||TU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xy=t=>{var e,n;return(n=(e=Ay())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ry=t=>{let e=xy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},My=()=>{var t;return(t=Ay())===null||t===void 0?void 0:t.config},Ny=t=>{var e;return(e=Ay())===null||e===void 0?void 0:e[`_${t}`]};var Ki=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Py(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[_c(JSON.stringify(n)),_c(JSON.stringify(o)),a].join(".")}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function yb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ud(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _b(){let t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wn(){return Dy.NODE_CLIENT===!0||Dy.NODE_ADMIN===!0}function Oy(){try{return typeof indexedDB=="object"}catch{return!1}}function vb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var bU="FirebaseError",jt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jt(i,a,r)}};function SU(t,e){return t.replace(AU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var AU=/\{\$([^}]+)}/g;function Co(t){return JSON.parse(t)}function nt(t){return JSON.stringify(t)}var wb=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Co(vc(s[0])||""),n=Co(vc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var Eb=function(t){let e=wb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ib=function(t){let e=wb(t).claims;return typeof e=="object"&&e.admin===!0};function zn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ec(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ic(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Zi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(fb(s)&&fb(o)){if(!Zi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function fb(t){return t!==null&&typeof t=="object"}function Ji(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Do(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function To(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Ld=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Cb(t,e){let n=new by(t,e);return n.subscribe.bind(n)}var by=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cy),i.error===void 0&&(i.error=Cy),i.complete===void 0&&(i.complete=Cy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cy(){}function Db(t,e){return`${t} failed: ${e} argument `}var Tb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,T(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Cc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var NY=4*60*60*1e3;function $e(t){return t&&t._delegate?t._delegate:t}var Mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xi="[DEFAULT]";var jd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ki;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MU(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RU(t){return t===Xi?void 0:t}function MU(t){return t.instantiationMode==="EAGER"}var Dc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new jd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var NU=[],X=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(X||{}),PU={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},OU=X.INFO,kU={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},FU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=kU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kn=class{constructor(e){this.name=e,this._logLevel=OU,this._logHandler=FU,this._userLogHandler=null,NU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var LU=(t,e)=>e.some(n=>t instanceof n),bb,Sb;function VU(){return bb||(bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UU(){return Sb||(Sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ab=new WeakMap,Fy=new WeakMap,xb=new WeakMap,ky=new WeakMap,Vy=new WeakMap;function jU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ab.set(n,t)}).catch(()=>{}),Vy.set(e,t),e}function BU(t){if(Fy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fy.set(t,e)}var Ly={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rb(t){Ly=t(Ly)}function $U(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Bd(this),e,...n);return xb.set(r,e.sort?e.sort():[e]),Qn(r)}:UU().includes(t)?function(...e){return t.apply(Bd(this),e),Qn(Ab.get(this))}:function(...e){return Qn(t.apply(Bd(this),e))}}function HU(t){return typeof t=="function"?$U(t):(t instanceof IDBTransaction&&BU(t),LU(t,VU())?new Proxy(t,Ly):t)}function Qn(t){if(t instanceof IDBRequest)return jU(t);if(ky.has(t))return ky.get(t);let e=HU(t);return e!==t&&(ky.set(t,e),Vy.set(e,t)),e}var Bd=t=>Vy.get(t);function Nb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Qn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Qn(o.result),c.oldVersion,c.newVersion,Qn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var qU=["get","getKey","getAll","getAllKeys","count"],GU=["put","add","delete","clear"],Uy=new Map;function Mb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uy.get(e))return Uy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=GU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qU.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Uy.set(e,s),s}Rb(t=>ge(S({},t),{get:(e,n,r)=>Mb(e,n)||t.get(e,n,r),has:(e,n)=>!!Mb(e,n)||t.has(e,n)}));var By=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function WU(t){let e=t.getComponent();return e?.type==="VERSION"}var $y="@firebase/app",Pb="0.9.25";var es=new Kn("@firebase/app"),zU="@firebase/app-compat",KU="@firebase/analytics-compat",QU="@firebase/analytics",YU="@firebase/app-check-compat",ZU="@firebase/app-check",JU="@firebase/auth",XU="@firebase/auth-compat",ej="@firebase/database",tj="@firebase/database-compat",nj="@firebase/functions",rj="@firebase/functions-compat",ij="@firebase/installations",sj="@firebase/installations-compat",oj="@firebase/messaging",aj="@firebase/messaging-compat",cj="@firebase/performance",uj="@firebase/performance-compat",lj="@firebase/remote-config",dj="@firebase/remote-config-compat",hj="@firebase/storage",fj="@firebase/storage-compat",pj="@firebase/firestore",mj="@firebase/firestore-compat",gj="firebase",yj="10.7.1";var Hy="[DEFAULT]",_j={[$y]:"fire-core",[zU]:"fire-core-compat",[QU]:"fire-analytics",[KU]:"fire-analytics-compat",[ZU]:"fire-app-check",[YU]:"fire-app-check-compat",[JU]:"fire-auth",[XU]:"fire-auth-compat",[ej]:"fire-rtdb",[tj]:"fire-rtdb-compat",[nj]:"fire-fn",[rj]:"fire-fn-compat",[ij]:"fire-iid",[sj]:"fire-iid-compat",[oj]:"fire-fcm",[aj]:"fire-fcm-compat",[cj]:"fire-perf",[uj]:"fire-perf-compat",[lj]:"fire-rc",[dj]:"fire-rc-compat",[hj]:"fire-gcs",[fj]:"fire-gcs-compat",[pj]:"fire-fst",[mj]:"fire-fst-compat","fire-js":"fire-js",[gj]:"fire-js-all"};var Tc=new Map,qy=new Map;function vj(t,e){try{t.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yn(t){let e=t.name;if(qy.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,t);for(let n of Tc.values())vj(n,t);return!0}function bo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ti=new Er("app","Firebase",wj);var Gy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}};var Zn=yj;function Ky(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Hy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ti.create("bad-app-name",{appName:String(i)});if(n||(n=My()),!n)throw ti.create("no-options");let s=Tc.get(i);if(s){if(Zi(n,s.options)&&Zi(r,s.config))return s;throw ti.create("duplicate-app",{appName:i})}let o=new Dc(i);for(let c of qy.values())o.addComponent(c);let a=new Gy(n,r,o);return Tc.set(i,a),a}function ts(t=Hy){let e=Tc.get(t);if(!e&&t===Hy&&My())return Ky();if(!e)throw ti.create("no-app",{appName:t});return e}function $d(){return Array.from(Tc.values())}function Se(t,e,n){var r;let i=(r=_j[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(a.join(" "));return}Yn(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ej="firebase-heartbeat-database",Ij=1,bc="firebase-heartbeat-store",jy=null;function Lb(){return jy||(jy=Nb(Ej,Ij,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bc)}}}).catch(t=>{throw ti.create("idb-open",{originalErrorMessage:t.message})})),jy}function Cj(t){return p(this,null,function*(){try{return yield(yield Lb()).transaction(bc).objectStore(bc).get(Vb(t))}catch(e){if(e instanceof jt)es.warn(e.message);else{let n=ti.create("idb-get",{originalErrorMessage:e?.message});es.warn(n.message)}}})}function Ob(t,e){return p(this,null,function*(){try{let r=(yield Lb()).transaction(bc,"readwrite");yield r.objectStore(bc).put(e,Vb(t)),yield r.done}catch(n){if(n instanceof jt)es.warn(n.message);else{let r=ti.create("idb-set",{originalErrorMessage:n?.message});es.warn(r.message)}}})}function Vb(t){return`${t.name}!${t.options.appId}`}var Dj=1024,Tj=30*24*60*60*1e3,Wy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Tj}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=kb(),{heartbeatsToSend:r,unsentEntries:i}=bj(this._heartbeatsCache.heartbeats),s=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function kb(){return new Date().toISOString().substring(0,10)}function bj(t,e=Dj){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Oy()?vb().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Cj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Fb(t){return _c(JSON.stringify({version:2,heartbeats:t})).length}function Sj(t){Yn(new Mt("platform-logger",e=>new By(e),"PRIVATE")),Yn(new Mt("heartbeat",e=>new Wy(e),"PRIVATE")),Se($y,Pb,t),Se($y,Pb,"esm2017"),Se("fire-js","")}Sj("");var Aj="firebase",xj="10.7.1";Se(Aj,xj,"app");var Ir=new mr("ANGULARFIRE2_VERSION");function Ao(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var is=(t,e)=>{let n=e?[e]:$d(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},rs=class{constructor(){return is(Rj)}},Rj="app-check";function So(){}var Hd=class{zone;delegate;constructor(e,n=bp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Qy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",So,{},So,So)),n.pipe(Ve({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ss=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Hd(Zone.current)),this.insideAngular=n.run(()=>new Hd(Zone.current,Tp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(U(ye))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Mj(t){return qd().ngZone.runOutsideAngular(()=>t())}function ns(t){return qd().ngZone.run(()=>t())}function Nj(t){return Pj(qd())(t)}function Pj(t){return function(n){return n=n.lift(new Qy(t.ngZone)),n.pipe(Ur(t.outsideAngular),Vr(t.insideAngular))}}var Oj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ns(()=>t.apply(void 0,r))},Bt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ns(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",So,{},So,So))),r[s]=Oj(r[s],n));let i=Mj(()=>t.apply(this,r));if(!e)if(i instanceof ee){let s=qd();return i.pipe(Ur(s.outsideAngular),Vr(s.insideAngular))}else return ns(()=>i);return i instanceof ee?i.pipe(Nj):i instanceof Promise?ns(()=>new Promise((s,o)=>i.then(a=>ns(()=>s(a)),a=>ns(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ns(()=>i)};var Tn=class{constructor(e){return e}},ni=class{constructor(){return $d()}};function kj(t){return t&&t.length===1?t[0]:new Tn(ts())}var Yy=new k("angularfire2._apps"),Fj={provide:Tn,useFactory:kj,deps:[[new Ke,Yy]]},Lj={provide:ni,deps:[[new Ke,Yy]]};function Vj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Tn(r)}}var Zy=(()=>{class t{constructor(n){Se("angularfire",Ir.full,"core"),Se("angularfire",Ir.full,"app"),Se("angular",aT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(U(Qr))};static \u0275mod=et({type:t});static \u0275inj=Xe({providers:[Fj,Lj]})}return t})();function Ub(t,...e){return{ngModule:Zy,providers:[{provide:Yy,useFactory:Vj(t),multi:!0,deps:[ye,Rt,ss,...e]}]}}var jb=Bt(Ky,!0);function nS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rS=nS,iS=new Er("auth","Firebase",nS());var Yd=new Kn("@firebase/auth");function Uj(t,...e){Yd.logLevel<=X.WARN&&Yd.warn(`Auth (${Zn}): ${t}`,...e)}function Wd(t,...e){Yd.logLevel<=X.ERROR&&Yd.error(`Auth (${Zn}): ${t}`,...e)}function Xn(t,...e){throw w_(t,...e)}function os(t,...e){return w_(t,...e)}function jj(t,e,n){let r=Object.assign(Object.assign({},rS()),{[e]:n});return new Er("auth","Firebase",r).create(e,{appName:t.name})}function w_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iS.create(t,...e)}function j(t,e,...n){if(!t)throw w_(e,...n)}function Cr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Wd(e),new Error(e)}function ii(t,e){t||Cr(e)}function t_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Bj(){return Bb()==="http:"||Bb()==="https:"}function Bb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function $j(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bj()||yb()||"connection"in navigator)?navigator.onLine:!0}function Hj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var as=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=wc()||Ud()}get(){return $j()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function E_(t,e){ii(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Zd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Gj=new as(3e4,6e4);function si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Tr(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return sS(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Ji(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Zd.fetch()(oS(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function sS(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},qj),e);try{let i=new n_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Gd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Gd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Gd(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jj(t,l,u);Xn(t,l)}}catch(i){if(i instanceof jt)throw i;Xn(t,"network-request-failed",{message:String(i)})}})}function Nc(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let u=yield Tr(t,e,n,r,i);return"mfaPendingCredential"in u&&Xn(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function oS(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?E_(t.config,i):`${t.config.apiScheme}://${i}`}function Wj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var n_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(os(this.auth,"network-request-failed")),Gj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Gd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=os(t,e,r);return i.customData._tokenResponse=n,i}function $b(t){return t!==void 0&&t.enterprise!==void 0}var r_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Wj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function zj(t,e){return p(this,null,function*(){return Tr(t,"GET","/v2/recaptchaConfig",si(t,e))})}function Kj(t,e){return p(this,null,function*(){return Tr(t,"POST","/v1/accounts:delete",e)})}function Qj(t,e){return p(this,null,function*(){return Tr(t,"POST","/v1/accounts:lookup",e)})}function Sc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function I_(t,e=!1){return p(this,null,function*(){let n=$e(t),r=yield n.getIdToken(e),i=C_(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Sc(Jy(i.auth_time)),issuedAtTime:Sc(Jy(i.iat)),expirationTime:Sc(Jy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Jy(t){return Number(t)*1e3}function C_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wd("JWT malformed, contained fewer than 3 sections"),null;try{let i=vc(n);return i?JSON.parse(i):(Wd("Failed to decode base64 JWT payload"),null)}catch(i){return Wd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yj(t){let e=C_(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xo(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof jt&&Zj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Zj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var i_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jd=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xd(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield xo(t,Qj(n,{idToken:r}));j(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Xj(s.providerUserInfo):[],a=Jj(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jd(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function D_(t){return p(this,null,function*(){let e=$e(t);yield Xd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Jj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Xj(t){return t.map(e=>{var{providerId:n}=e,r=Sp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function eB(t,e){return p(this,null,function*(){let n=yield sS(t,{},()=>p(this,null,function*(){let r=Ji({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=oS(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function tB(t,e){return p(this,null,function*(){return Tr(t,"POST","/v2/accounts:revokeToken",si(t,e))})}var eh=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield eB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Cr("not implemented")}};function ri(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ac=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Sp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jd(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield xo(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return I_(this,e)}reload(){return D_(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Xd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield xo(this,Kj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(u=n.createdAt)!==null&&u!==void 0?u:void 0,$=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:ie,emailVerified:pe,isAnonymous:ke,providerData:ve,stsTokenManager:Ot}=n;j(ie&&Ot,e,"internal-error");let kr=eh.fromJSON(this.name,Ot);j(typeof ie=="string",e,"internal-error"),ri(d,e.name),ri(h,e.name),j(typeof pe=="boolean",e,"internal-error"),j(typeof ke=="boolean",e,"internal-error"),ri(f,e.name),ri(_,e.name),ri(w,e.name),ri(E,e.name),ri(A,e.name),ri($,e.name);let wi=new t({uid:ie,auth:e,email:h,emailVerified:pe,displayName:d,isAnonymous:ke,photoURL:_,phoneNumber:f,tenantId:w,stsTokenManager:kr,createdAt:A,lastLoginAt:$});return ve&&Array.isArray(ve)&&(wi.providerData=ve.map(qu=>Object.assign({},qu))),E&&(wi._redirectEventId=E),wi}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new eh;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Xd(s),s})}};var Hb=new Map;function Dr(t){ii(t instanceof Function,"Expected a class definition");let e=Hb.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hb.set(t,e),e)}var nB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),s_=nB;function zd(t,e,n){return`firebase:${t}:${e}:${n}`}var th=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=zd(this.userKey,i.apiKey,s),this.fullPersistenceKey=zd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ac._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Dr(s_),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Dr(s_),o=zd(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Ac._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function qb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dS(e))return"Blackberry";if(hS(e))return"Webos";if(T_(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(lS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function aS(t=tt()){return/firefox\//i.test(t)}function T_(t=tt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(t=tt()){return/crios\//i.test(t)}function uS(t=tt()){return/iemobile/i.test(t)}function lS(t=tt()){return/android/i.test(t)}function dS(t=tt()){return/blackberry/i.test(t)}function hS(t=tt()){return/webos/i.test(t)}function uh(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rB(t=tt()){var e;return uh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iB(){return _b()&&document.documentMode===10}function fS(t=tt()){return uh(t)||lS(t)||hS(t)||dS(t)||/windows phone/i.test(t)||uS(t)}function sB(){try{return!!(window&&window!==window.top)}catch{return!1}}function pS(t,e=[]){let n;switch(t){case"Browser":n=qb(tt());break;case"Worker":n=`${qb(tt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zn}/${r}`}var o_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oB(n){return p(this,arguments,function*(t,e={}){return Tr(t,"GET","/v2/passwordPolicy",si(t,e))})}var aB=6,a_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var c_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nh(this),this.idTokenSubscription=new nh(this),this.beforeStateQueue=new o_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield th.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Xd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Hj()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?$e(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Dr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield oB(this),n=new a_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield tB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Dr(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=yield th.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Uj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function us(t){return $e(t)}var nh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cb(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function cB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function mS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=os("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cB().appendChild(r)})}function gS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var uB="https://www.google.com/recaptcha/enterprise.js?render=",lB="recaptcha-enterprise",dB="NO_RECAPTCHA",u_=class{constructor(e){this.type=lB,this.auth=us(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){zj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new r_(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;$b(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(dB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&$b(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}mS(uB+a).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function Gb(t,e,n,r=!1){return p(this,null,function*(){let i=new u_(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function l_(t,e,n,r){return p(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Gb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Gb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function b_(t,e){let n=bo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Zi(s,e??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:e})}function hB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Dr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function S_(t,e,n){let r=us(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=yS(e),{host:o,port:a}=fB(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||pB()}function yS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fB(t){let e=yS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Wb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Wb(o)}}}function Wb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function pB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var xc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,n){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}};function mB(t,e){return p(this,null,function*(){return Tr(t,"POST","/v1/accounts:update",e)})}function gB(t,e){return p(this,null,function*(){return Tr(t,"POST","/v1/accounts:signUp",e)})}function yB(t,e){return p(this,null,function*(){return Nc(t,"POST","/v1/accounts:signInWithPassword",si(t,e))})}function _B(t,e){return p(this,null,function*(){return Nc(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))})}function vB(t,e){return p(this,null,function*(){return Nc(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))})}var Rc=class t extends xc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l_(e,n,"signInWithPassword",yB);case"emailLink":return _B(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l_(e,r,"signUpPassword",gB);case"emailLink":return vB(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Xy(t,e){return p(this,null,function*(){return Nc(t,"POST","/v1/accounts:signInWithIdp",si(t,e))})}function wB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EB(t){let e=Do(To(t)).link,n=e?Do(To(e)).deep_link_id:null,r=Do(To(t)).deep_link_id;return(r?Do(To(r)).link:null)||r||n||e||t}var rh=class t{constructor(e){var n,r,i,s,o,a;let c=Do(To(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=wB((i=c.mode)!==null&&i!==void 0?i:null);j(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=EB(e);try{return new t(n)}catch{return null}}};var lh=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Rc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=rh.parseLink(r);return j(i,"argument-error"),Rc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),ih=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var d_=class extends ih{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function IB(t,e){return p(this,null,function*(){return Nc(t,"POST","/v1/accounts:signUp",si(t,e))})}var Ro=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield Ac._fromIdTokenResponse(e,r,i),o=zb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=zb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function zb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var h_=class t extends jt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function _S(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?h_._fromErrorAndOperation(t,s,e,r):s})}function CB(t,e,n=!1){return p(this,null,function*(){let r=yield xo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ro._forOperation(t,"link",r)})}function vS(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield xo(t,_S(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=C_(s.idToken);j(o,r,"internal-error");let{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Ro._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}})}function wS(t,e,n=!1){return p(this,null,function*(){let r="signIn",i=yield _S(t,r,e),s=yield Ro._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function A_(t,e){return p(this,null,function*(){return wS(us(t),e)})}function x_(t,e){return p(this,null,function*(){return vS($e(t),e)})}function ES(t){return p(this,null,function*(){let e=us(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function dh(t,e,n){return p(this,null,function*(){let r=us(t),o=yield l_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ES(t),c}),a=yield Ro._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function hh(t,e,n){return A_($e(t),lh.credential(e,n)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ES(t),r}))}function fh(t,e){return DB($e(t),null,e)}function DB(t,e,n){return p(this,null,function*(){let{auth:r}=t,s={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);let o=yield xo(t,mB(r,s));yield t._updateTokensIfNecessary(o,!0)})}function R_(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function M_(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function ph(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function N_(t){return $e(t).signOut()}var sh="__sak";var oh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function TB(){let t=tt();return T_(t)||uh(t)}var bB=1e3,SB=10,AB=(()=>{class t extends oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TB()&&sB(),this.fallbackToPolling=fS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);iB()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,SB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},bB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Fr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Fr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Fr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),IS=AB;var xB=(()=>{class t extends oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),P_=xB;function RB(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var MB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>p(this,null,function*(){return l(r.origin,o)})),u=yield RB(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function CS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var f_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=CS("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Jn(){return window}function NB(t){Jn().location.href=t}function DS(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}function PB(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function OB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kB(){return DS()?self:null}var TS="firebaseLocalStorageDb",FB=1,ah="firebaseLocalStorage",bS="fbase_key",cs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function mh(t,e){return t.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function LB(){let t=indexedDB.deleteDatabase(TS);return new cs(t).toPromise()}function p_(){let t=indexedDB.open(TS,FB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ah,{keyPath:bS})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ah)?e(r):(r.close(),yield LB(),e(yield p_()))}))})}function Kb(t,e,n){return p(this,null,function*(){let r=mh(t,!0).put({[bS]:e,value:n});return new cs(r).toPromise()})}function VB(t,e){return p(this,null,function*(){let n=mh(t,!1).get(e),r=yield new cs(n).toPromise();return r===void 0?null:r.value})}function Qb(t,e){let n=mh(t,!0).delete(e);return new cs(n).toPromise()}var UB=800,jB=3,BB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield p_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>jB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return DS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=MB._getInstance(kB()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield PB(),!this.activeServiceWorker)return;this.sender=new f_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||OB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield p_();return yield Kb(n,sh,"1"),yield Qb(n,sh),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>Kb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>VB(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>Qb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=mh(s,!1).getAll();return new cs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),UB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),SS=BB;var IZ=gS("rcb"),CZ=new as(3e4,6e4);function $B(t,e){return e?Dr(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Mc=class extends xc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function HB(t){return wS(t.auth,new Mc(t),t.bypassAuthState)}function qB(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),vS(n,new Mc(t),t.bypassAuthState)}function GB(t){return p(this,null,function*(){let{auth:e,user:n}=t;return j(n,e,"internal-error"),CB(n,new Mc(t),t.bypassAuthState)})}var m_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HB;case"linkViaPopup":case"linkViaRedirect":return GB;case"reauthViaPopup":case"reauthViaRedirect":return qB;default:Xn(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var DZ=new as(2e3,1e4);var WB="pendingRedirect",Kd=new Map,g_=class t extends m_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=Kd.get(this.auth._key());if(!e){try{let r=(yield zB(this.resolver,this.auth))?yield Fr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Fr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Fr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function zB(t,e){return p(this,null,function*(){let n=YB(e),r=QB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function KB(t,e){Kd.set(t._key(),e)}function QB(t){return Dr(t._redirectPersistence)}function YB(t){return zd(WB,t.config.apiKey,t.name)}function ZB(t,e,n=!1){return p(this,null,function*(){let r=us(t),i=$B(r,e),o=yield new g_(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var JB=10*60*1e3,y_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(os(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JB&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}};function Yb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function XB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AS(t);default:return!1}}function e$(n){return p(this,arguments,function*(t,e={}){return Tr(t,"GET","/v1/projects",e)})}var t$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n$=/^https?/;function r$(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield e$(t);for(let n of e)try{if(i$(n))return}catch{}Xn(t,"unauthorized-domain")})}function i$(t){let e=t_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!n$.test(n))return!1;if(t$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var s$=new as(3e4,6e4);function Zb(){let t=Jn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o$(t){return new Promise((e,n)=>{var r,i,s;function o(){Zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zb(),n(os(t,"network-request-failed"))},timeout:s$.get()})}if(!((i=(r=Jn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Jn().gapi)===null||s===void 0)&&s.load)o();else{let a=gS("iframefcb");return Jn()[a]=()=>{gapi.load?o():n(os(t,"network-request-failed"))},mS(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Qd=null,e})}var Qd=null;function a$(t){return Qd=Qd||o$(t),Qd}var c$=new as(5e3,15e3),u$="__/auth/iframe",l$="emulator/auth/iframe",d$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f$(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?E_(e,l$):`https://${t.config.authDomain}/${u$}`,r={apiKey:e.apiKey,appName:t.name,v:Zn},i=h$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ji(r).slice(1)}`}function p$(t){return p(this,null,function*(){let e=yield a$(t),n=Jn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:f$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d$,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=os(t,"network-request-failed"),a=Jn().setTimeout(()=>{s(o)},c$.get());function c(){Jn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var m$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g$=500,y$=600,_$="_blank",v$="http://localhost",ch=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function w$(t,e,n,r=g$,i=y$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},m$),{width:r.toString(),height:i.toString(),top:s,left:o}),u=tt().toLowerCase();n&&(a=cS(u)?_$:n),aS(u)&&(e=e||v$,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[f,_])=>`${h}${f}=${_},`,"");if(rB(u)&&a!=="_self")return E$(e||"",a),new ch(null);let d=window.open(e||"",a,l);j(d,t,"popup-blocked");try{d.focus()}catch{}return new ch(d)}function E$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var I$="__/auth/handler",C$="emulator/auth/handler",D$=encodeURIComponent("fac");function Jb(t,e,n,r,i,s){return p(this,null,function*(){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zn,eventId:i};if(e instanceof ih){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ec(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof d_){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${D$}=${encodeURIComponent(c)}`:"";return`${T$(t)}?${Ji(a).slice(1)}${u}`})}function T$({config:t}){return t.emulator?E_(t,C$):`https://${t.authDomain}/${I$}`}var e_="webStorageSupport",__=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P_,this._completeRedirectFn=ZB,this._overrideRedirectResult=KB}_openPopup(e,n,r,i){return p(this,null,function*(){var s;ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Jb(e,n,r,t_(),i);return w$(e,o,CS())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield Jb(e,n,r,t_(),i);return NB(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ii(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield p$(e),r=new y_(e);return n.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(e_,{type:e_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[e_];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fS()||T_()||uh()}},xS=__;var Xb="@firebase/auth",eS="1.5.1";var v_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function S$(t){Yn(new Mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(t)},u=new c_(r,i,s,c);return hB(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yn(new Mt("auth-internal",e=>{let n=us(e.getProvider("auth").getImmediate());return(r=>new v_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(Xb,eS,b$(t)),Se(Xb,eS,"esm2017")}var A$=5*60,x$=Ny("authIdTokenMaxAge")||A$,tS=null,R$=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>x$)return;let i=n?.token;tS!==i&&(tS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function O_(t=ts()){let e=bo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=b_(t,{popupRedirectResolver:xS,persistence:[SS,IS,P_]}),r=Ny("authTokenSyncURL");if(r){let s=R$(r);M_(n,s,()=>s(n.currentUser)),R_(n,o=>s(o))}let i=xy("auth");return i&&S_(n,`http://${i}`),n}S$("Browser");var RS="auth",Ze=class{constructor(e){return e}},Pc=class{constructor(){return is(RS)}};var k_=new k("angularfire2.auth-instances");function yH(t,e){let n=Ao(RS,t,e);return n&&new Ze(n)}function _H(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ze(r)}}var vH={provide:Pc,deps:[[new Ke,k_]]},wH={provide:Ze,useFactory:yH,deps:[[new Ke,k_],Tn]},F_=(()=>{class t{constructor(){Se("angularfire",Ir.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=et({type:t});static \u0275inj=Xe({providers:[wH,vH]})}return t})();function MS(t,...e){return{ngModule:F_,providers:[{provide:k_,useFactory:_H(t),multi:!0,deps:[ye,Rt,ss,ni,[new Ke,rs],...e]}]}}var NS=Bt(O_,!0);var PS=Bt(x_,!0);var OS=Bt(N_,!0);var EH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sn={},b,iv=iv||{},B=EH||self;function xh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function zc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function IH(t){return Object.prototype.hasOwnProperty.call(t,L_)&&t[L_]||(t[L_]=++CH)}var L_="closure_uid_"+(1e9*Math.random()>>>0),CH=0;function DH(t,e,n){return t.call.apply(t.bind,arguments)}function TH(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function mt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?mt=DH:mt=TH,mt.apply(null,arguments)}function gh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function it(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function oi(){this.s=this.s,this.o=this.o}var bH=0;oi.prototype.s=!1;oi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),bH!=0)&&IH(this)};oi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var zS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function sv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function kS(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(xh(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var SH=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};B.addEventListener("test",n,e),B.removeEventListener("test",n,e)}catch{}return t}();function Uc(t){return/^[\s\xa0]*$/.test(t)}function Rh(){var t=B.navigator;return t&&(t=t.userAgent)?t:""}function er(t){return Rh().indexOf(t)!=-1}function ov(t){return ov[" "](t),t}ov[" "]=function(){};function AH(t,e){var n=g4;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var xH=er("Opera"),Oo=er("Trident")||er("MSIE"),KS=er("Edge"),$_=KS||Oo,QS=er("Gecko")&&!(Rh().toLowerCase().indexOf("webkit")!=-1&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),RH=Rh().toLowerCase().indexOf("webkit")!=-1&&!er("Edge");function YS(){var t=B.document;return t?t.documentMode:void 0}var H_;e:{if(yh="",_h=function(){var t=Rh();if(QS)return/rv:([^\);]+)(\)|;)/.exec(t);if(KS)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(RH)return/WebKit\/(\S+)/.exec(t);if(xH)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),_h&&(yh=_h?_h[1]:""),Oo&&(vh=YS(),vh!=null&&vh>parseFloat(yh))){H_=String(vh);break e}H_=yh}var yh,_h,vh,q_;B.document&&Oo?(V_=YS(),q_=V_||parseInt(H_,10)||void 0):q_=void 0;var V_,MH=q_;function jc(t,e){if(gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(QS){e:{try{ov(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:NH[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&jc.$.h.call(this)}}it(jc,gt);var NH={2:"touch",3:"pen",4:"mouse"};jc.prototype.h=function(){jc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),PH=0;function OH(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++PH,this.fa=this.ia=!1}function Mh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function av(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function kH(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function ZS(t){let e={};for(let n in t)e[n]=t[n];return e}var FS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JS(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<FS.length;s++)n=FS[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Nh(t){this.src=t,this.g={},this.h=0}Nh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=W_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new OH(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function G_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=zS(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Mh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function W_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var cv="closure_lm_"+(1e6*Math.random()|0),U_={};function XS(t,e,n,r,i){if(r&&r.once)return tA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)XS(t,e[s],n,r,i);return null}return n=dv(n),t&&t[Kc]?t.O(e,n,zc(r)?!!r.capture:!!r,i):eA(t,e,n,!1,r,i)}function eA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=zc(i)?!!i.capture:!!i,a=lv(t);if(a||(t[cv]=a=new Nh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=FH(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)SH||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function FH(){function t(n){return e.call(t.src,t.listener,n)}let e=LH;return t}function tA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)tA(t,e[s],n,r,i);return null}return n=dv(n),t&&t[Kc]?t.P(e,n,zc(r)?!!r.capture:!!r,i):eA(t,e,n,!0,r,i)}function nA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)nA(t,e[s],n,r,i);else r=zc(r)?!!r.capture:!!r,n=dv(n),t&&t[Kc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=W_(s,n,r,i),-1<n&&(Mh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=lv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=W_(e,n,r,i)),(n=-1<t?e[t]:null)&&uv(n))}function uv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Kc])G_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=lv(e))?(G_(n,t),n.h==0&&(n.src=null,e[cv]=null)):Mh(t)}}}function rA(t){return t in U_?U_[t]:U_[t]="on"+t}function LH(t,e){if(t.fa)t=!0;else{e=new jc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&uv(t),t=n.call(r,e)}return t}function lv(t){return t=t[cv],t instanceof Nh?t:null}var j_="__closure_events_fn_"+(1e9*Math.random()>>>0);function dv(t){return typeof t=="function"?t:(t[j_]||(t[j_]=function(e){return t.handleEvent(e)}),t[j_])}function rt(){oi.call(this),this.i=new Nh(this),this.S=this,this.J=null}it(rt,oi);rt.prototype[Kc]=!0;rt.prototype.removeEventListener=function(t,e,n,r){nA(this,t,e,n,r)};function dt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new gt(e,t);else if(e instanceof gt)e.target=e.target||t;else{var i=e;e=new gt(r,t),JS(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=wh(o,r,!0,e)&&i}if(o=e.g=t,i=wh(o,r,!0,e)&&i,i=wh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=wh(o,r,!1,e)&&i}rt.prototype.N=function(){if(rt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mh(n[r]);delete t.g[e],t.h--}}this.J=null};rt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};rt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&G_(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var hv=B.JSON.stringify,z_=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function VH(){var t=fv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var K_=class{constructor(){this.h=this.g=null}add(e,n){let r=iA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},iA=new z_(()=>new Q_,t=>t.reset()),Q_=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function UH(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function jH(t){B.setTimeout(()=>{throw t},0)}var Bc,$c=!1,fv=new K_,sA=()=>{let t=B.Promise.resolve(void 0);Bc=()=>{t.then(BH)}},BH=()=>{for(var t;t=VH();){try{t.h.call(t.g)}catch(n){jH(n)}var e=iA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$c=!1};function Ph(t,e){rt.call(this),this.h=t||1,this.g=e||B,this.j=mt(this.qb,this),this.l=Date.now()}it(Ph,rt);b=Ph.prototype;b.ga=!1;b.T=null;b.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),dt(this,"tick"),this.ga&&(pv(this),this.start()))}};b.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function pv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}b.N=function(){Ph.$.N.call(this),pv(this),delete this.g};function mv(t,e,n){if(typeof t=="function")n&&(t=mt(t,n));else if(t&&typeof t.handleEvent=="function")t=mt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:B.setTimeout(t,e||0)}function oA(t){t.g=mv(()=>{t.g=null,t.i&&(t.i=!1,oA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Y_=class extends oi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oA(this)}N(){super.N(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Hc(t){oi.call(this),this.h=t,this.g={}}it(Hc,oi);var LS=[];function aA(t,e,n,r){Array.isArray(n)||(n&&(LS[0]=n.toString()),n=LS);for(var i=0;i<n.length;i++){var s=XS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cA(t){av(t.g,function(e,n){this.g.hasOwnProperty(n)&&uv(e)},t),t.g={}}Hc.prototype.N=function(){Hc.$.N.call(this),cA(this)};Hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Oh(){this.g=!0}Oh.prototype.Ea=function(){this.g=!1};function $H(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function HH(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function No(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+GH(t,n)+(r?" "+r:"")})}function qH(t,e){t.info(function(){return"TIMEOUT: "+e})}Oh.prototype.info=function(){};function GH(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return hv(n)}catch{return e}}var ps={},VS=null;function kh(){return VS=VS||new rt}ps.Ta="serverreachability";function uA(t){gt.call(this,ps.Ta,t)}it(uA,gt);function qc(t){let e=kh();dt(e,new uA(e))}ps.STAT_EVENT="statevent";function lA(t,e){gt.call(this,ps.STAT_EVENT,t),this.stat=e}it(lA,gt);function Ct(t){let e=kh();dt(e,new lA(e,t))}ps.Ua="timingevent";function dA(t,e){gt.call(this,ps.Ua,t),this.size=e}it(dA,gt);function Qc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){t()},e)}var Fh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gv(){}gv.prototype.h=null;function US(t){return t.h||(t.h=t.i())}function fA(){}var Yc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yv(){gt.call(this,"d")}it(yv,gt);function _v(){gt.call(this,"c")}it(_v,gt);var Z_;function Lh(){}it(Lh,gv);Lh.prototype.g=function(){return new XMLHttpRequest};Lh.prototype.i=function(){return{}};Z_=new Lh;function Zc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Hc(this),this.P=WH,t=$_?125:void 0,this.V=new Ph(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pA}function pA(){this.i=null,this.g="",this.h=!1}var WH=45e3,mA={},J_={};b=Zc.prototype;b.setTimeout=function(t){this.P=t};function X_(t,e,n){t.L=1,t.A=Uh(Sr(e)),t.u=n,t.S=!0,gA(t,null)}function gA(t,e){t.G=Date.now(),Jc(t),t.B=Sr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),DA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new pA,t.g=GA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Y_(mt(t.Pa,t,t.g),t.O)),aA(t.U,t.g,"readystatechange",t.nb),e=t.I?ZS(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),qc(),$H(t.j,t.v,t.B,t.m,t.W,t.u)}b.nb=function(t){t=t.target;let e=this.M;e&&tr(t)==3?e.l():this.Pa(t)};b.Pa=function(t){try{if(t==this.g)e:{let l=tr(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||$_||this.g&&(this.h.h||this.g.ja()||HS(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?qc(3):qc(2)),Vh(this);var n=this.g.da();this.ca=n;t:if(yA(this)){var r=HS(this.g);t="";var i=r.length,s=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Vc(this);var o="";break t}this.h.i=new B.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,HH(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Uc(a)){var u=a;break t}}u=null}if(n=u)No(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ev(this,n);else{this.i=!1,this.s=3,Ct(12),ds(this),Vc(this);break e}}this.S?(_A(this,l,o),$_&&this.i&&l==3&&(aA(this.U,this.V,"tick",this.mb),this.V.start())):(No(this.j,this.m,o,null),ev(this,o)),l==4&&ds(this),this.i&&!this.J&&(l==4?BA(this.l,this):(this.i=!1,Jc(this)))}else f4(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),ds(this),Vc(this)}}}catch{}finally{}};function yA(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function _A(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=zH(t,n),i==J_){e==4&&(t.s=4,Ct(14),r=!1),No(t.j,t.m,null,"[Incomplete Response]");break}else if(i==mA){t.s=4,Ct(15),No(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else No(t.j,t.m,i,null),ev(t,i);yA(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ct(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dv(e),e.M=!0,Ct(11))):(No(t.j,t.m,n,"[Invalid Chunked Response]"),ds(t),Vc(t))}b.mb=function(){if(this.g){var t=tr(this.g),e=this.g.ja();this.o<e.length&&(Vh(this),_A(this,t,e),this.i&&t!=4&&Jc(this))}};function zH(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?J_:(n=Number(e.substring(n,r)),isNaN(n)?mA:(r+=1,r+n>e.length?J_:(e=e.slice(r,r+n),t.o=r+n,e)))}b.cancel=function(){this.J=!0,ds(this)};function Jc(t){t.Y=Date.now()+t.P,vA(t,t.P)}function vA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Qc(mt(t.lb,t),e)}function Vh(t){t.C&&(B.clearTimeout(t.C),t.C=null)}b.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(qH(this.j,this.B),this.L!=2&&(qc(),Ct(17)),ds(this),this.s=2,Vc(this)):vA(this,this.Y-t)};function Vc(t){t.l.H==0||t.J||BA(t.l,t)}function ds(t){Vh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,pv(t.V),cA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ev(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||tv(n.i,t))){if(!t.K&&tv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Th(n),$h(n);else break e;Cv(n),Ct(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Qc(mt(n.ib,n),6e3));if(1>=SA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else hs(n,11)}else if((t.K||n.g==t)&&Th(n),!Uc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(vv(s,s.h),s.h=null))}if(r.F){let w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,De(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=qA(r,r.J?r.pa:null,r.Y),o.K){AA(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Vh(a),Jc(a)),r.g=o}else UA(r);0<n.j.length&&Hh(n)}else u[0]!="stop"&&u[0]!="close"||hs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?hs(n,7):Iv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}qc(4)}catch{}}function KH(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(xh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function QH(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(xh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function wA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(xh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=QH(t),r=KH(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var EA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YH(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function fs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof fs){this.h=t.h,Ch(this,t.j),this.s=t.s,this.g=t.g,Dh(this,t.m),this.l=t.l;var e=t.i,n=new Gc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),jS(this,n),this.o=t.o}else t&&(e=String(t).match(EA))?(this.h=!1,Ch(this,e[1]||"",!0),this.s=Fc(e[2]||""),this.g=Fc(e[3]||"",!0),Dh(this,e[4]),this.l=Fc(e[5]||"",!0),jS(this,e[6]||"",!0),this.o=Fc(e[7]||"")):(this.h=!1,this.i=new Gc(null,this.h))}fs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lc(e,BS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lc(e,BS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Lc(n,n.charAt(0)=="/"?XH:JH,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lc(n,t4)),t.join("")};function Sr(t){return new fs(t)}function Ch(t,e,n){t.j=n?Fc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Dh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function jS(t,e,n){e instanceof Gc?(t.i=e,n4(t.i,t.h)):(n||(e=Lc(e,e4)),t.i=new Gc(e,t.h))}function De(t,e,n){t.i.set(e,n)}function Uh(t){return De(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,ZH),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ZH(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var BS=/[#\/\?@]/g,JH=/[#\?:]/g,XH=/[#\?]/g,e4=/[#\?@]/g,t4=/#/g;function Gc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ai(t){t.g||(t.g=new Map,t.h=0,t.i&&YH(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}b=Gc.prototype;b.add=function(t,e){ai(this),this.i=null,t=ko(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function IA(t,e){ai(t),e=ko(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function CA(t,e){return ai(t),e=ko(t,e),t.g.has(e)}b.forEach=function(t,e){ai(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};b.ta=function(){ai(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};b.Z=function(t){ai(this);let e=[];if(typeof t=="string")CA(this,t)&&(e=e.concat(this.g.get(ko(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};b.set=function(t,e){return ai(this),this.i=null,t=ko(this,t),CA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};b.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function DA(t,e,n){IA(t,e),0<n.length&&(t.i=null,t.g.set(ko(t,e),sv(n)),t.h+=n.length)}b.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ko(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function n4(t,e){e&&!t.j&&(ai(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(IA(this,r),DA(this,i,n))},t)),t.j=e}var r4=class{constructor(t,e){this.g=t,this.map=e}};function TA(t){this.l=t||i4,B.PerformanceNavigationTiming?(t=B.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(B.g&&B.g.Ka&&B.g.Ka()&&B.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var i4=10;function bA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SA(t){return t.h?1:t.g?t.g.size:0}function tv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vv(t,e){t.g?t.g.add(e):t.h=e}function AA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}TA.prototype.cancel=function(){if(this.i=xA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function xA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return sv(t.i)}var s4=class{stringify(t){return B.JSON.stringify(t,void 0)}parse(t){return B.JSON.parse(t,void 0)}};function o4(){this.g=new s4}function a4(t,e,n){let r=n||"";try{wA(t,function(i,s){let o=i;zc(i)&&(o=hv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function c4(t,e){let n=new Oh;if(B.Image){let r=new Image;r.onload=gh(Eh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gh(Eh,n,r,"TestLoadImage: error",!1,e),r.onabort=gh(Eh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gh(Eh,n,r,"TestLoadImage: timeout",!1,e),B.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Eh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xc(t){this.l=t.ec||null,this.j=t.ob||!1}it(Xc,gv);Xc.prototype.g=function(){return new jh(this.l,this.j)};Xc.prototype.i=function(t){return function(){return t}}({});function jh(t,e){rt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}it(jh,rt);var wv=0;b=jh.prototype;b.open=function(t,e){if(this.readyState!=wv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wc(this)};b.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||B).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};b.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eu(this)),this.readyState=wv};b.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function RA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}b.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?eu(this):Wc(this),this.readyState==3&&RA(this)}};b.Za=function(t){this.g&&(this.response=this.responseText=t,eu(this))};b.Ya=function(t){this.g&&(this.response=t,eu(this))};b.ka=function(){this.g&&eu(this)};function eu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wc(t)}b.setRequestHeader=function(t,e){this.v.append(t,e)};b.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};b.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Wc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(jh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var u4=B.JSON.parse;function Me(t){rt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=MA,this.L=this.M=!1}it(Me,rt);var MA="",l4=/^https?$/i,d4=["POST","PUT"];b=Me.prototype;b.Oa=function(t){this.M=t};b.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Z_.g(),this.C=this.u?US(this.u):US(Z_),this.g.onreadystatechange=mt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){$S(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=B.FormData&&t instanceof B.FormData,!(0<=zS(d4,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OA(this),0<this.B&&((this.L=h4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mt(this.ua,this)):this.A=mv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){$S(this,s)}};function h4(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}b.ua=function(){typeof iv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dt(this,"timeout"),this.abort(8))};function $S(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,NA(t),Bh(t)}function NA(t){t.F||(t.F=!0,dt(t,"complete"),dt(t,"error"))}b.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dt(this,"complete"),dt(this,"abort"),Bh(this))};b.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bh(this,!0)),Me.$.N.call(this)};b.La=function(){this.s||(this.G||this.v||this.l?PA(this):this.kb())};b.kb=function(){PA(this)};function PA(t){if(t.h&&typeof iv<"u"&&(!t.C[1]||tr(t)!=4||t.da()!=2)){if(t.v&&tr(t)==4)mv(t.La,0,t);else if(dt(t,"readystatechange"),tr(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(EA)[1]||null;!i&&B.self&&B.self.location&&(i=B.self.location.protocol.slice(0,-1)),r=!l4.test(i?i.toLowerCase():"")}n=r}if(n)dt(t,"complete"),dt(t,"success");else{t.m=6;try{var s=2<tr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",NA(t)}}finally{Bh(t)}}}}function Bh(t,e){if(t.g){OA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||dt(t,"ready");try{n.onreadystatechange=r}catch{}}}function OA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(B.clearTimeout(t.A),t.A=null)}b.isActive=function(){return!!this.g};function tr(t){return t.g?t.g.readyState:0}b.da=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}};b.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};b.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),u4(e)}};function HS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case MA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function f4(t){let e={};t=(t.g&&2<=tr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Uc(t[r]))continue;var n=UH(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}kH(e,function(r){return r.join(", ")})}b.Ia=function(){return this.m};b.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function kA(t){let e="";return av(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ev(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):De(t,e,n))}function Oc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function FA(t){this.Ga=0,this.j=[],this.l=new Oh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oc("baseRetryDelayMs",5e3,t),this.hb=Oc("retryDelaySeedMs",1e4,t),this.eb=Oc("forwardChannelMaxRetries",2,t),this.xa=Oc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new TA(t&&t.concurrentRequestLimit),this.Ja=new o4,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}b=FA.prototype;b.ra=8;b.H=1;function Iv(t){if(LA(t),t.H==3){var e=t.W++,n=Sr(t.I);if(De(n,"SID",t.K),De(n,"RID",e),De(n,"TYPE","terminate"),tu(t,n),e=new Zc(t,t.l,e),e.L=2,e.A=Uh(Sr(n)),n=!1,B.navigator&&B.navigator.sendBeacon)try{n=B.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&B.Image&&(new Image().src=e.A,n=!0),n||(e.g=GA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Jc(e)}HA(t)}function $h(t){t.g&&(Dv(t),t.g.cancel(),t.g=null)}function LA(t){$h(t),t.u&&(B.clearTimeout(t.u),t.u=null),Th(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&B.clearTimeout(t.m),t.m=null)}function Hh(t){if(!bA(t.i)&&!t.m){t.m=!0;var e=t.Na;Bc||sA(),$c||(Bc(),$c=!0),fv.add(e,t),t.C=0}}function p4(t,e){return SA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Qc(mt(t.Na,t,e),$A(t,t.C)),t.C++,!0)}b.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Zc(this,this.l,t),s=this.s;if(this.U&&(s?(s=ZS(s),JS(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=VA(this,i,e),n=Sr(this.I),De(n,"RID",t),De(n,"CVER",22),this.F&&De(n,"X-HTTP-Session-Id",this.F),tu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(kA(s)))+"&"+e:this.o&&Ev(n,this.o,s)),vv(this.i,i),this.bb&&De(n,"TYPE","init"),this.P?(De(n,"$req",e),De(n,"SID","null"),i.aa=!0,X_(i,n,null)):X_(i,n,e),this.H=2}}else this.H==3&&(t?qS(this,t):this.j.length==0||bA(this.i)||qS(this))};function qS(t,e){var n;e?n=e.m:n=t.W++;let r=Sr(t.I);De(r,"SID",t.K),De(r,"RID",n),De(r,"AID",t.V),tu(t,r),t.o&&t.s&&Ev(r,t.o,t.s),n=new Zc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=VA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vv(t.i,n),X_(n,r,e)}function tu(t,e){t.na&&av(t.na,function(n,r){De(e,r,n)}),t.h&&wA({},function(n,r){De(e,r,n)})}function VA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?mt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{a4(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function UA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bc||sA(),$c||(Bc(),$c=!0),fv.add(e,t),t.A=0}}function Cv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Qc(mt(t.Ma,t),$A(t,t.A)),t.A++,!0)}b.Ma=function(){if(this.u=null,jA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Qc(mt(this.jb,this),t)}};b.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ct(10),$h(this),jA(this))};function Dv(t){t.B!=null&&(B.clearTimeout(t.B),t.B=null)}function jA(t){t.g=new Zc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Sr(t.wa);De(e,"RID","rpc"),De(e,"SID",t.K),De(e,"AID",t.V),De(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&De(e,"TO",t.qa),De(e,"TYPE","xmlhttp"),tu(t,e),t.o&&t.s&&Ev(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Uh(Sr(e)),n.u=null,n.S=!0,gA(n,t)}b.ib=function(){this.v!=null&&(this.v=null,$h(this),Cv(this),Ct(19))};function Th(t){t.v!=null&&(B.clearTimeout(t.v),t.v=null)}function BA(t,e){var n=null;if(t.g==e){Th(t),Dv(t),t.g=null;var r=2}else if(tv(t.i,e))n=e.F,AA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=kh(),dt(r,new dA(r,n)),Hh(t)}else UA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&p4(t,e)||r==2&&Cv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:hs(t,5);break;case 4:hs(t,10);break;case 3:hs(t,6);break;default:hs(t,2)}}}function $A(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function hs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=mt(t.pb,t);n||(n=new fs("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||Ch(n,"https"),Uh(n)),c4(n.toString(),r)}else Ct(2);t.H=0,t.h&&t.h.za(e),HA(t),LA(t)}b.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ct(2)):(this.l.info("Failed to ping google.com"),Ct(1))};function HA(t){if(t.H=0,t.ma=[],t.h){let e=xA(t.i);(e.length!=0||t.j.length!=0)&&(kS(t.ma,e),kS(t.ma,t.j),t.i.i.length=0,sv(t.j),t.j.length=0),t.h.ya()}}function qA(t,e,n){var r=n instanceof fs?Sr(n):new fs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Dh(r,r.m);else{var i=B.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new fs(null);r&&Ch(s,r),e&&(s.g=e),i&&Dh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&De(r,n,e),De(r,"VER",t.ra),tu(t,r),r}function GA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Me(new Xc({ob:n})):new Me(t.va),e.Oa(t.J),e}b.isActive=function(){return!!this.h&&this.h.isActive(this)};function WA(){}b=WA.prototype;b.Ba=function(){};b.Aa=function(){};b.za=function(){};b.ya=function(){};b.isActive=function(){return!0};b.Va=function(){};function bh(){if(Oo&&!(10<=Number(MH)))throw Error("Environmental error: no available transport.")}bh.prototype.g=function(t,e){return new $t(t,e)};function $t(t,e){rt.call(this),this.g=new FA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Uc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Uc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fo(this)}it($t,rt);$t.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ct(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=qA(t,null,t.Y),Hh(t)};$t.prototype.close=function(){Iv(this.g)};$t.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=hv(t),t=n);e.j.push(new r4(e.fb++,t)),e.H==3&&Hh(e)};$t.prototype.N=function(){this.g.h=null,delete this.j,Iv(this.g),delete this.g,$t.$.N.call(this)};function zA(t){yv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}it(zA,yv);function KA(){_v.call(this),this.status=1}it(KA,_v);function Fo(t){this.g=t}it(Fo,WA);Fo.prototype.Ba=function(){dt(this.g,"a")};Fo.prototype.Aa=function(t){dt(this.g,new zA(t))};Fo.prototype.za=function(t){dt(this.g,new KA)};Fo.prototype.ya=function(){dt(this.g,"b")};function m4(){this.blockSize=-1}function bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}it(bn,m4);bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function B_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)B_(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){B_(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){B_(this,r),i=0;break}}this.h=i,this.i+=e};bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function _e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var g4={};function Tv(t){return-128<=t&&128>t?AH(t,function(e){return new _e([e|0],0>e?-1:0)}):new _e([t|0],0>t?-1:0)}function nr(t){if(isNaN(t)||!isFinite(t))return Po;if(0>t)return lt(nr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=nv;return new _e(e,0)}function QA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return lt(QA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nr(Math.pow(e,8)),r=Po,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=nr(Math.pow(e,s)),r=r.R(s).add(nr(o))):(r=r.R(n),r=r.add(nr(o)))}return r}var nv=4294967296,Po=Tv(0),rv=Tv(1),GS=Tv(16777216);b=_e.prototype;b.ea=function(){if(nn(this))return-lt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:nv+r)*e,e*=nv}return t};b.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(br(this))return"0";if(nn(this))return"-"+lt(this).toString(t);for(var e=nr(Math.pow(t,6)),n=this,r="";;){var i=Ah(n,e).g;n=Sh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,br(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};b.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function br(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function nn(t){return t.h==-1}b.X=function(t){return t=Sh(this,t),nn(t)?-1:br(t)?0:1};function lt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new _e(n,~t.h).add(rv)}b.abs=function(){return nn(this)?lt(this):this};b.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new _e(n,n[n.length-1]&-2147483648?-1:0)};function Sh(t,e){return t.add(lt(e))}b.R=function(t){if(br(this)||br(t))return Po;if(nn(this))return nn(t)?lt(this).R(lt(t)):lt(lt(this).R(t));if(nn(t))return lt(this.R(lt(t)));if(0>this.X(GS)&&0>t.X(GS))return nr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Ih(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Ih(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ih(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ih(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new _e(n,0)};function Ih(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function kc(t,e){this.g=t,this.h=e}function Ah(t,e){if(br(e))throw Error("division by zero");if(br(t))return new kc(Po,Po);if(nn(t))return e=Ah(lt(t),e),new kc(lt(e.g),lt(e.h));if(nn(e))return e=Ah(t,lt(e)),new kc(lt(e.g),e.h);if(30<t.g.length){if(nn(t)||nn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=rv,r=e;0>=r.X(t);)n=WS(n),r=WS(r);var i=Mo(n,1),s=Mo(r,1);for(r=Mo(r,2),n=Mo(n,2);!br(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Mo(r,1),n=Mo(n,1)}return e=Sh(t,i.R(e)),new kc(i,e)}for(i=Po;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=nr(n),o=s.R(e);nn(o)||0<o.X(t);)n-=r,s=nr(n),o=s.R(e);br(s)&&(s=rv),i=i.add(s),t=Sh(t,o)}return new kc(i,t)}b.gb=function(t){return Ah(this,t).h};b.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new _e(n,this.h&t.h)};b.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new _e(n,this.h|t.h)};b.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new _e(n,this.h^t.h)};function WS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new _e(n,t.h)}function Mo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new _e(i,t.h)}bh.prototype.createWebChannel=bh.prototype.g;$t.prototype.send=$t.prototype.u;$t.prototype.open=$t.prototype.m;$t.prototype.close=$t.prototype.close;Fh.NO_ERROR=0;Fh.TIMEOUT=8;Fh.HTTP_ERROR=6;hA.COMPLETE="complete";fA.EventType=Yc;Yc.OPEN="a";Yc.CLOSE="b";Yc.ERROR="c";Yc.MESSAGE="d";rt.prototype.listen=rt.prototype.O;Me.prototype.listenOnce=Me.prototype.P;Me.prototype.getLastError=Me.prototype.Sa;Me.prototype.getLastErrorCode=Me.prototype.Ia;Me.prototype.getStatus=Me.prototype.da;Me.prototype.getResponseJson=Me.prototype.Wa;Me.prototype.getResponseText=Me.prototype.ja;Me.prototype.send=Me.prototype.ha;Me.prototype.setWithCredentials=Me.prototype.Oa;bn.prototype.digest=bn.prototype.l;bn.prototype.reset=bn.prototype.reset;bn.prototype.update=bn.prototype.j;_e.prototype.add=_e.prototype.add;_e.prototype.multiply=_e.prototype.R;_e.prototype.modulo=_e.prototype.gb;_e.prototype.compare=_e.prototype.X;_e.prototype.toNumber=_e.prototype.ea;_e.prototype.toString=_e.prototype.toString;_e.prototype.getBits=_e.prototype.D;_e.fromNumber=nr;_e.fromString=QA;var YA=Sn.createWebChannelTransport=function(){return new bh},ZA=Sn.getStatEventTarget=function(){return kh()},qh=Sn.ErrorCode=Fh,JA=Sn.EventType=hA,XA=Sn.Event=ps,bv=Sn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cJ=Sn.FetchXmlHttpFactory=Xc,nu=Sn.WebChannel=fA,ex=Sn.XhrIo=Me,tx=Sn.Md5=bn,ms=Sn.Integer=_e;var nx="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var na="10.7.0";var vs=new Kn("@firebase/firestore");function ru(){return vs.logLevel}function x(t,...e){if(vs.logLevel<=X.DEBUG){let n=e.map(sE);vs.debug(`Firestore (${na}): ${t}`,...n)}}function xr(t,...e){if(vs.logLevel<=X.ERROR){let n=e.map(sE);vs.error(`Firestore (${na}): ${t}`,...n)}}function Ho(t,...e){if(vs.logLevel<=X.WARN){let n=e.map(sE);vs.warn(`Firestore (${na}): ${t}`,...n)}}function sE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function V(t="Unexpected state"){let e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw xr(e),new Error(e)}function Ce(t,e){t||V()}function W(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Qh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}},Nv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Pv=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Qh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new st(e)}},Ov=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},kv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ov(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Lv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function y4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=y4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function fe(t,e){return t<e?-1:t>e?1:0}function qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ht=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ht(0,0))}static max(){return new t(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&V(),r===void 0?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Pe=class t extends Zh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},_4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ht=class t extends Zh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return _4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new M(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new M(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new M(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var O=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var Vv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Vv.UNKNOWN_ID=-1;function v4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new ws(i,O.empty(),e)}function w4(t){return new ws(t.readTime,t.key,-1)}var ws=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(G.min(),O.empty(),-1)}static max(){return new t(G.max(),O.empty(),-1)}};function E4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=O.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}var I4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wu(t){return p(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==I4)throw t;x("LocalStore","Unexpectedly lost primary lease")})}var I=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Eu(t){return t.name==="IndexedDbTransactionError"}var xx=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Af(t){return t==null}function uu(t){return t===0&&1/t==-1/0}function C4(t){return typeof t=="number"&&Number.isInteger(t)&&!uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var D4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vJ=[...D4,"documentOverlays"],T4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],b4=T4,wJ=[...b4,"indexConfiguration","indexState","indexEntries"];function rx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jo(this.root,e,this.comparator,!0)}},jo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();let e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}};sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(e,n,r,i,s){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _t=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jh(this.data.getIterator())}getIteratorFrom(e){return new Jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ir=class t{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new t([])}unionWith(e){let n=new _t(Ht.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var S4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(t){if(Ce(!!t),typeof t=="string"){let e=0,n=S4.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}function oE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aE(t){let e=t.mapValue.fields.__previous_value__;return oE(e)?aE(e):e}function lu(t){let e=ui(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}var jv=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ef=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Gh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oE(t)?4:Mx(t)?9007199254740991:10:V()}function cr(t,e){if(t===e)return!0;let n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lu(t).isEqual(lu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ui(i.timestampValue),a=ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return li(i.bytesValue).isEqual(li(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?uu(o)===uu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(rx(o)!==rx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!cr(o[c],a[c])))return!1;return!0}(t,e);default:return V()}}function du(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function Go(t,e){if(t===e)return 0;let n=Es(t),r=Es(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ne(s.integerValue||s.doubleValue),c=Ne(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ix(t.timestampValue,e.timestampValue);case 4:return ix(lu(t),lu(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=li(s),c=li(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=fe(a[u],c[u]);if(l!==0)return l}return fe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=fe(Ne(s.latitude),Ne(o.latitude));return a!==0?a:fe(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Go(a[u],c[u]);if(l)return l}return fe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Gh.mapValue&&o===Gh.mapValue)return 0;if(s===Gh.mapValue)return 1;if(o===Gh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=fe(c[d],l[d]);if(h!==0)return h;let f=Go(a[c[d]],u[l[d]]);if(f!==0)return f}return fe(c.length,l.length)}(t.mapValue,e.mapValue);default:throw V()}}function ix(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);let n=ui(t),r=ui(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function Wo(t){return Bv(t)}function Bv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return O.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Bv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Bv(n.fields[o])}`;return i+"}"}(t.mapValue):V()}function $v(t){return!!t&&"integerValue"in t}function cE(t){return!!t&&"arrayValue"in t}function sx(t){return!!t&&"nullValue"in t}function ox(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ra(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=su(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Mx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var An=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=su(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ra(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(su(this.value))}};function Nx(t){let e=[];return ra(t.fields,(n,r)=>{let i=new Ht([n]);if(zh(r)){let s=Nx(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ir(e)}var Rn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,G.min(),G.min(),G.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,G.min(),G.min(),An.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,G.min(),G.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zo=class{constructor(e,n){this.position=e,this.inclusive=n}};function ax(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=Go(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}var Ko=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function A4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var tf=class{},Je=class t extends tf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qv(e,n,r):n==="array-contains"?new zv(e,r):n==="in"?new Kv(e,r):n==="not-in"?new Qv(e,r):n==="array-contains-any"?new Yv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Gv(e,r):new Wv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Go(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ur=class t extends tf{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Px(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Px(t){return t.op==="and"}function Ox(t){return x4(t)&&Px(t)}function x4(t){for(let e of t.filters)if(e instanceof ur)return!1;return!0}function Hv(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Wo(t.value);if(Ox(t))return t.filters.map(e=>Hv(e)).join(",");{let e=t.filters.map(n=>Hv(n)).join(",");return`${t.op}(${e})`}}function kx(t,e){return t instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kx(o,i.filters[a]),!0):!1}(t,e):void V()}function Fx(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`}(t):t instanceof ur?function(n){return n.op.toString()+" {"+n.getFilters().map(Fx).join(" ,")+"}"}(t):"Filter"}var qv=class extends Je{constructor(e,n,r){super(e,n,r),this.key=O.fromName(r.referenceValue)}matches(e){let n=O.comparator(e.key,this.key);return this.matchesComparison(n)}},Gv=class extends Je{constructor(e,n){super(e,"in",n),this.keys=Lx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Wv=class extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Lx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Lx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}var zv=class extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return cE(n)&&du(n.arrayValue,this.value)}},Kv=class extends Je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}},Qv=class extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!du(this.value.arrayValue,n)}},Yv=class extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!cE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>du(this.value.arrayValue,r))}};var Zv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function ux(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zv(t,e,n,r,i,s,o)}function uE(t){let e=W(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wo(r)).join(",")),e.ce=n}return e.ce}function lE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cx(t.startAt,e.startAt)&&cx(t.endAt,e.endAt)}function Jv(t){return O.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Qo=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function R4(t,e,n,r,i,s,o,a){return new Qo(t,e,n,r,i,s,o,a)}function dE(t){return new Qo(t)}function lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M4(t){return t.collectionGroup!==null}function ou(t){let e=W(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _t(Ht.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ko(s,r))}),n.has(Ht.keyField().canonicalString())||e.le.push(new Ko(Ht.keyField(),r))}return e.le}function or(t){let e=W(t);return e.he||(e.he=N4(e,ou(t))),e.he}function N4(t,e){if(t.limitType==="F")return ux(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ko(i.field,s)});let n=t.endAt?new zo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zo(t.startAt.position,t.startAt.inclusive):null;return ux(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xv(t,e,n){return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xf(t,e){return lE(or(t),or(e))&&t.limitType===e.limitType}function Vx(t){return`${uE(or(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Fx(i)).join(", ")}]`),Af(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wo(i)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function Rf(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):O.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ou(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=ax(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ou(r),i)||r.endAt&&!function(o,a,c){let u=ax(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ou(r),i))}(t,e)}function P4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ux(t){return(e,n)=>{let r=!1;for(let i of ou(t)){let s=O4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function O4(t,e,n){let r=t.field.isKeyField()?O.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Go(c,u):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}var di=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Rx(this.inner)}size(){return this.innerSize}};var k4=new Oe(O.comparator);function Rr(){return k4}var jx=new Oe(O.comparator);function iu(...t){let e=jx;for(let n of t)e=e.insert(n.key,n);return e}function Bx(t){let e=jx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return au()}function $x(){return au()}function au(){return new di(t=>t.toString(),(t,e)=>t.isEqual(e))}var F4=new Oe(O.comparator),L4=new _t(O.comparator);function ne(...t){let e=L4;for(let n of t)e=e.add(n);return e}var V4=new _t(fe);function U4(){return V4}function Hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function qx(t){return{integerValue:""+t}}function j4(t,e){return C4(e)?qx(e):Hx(t,e)}var Yo=class{constructor(){this._=void 0}};function B4(t,e,n){return t instanceof Zo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oE(s)&&(s=aE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Is?Wx(t,e):t instanceof Cs?zx(t,e):function(i,s){let o=Gx(i,s),a=dx(o)+dx(i.Ie);return $v(o)&&$v(i.Ie)?qx(a):Hx(i.serializer,a)}(t,e)}function $4(t,e,n){return t instanceof Is?Wx(t,e):t instanceof Cs?zx(t,e):n}function Gx(t,e){return t instanceof Jo?function(r){return $v(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Zo=class extends Yo{},Is=class extends Yo{constructor(e){super(),this.elements=e}};function Wx(t,e){let n=Kx(e);for(let r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Cs=class extends Yo{constructor(e){super(),this.elements=e}};function zx(t,e){let n=Kx(e);for(let r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}var Jo=class extends Yo{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function dx(t){return Ne(t.integerValue||t.doubleValue)}function Kx(t){return cE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function H4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Is&&i instanceof Is||r instanceof Cs&&i instanceof Cs?qo(r.elements,i.elements,cr):r instanceof Jo&&i instanceof Jo?cr(r.Ie,i.Ie):r instanceof Zo&&i instanceof Zo}(t.transform,e.transform)}var ew=class{constructor(e,n){this.version=e,this.transformResults=n}},Ar=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Xo=class{};function Qx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hu(t.key,Ar.none()):new Ds(t.key,t.data,Ar.none());{let n=t.data,r=An.empty(),i=new _t(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mr(t.key,r,new ir(i.toArray()),Ar.none())}}function q4(t,e,n){t instanceof Ds?function(i,s,o){let a=i.value.clone(),c=fx(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(i,s,o){if(!Kh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=fx(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Yx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cu(t,e,n,r){return t instanceof Ds?function(s,o,a,c){if(!Kh(s.precondition,o))return a;let u=s.value.clone(),l=px(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(s,o,a,c){if(!Kh(s.precondition,o))return a;let u=px(s.fieldTransforms,c,o),l=o.data;return l.setAll(Yx(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Kh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function G4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Gx(r.transform,i||null);s!=null&&(n===null&&(n=An.empty()),n.set(r.field,s))}return n||null}function hx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qo(r,i,(s,o)=>H4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ds=class extends Xo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mr=class extends Xo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Yx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function fx(t,e,n){let r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$4(o,a,n[i]))}return r}function px(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,B4(s,o,e))}return r}var hu=class extends Xo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tw=class extends Xo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&q4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$x();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Qx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(n,r)=>hx(n,r))&&qo(this.baseMutations,e.baseMutations,(n,r)=>hx(n,r))}},rw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return F4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var iw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var He,ce;function W4(t){switch(t){default:return V();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function Zx(t){if(t===void 0)return xr("GRPC error has no .code"),v.UNKNOWN;switch(t){case He.OK:return v.OK;case He.CANCELLED:return v.CANCELLED;case He.UNKNOWN:return v.UNKNOWN;case He.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case He.INTERNAL:return v.INTERNAL;case He.UNAVAILABLE:return v.UNAVAILABLE;case He.UNAUTHENTICATED:return v.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case He.NOT_FOUND:return v.NOT_FOUND;case He.ALREADY_EXISTS:return v.ALREADY_EXISTS;case He.PERMISSION_DENIED:return v.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case He.ABORTED:return v.ABORTED;case He.OUT_OF_RANGE:return v.OUT_OF_RANGE;case He.UNIMPLEMENTED:return v.UNIMPLEMENTED;case He.DATA_LOSS:return v.DATA_LOSS;default:return V()}}(ce=He||(He={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var mx=null;function z4(){return new TextEncoder}var K4=new ms([4294967295,4294967295],0);function gx(t){let e=z4().encode(t),n=new tx;return n.update(e),new Uint8Array(n.digest())}function yx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ms([n,r],0),new ms([i,s],0)]}var ow=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ys(`Invalid padding: ${n}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ys(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ms.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ms.fromNumber(r)));return i.compare(K4)===1&&(i=new ms([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=gx(e),[r,i]=yx(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=gx(e),[r,i]=yx(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(G.min(),i,new Oe(fe),Rr(),ne())}},fu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ne(),ne(),ne())}};var Bo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},rf=class{constructor(e,n){this.targetId=e,this.fe=n}},sf=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},of=class{constructor(){this.ge=0,this.pe=vx(),this.ye=Dt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ne(),n=ne(),r=ne();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:V()}}),new fu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=vx()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ce(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},aw=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Rr(),this.Qe=_x(),this.Ke=new Oe(fe)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Jv(s))if(r===0){let o=new O(s.path);this.We(n,o,Rn.newNoDocument(o,G.min()))}else Ce(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}mx?.tt(function(l,d,h,f,_){var w,E,A,$,ie,pe;let ke={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ve=d.unchangedNames;return ve&&(ke.bloomFilter={applied:_===0,hashCount:(w=ve?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:($=(A=(E=ve?.bits)===null||E===void 0?void 0:E.bitmap)===null||A===void 0?void 0:A.length)!==null&&$!==void 0?$:0,padding:(pe=(ie=ve?.bits)===null||ie===void 0?void 0:ie.padding)!==null&&pe!==void 0?pe:0,mightContain:Ot=>{var kr;return(kr=f?.mightContain(Ot))!==null&&kr!==void 0&&kr}}),ke}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=li(r).toUint8Array()}catch(c){if(c instanceof Xh)return Ho("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ow(o,i,s)}catch(c){return Ho(c instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Jv(a.target)){let c=new O(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Rn.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ne();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new nf(e,n,this.Ke,this.qe,r);return this.qe=Rr(),this.Qe=_x(),this.Ke=new Oe(fe),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new of,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new _t(fe),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||x("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new of),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function _x(){return new Oe(O.comparator)}function vx(){return new Oe(O.comparator)}var Q4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Y4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Z4=(()=>({and:"AND",or:"OR"}))(),cw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function uw(t,e){return t.useProto3Json||Af(e)?e:{value:e}}function af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function J4(t,e){return af(t,e.toTimestamp())}function ar(t){return Ce(!!t),G.fromTimestamp(function(n){let r=ui(n);return new ht(r.seconds,r.nanos)}(t))}function hE(t,e){return function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function Xx(t){let e=Pe.fromString(t);return Ce(rR(e)),e}function lw(t,e){return hE(t.databaseId,e.path)}function Sv(t,e){let n=Xx(e);if(n.get(1)!==t.databaseId.projectId)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new O(eR(n))}function dw(t,e){return hE(t.databaseId,e)}function X4(t){let e=Xx(t);return e.length===4?Pe.emptyPath():eR(e)}function hw(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eR(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wx(t,e,n){return{name:lw(t,e),fields:n.value.mapValue.fields}}function eq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(Ce(l===void 0||typeof l=="string"),Dt.fromBase64String(l||"")):(Ce(l===void 0||l instanceof Uint8Array),Dt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?v.UNKNOWN:Zx(u.code);return new M(l,u.message||"")}(o);n=new sf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Sv(t,r.document.name),s=ar(r.document.updateTime),o=r.document.createTime?ar(r.document.createTime):G.min(),a=new An({mapValue:{fields:r.document.fields}}),c=Rn.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Bo(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Sv(t,r.document),s=r.readTime?ar(r.readTime):G.min(),o=Rn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Bo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Sv(t,r.document),s=r.removedTargetIds||[];n=new Bo([],s,i,null)}else{if(!("filter"in e))return V();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new sw(i,s),a=r.targetId;n=new rf(a,o)}}return n}function tq(t,e){let n;if(e instanceof Ds)n={update:wx(t,e.key,e.value)};else if(e instanceof hu)n={delete:lw(t,e.key)};else if(e instanceof Mr)n={update:wx(t,e.key,e.data),updateMask:lq(e.fieldMask)};else{if(!(e instanceof tw))return V();n={verify:lw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw V()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:J4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:V()}(t,e.precondition)),n}function nq(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ar(i.updateTime):ar(s);return o.isEqual(G.min())&&(o=ar(s)),new ew(o,i.transformResults||[])}(n,e))):[]}function rq(t,e){return{documents:[dw(t,e.path)]}}function iq(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=dw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return nR(ur.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let s=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Vo(d.field),direction:aq(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=uw(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function sq(t){let e=X4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ce(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=tR(d);return h instanceof ur&&Ox(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(_){return new Ko(Uo(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Af(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new zo(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new zo(f,h)}(n.endAt)),R4(e,i,o,s,a,"F",c,u)}function oq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Uo(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Uo(n.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Uo(n.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Uo(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Uo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ur.create(n.compositeFilter.filters.map(r=>tR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return V()}}(n.compositeFilter.op))}(t):V()}function aq(t){return Q4[t]}function cq(t){return Y4[t]}function uq(t){return Z4[t]}function Vo(t){return{fieldPath:t.canonicalString()}}function Uo(t){return Ht.fromServerFormat(t.fieldPath)}function nR(t){return t instanceof Je?function(n){if(n.op==="=="){if(ox(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(sx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ox(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(sx(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:cq(n.op),value:n.value}}}(t):t instanceof ur?function(n){let r=n.getFilters().map(i=>nR(i));return r.length===1?r[0]:{compositeFilter:{op:uq(n.op),filters:r}}}(t):V()}function lq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var pu=class t{constructor(e,n,r,i,s=G.min(),o=G.min(),a=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fw=class{constructor(e){this.ut=e}};function dq(t){let e=sq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xv(e,e.limit,"L"):e}var cf=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),uu(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(li(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?Mx(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):V()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),O.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};cf.St=new cf;var pw=class{constructor(){this.on=new mw}addToCollectionParentIndex(e,n){return this.on.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}deleteAllFieldIndexes(e){return I.resolve()}createTargetIndexes(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(ws.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}},mw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _t(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t(Pe.comparator)).toArray()}};var IJ=new Uint8Array(0);var rr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(41943040,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);var mu=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var gw=class{constructor(){this.changes=new di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var _w=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&cu(r.mutation,i,ir.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){let i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=iu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Rr(),o=au(),a=function(){return au()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Mr)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),cu(l.mutation,u,l.mutation.getFieldMask(),ht.now())):o.set(u.key,ir.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new yw(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=au(),i=new Oe((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||ir.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||ne()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=$x();l.forEach(h=>{if(!s.has(h)){let f=Qx(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return I.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return O.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):I.resolve(gs()),a=-1,c=s;return o.next(u=>I.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?I.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ne())).next(l=>({batchId:a,changes:Bx(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new O(n)).next(r=>{let i=iu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=iu();return this.indexManager.getCollectionParents(e,s).next(a=>I.forEach(a,c=>{let u=function(d,h){return new Qo(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Rn.newInvalidDocument(l)))});let a=iu();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&cu(l.mutation,u,ir.empty(),ht.now()),Rf(n,u)&&(a=a.insert(c,u))}),a})}};var vw=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return I.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ar(i.createTime)}}(n)),I.resolve()}getNamedQuery(e,n){return I.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:dq(i.bundledQuery),readTime:ar(i.readTime)}}(n)),I.resolve()}};var ww=class{constructor(){this.overlays=new Oe(O.comparator),this.lr=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){let r=gs();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),I.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){let i=gs(),s=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=gs(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=gs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return I.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iw(n,r));let s=this.lr.get(n);s===void 0&&(s=ne(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var gu=class{constructor(){this.hr=new _t(qe.Pr),this.Ir=new _t(qe.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new qe(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new O(new Pe([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new O(new Pe([])),r=new qe(n,e),i=new qe(n,e+1),s=ne();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new qe(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return O.comparator(e.key,n.key)||fe(e.gr,n.gr)}static Tr(e,n){return fe(e.gr,n.gr)||O.comparator(e.key,n.key)}};var Ew=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new _t(qe.Pr)}checkEmpty(e){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new nw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(fe);return n.forEach(i=>{let s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),I.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;O.isDocumentKey(s)||(s=s.child(""));let o=new qe(new O(s),0),a=new _t(fe);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),I.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return I.forEach(n.mutations,i=>{let s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new qe(n,0),i=this.yr.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,I.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Iw=class{constructor(e){this.Cr=e,this.docs=function(){return new Oe(O.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let r=Rr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rn.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rr(),o=n.path,a=new O(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||E4(w4(l),r)<=0||(i.has(l.key)||Rf(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return I.resolve(s)}getAllFromCollectionGroup(e,n,r,i){V()}vr(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cw(this)}getSize(e){return I.resolve(this.size)}},Cw=class extends gw{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Dw=class{constructor(e){this.persistence=e,this.Fr=new di(n=>uE(n),lE),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Mr=0,this.Or=new gu,this.targetCount=0,this.Nr=mu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),I.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new mu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.kn(n),I.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),I.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.Or.containsKey(n))}};var Tw=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new xx(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Dw(this),this.indexManager=new pw,this.remoteDocumentCache=function(i){return new Iw(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new fw(n),this.Kr=new vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ww,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Ew(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){x("MemoryPersistence","Starting transaction:",e);let i=new bw(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return I.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},bw=class extends Uv{constructor(e){super(),this.currentSequenceNumber=e}},Sw=class t{constructor(e){this.persistence=e,this.Gr=new gu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw V()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),I.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Hr,r=>{let i=O.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return I.or([()=>I.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Aw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var xw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Rw=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new xw;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(ru()<=X.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),I.resolve()):(ru()<=X.DEBUG&&x("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(ru()<=X.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):I.resolve())}zi(e,n){if(lx(n))return I.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xv(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ne(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,Xv(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return lx(n)||i.isEqual(G.min())?I.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?I.resolve(null):(ru()<=X.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lo(n)),this.Xi(e,o,n,v4(i,-1)).next(a=>a))})}Yi(e,n){let r=new _t(Ux(e));return n.forEach((i,s)=>{Rf(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return ru()<=X.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Gi.getDocumentsMatchingQuery(e,n,ws.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Mw=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Oe(fe),this.ns=new di(s=>uE(s),lE),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _w(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function hq(t,e,n,r){return new Mw(t,e,n,r)}function iR(t,e){return p(this,null,function*(){let n=W(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ne();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function fq(t,e){let n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=I.resolve();return h.forEach(_=>{f=f.next(()=>l.getEntry(c,_)).next(w=>{let E=u.docVersions.get(_);Ce(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),l.addEntry(w)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ne();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sR(t){let e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function pq(t,e){let n=W(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Dt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(w,E,A){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let c=Rr(),u=ne();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(mq(s,o,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(G.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ts=i,s))}function mq(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rr();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(G.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function gq(t,e){let n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yq(t,e){let n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new pu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Nw(t,e,n){return p(this,null,function*(){let r=W(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Eu(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Ex(t,e,n){let r=W(t),i=G.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=W(c),h=d.ns.get(l);return h!==void 0?I.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:G.min(),n?s:ne())).next(a=>(_q(r,P4(e),a),{documents:a,ls:s})))}function _q(t,e,n){let r=t.rs.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var uf=class{constructor(){this.activeTargetIds=U4()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Pw=class{constructor(){this.eo=new uf,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new uf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ow=class{ro(e){}shutdown(){}};var lf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wh=null;function Av(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}var vq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var kw=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var yt="WebChannelConnection",Fw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){let a=Av(),c=this.So(n,r);x("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,c,u,i).then(l=>(x("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Ho("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){let i=vq[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let s=Av();return new Promise((o,a)=>{let c=new ex;c.setWithCredentials(!0),c.listenOnce(JA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qh.NO_ERROR:let l=c.getResponseJson();x(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case qh.TIMEOUT:x(yt,`RPC '${e}' ${s} timed out`),a(new M(v.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:let d=c.getStatus();if(x(yt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let _=function(E){let A=E.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(A)>=0?A:v.UNKNOWN}(f.status);a(new M(_,f.message))}else a(new M(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new M(v.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{x(yt,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);x(yt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}vo(e,n,r){let i=Av(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YA(),a=ZA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");x(yt,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,_=new kw({co:E=>{f?x(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(h||(x(yt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),x(yt,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},lo:()=>d.close()}),w=(E,A,$)=>{E.listen(A,ie=>{try{$(ie)}catch(pe){setTimeout(()=>{throw pe},0)}})};return w(d,nu.EventType.OPEN,()=>{f||x(yt,`RPC '${e}' stream ${i} transport opened.`)}),w(d,nu.EventType.CLOSE,()=>{f||(f=!0,x(yt,`RPC '${e}' stream ${i} transport closed`),_.Ro())}),w(d,nu.EventType.ERROR,E=>{f||(f=!0,Ho(yt,`RPC '${e}' stream ${i} transport errored:`,E),_.Ro(new M(v.UNAVAILABLE,"The operation could not be completed")))}),w(d,nu.EventType.MESSAGE,E=>{var A;if(!f){let $=E.data[0];Ce(!!$);let ie=$,pe=ie.error||((A=ie[0])===null||A===void 0?void 0:A.error);if(pe){x(yt,`RPC '${e}' stream ${i} received error:`,pe);let ke=pe.status,ve=function(wi){let qu=He[wi];if(qu!==void 0)return Zx(qu)}(ke),Ot=pe.message;ve===void 0&&(ve=v.INTERNAL,Ot="Unknown error status: "+ke+" with message "+pe.message),f=!0,_.Ro(new M(ve,Ot)),d.close()}else x(yt,`RPC '${e}' stream ${i} received:`,$),_.Vo($)}}),w(a,XA.STAT_EVENT,E=>{E.stat===bv.PROXY?x(yt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===bv.NOPROXY&&x(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ao()},0),_}};function xv(){return typeof document<"u"?document:null}function Mf(t){return new cw(t,!0)}var df=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var hf=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new df(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return p(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return p(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return p(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new M(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>p(this,null,function*(){this.state=0,this.start()}))}o_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lw=class extends hf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=eq(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?ar(o.readTime):G.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=hw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Jv(c)?{documents:rq(s,c)}:{query:iq(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Jx(s,o.resumeToken);let u=uw(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=af(s,o.snapshotVersion.toTimestamp());let u=uw(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=oq(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=hw(this.serializer),n.removeTarget=e,this.e_(n)}},Vw=class extends hf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=nq(e.writeResults,e.commitTime),r=ar(e.commitTime);return this.listener.I_(r,n)}return Ce(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=hw(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>tq(this.serializer,r))};this.e_(n)}};var Uw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(v.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(v.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var jw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(xr(n),this.f_=!1):x("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var Bw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(()=>p(this,null,function*(){Ts(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=W(c);u.C_.add(4),yield Iu(u),u.M_.set("Unknown"),u.C_.delete(4),yield Nf(u)})}(this))}))}),this.M_=new jw(r,i)}};function Nf(t){return p(this,null,function*(){if(Ts(t))for(let e of t.v_)yield e(!0)})}function Iu(t){return p(this,null,function*(){for(let e of t.v_)yield e(!1)})}function oR(t,e){let n=W(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),mE(n)?pE(n):ia(n).Ho()&&fE(n,e))}function aR(t,e){let n=W(t),r=ia(n);n.D_.delete(e),r.Ho()&&cR(n,e),n.D_.size===0&&(r.Ho()?r.Zo():Ts(n)&&n.M_.set("Unknown"))}function fE(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ia(t).u_(e)}function cR(t,e){t.x_.Oe(e),ia(t).c_(e)}function pE(t){t.x_=new aw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ia(t).start(),t.M_.g_()}function mE(t){return Ts(t)&&!ia(t).jo()&&t.D_.size>0}function Ts(t){return W(t).C_.size===0}function uR(t){t.x_=void 0}function wq(t){return p(this,null,function*(){t.D_.forEach((e,n)=>{fE(t,e)})})}function Eq(t,e){return p(this,null,function*(){uR(t),mE(t)?(t.M_.w_(e),pE(t)):t.M_.set("Unknown")})}function Iq(t,e,n){return p(this,null,function*(){if(t.M_.set("Online"),e instanceof sf&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ff(t,r)}else if(e instanceof Bo?t.x_.$e(e):e instanceof rf?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(G.min()))try{let r=yield sR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.D_.get(u);l&&s.D_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.D_.get(c);if(!l)return;s.D_.set(c,l.withResumeToken(Dt.EMPTY_BYTE_STRING,l.snapshotVersion)),cR(s,c);let d=new pu(l.target,c,u,l.sequenceNumber);fE(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){x("RemoteStore","Failed to raise snapshot:",r),yield ff(t,r)}})}function ff(t,e,n){return p(this,null,function*(){if(!Eu(e))throw e;t.C_.add(1),yield Iu(t),t.M_.set("Offline"),n||(n=()=>sR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Nf(t)}))})}function lR(t,e){return e().catch(n=>ff(t,n,e))}function Pf(t){return p(this,null,function*(){let e=W(t),n=hi(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Cq(e);)try{let i=yield gq(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,Dq(e,i)}catch(i){yield ff(e,i)}dR(e)&&hR(e)})}function Cq(t){return Ts(t)&&t.b_.length<10}function Dq(t,e){t.b_.push(e);let n=hi(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function dR(t){return Ts(t)&&!hi(t).jo()&&t.b_.length>0}function hR(t){hi(t).start()}function Tq(t){return p(this,null,function*(){hi(t).E_()})}function bq(t){return p(this,null,function*(){let e=hi(t);for(let n of t.b_)e.P_(n.mutations)})}function Sq(t,e,n){return p(this,null,function*(){let r=t.b_.shift(),i=rw.from(r,e,n);yield lR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Pf(t)})}function Aq(t,e){return p(this,null,function*(){e&&hi(t).h_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return W4(o)&&o!==v.ABORTED}(i.code)){let s=r.b_.shift();hi(r).Yo(),yield lR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Pf(r)}})}(t,e)),dR(t)&&hR(t)})}function Ix(t,e){return p(this,null,function*(){let n=W(t);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let r=Ts(n);n.C_.add(3),yield Iu(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Nf(n)})}function xq(t,e){return p(this,null,function*(){let n=W(t);e?(n.C_.delete(2),yield Nf(n)):e||(n.C_.add(2),yield Iu(n),n.M_.set("Unknown"))})}function ia(t){return t.O_||(t.O_=function(n,r,i){let s=W(n);return s.A_(),new Lw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:wq.bind(null,t),Io:Eq.bind(null,t),a_:Iq.bind(null,t)}),t.v_.push(e=>p(this,null,function*(){e?(t.O_.Yo(),mE(t)?pE(t):t.M_.set("Unknown")):(yield t.O_.stop(),uR(t))}))),t.O_}function hi(t){return t.N_||(t.N_=function(n,r,i){let s=W(n);return s.A_(),new Vw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:Tq.bind(null,t),Io:Aq.bind(null,t),T_:bq.bind(null,t),I_:Sq.bind(null,t)}),t.v_.push(e=>p(this,null,function*(){e?(t.N_.Yo(),yield Pf(t)):(yield t.N_.stop(),t.b_.length>0&&(x("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var $w=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gE(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Eu(t))return new M(v.UNAVAILABLE,`${e}: ${t}`);throw t}var pf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||O.comparator(n.key,r.key):(n,r)=>O.comparator(n.key,r.key),this.keyedMap=iu(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var mf=class{constructor(){this.B_=new Oe(O.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):V():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},ea=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,pf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hw=class{constructor(){this.k_=void 0,this.listeners=[]}},qw=class{constructor(){this.queries=new di(e=>Vx(e),xf),this.onlineState="Unknown",this.q_=new Set}};function fR(t,e){return p(this,null,function*(){let n=W(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Hw),i)try{s.k_=yield n.onListen(r)}catch(o){let a=gE(o,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&yE(n)})}function pR(t,e){return p(this,null,function*(){let n=W(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function Rq(t,e){let n=W(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&yE(n)}function Mq(t,e,n){let r=W(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function yE(t){t.q_.forEach(e=>{e.next()})}var gf=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var yf=class{constructor(e){this.key=e}},_f=class{constructor(e){this.key=e}},Gw=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ne(),this.mutatedKeys=ne(),this._a=Ux(e),this.aa=new pf(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new mf,i=n?n.aa:this.aa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Rf(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),E=!1;h&&f?h.data.isEqual(f.data)?_!==w&&(r.track({type:3,doc:f}),E=!0):this.ha(h,f)||(r.track({type:2,doc:f}),E=!0,(c&&this._a(f,c)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),E=!0):h&&!f&&(r.track({type:1,doc:h}),E=!0,(c||u)&&(a=!0)),E&&(f?(o=o.add(f),s=w?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((l,d)=>function(f,_){let w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return w(f)-w(_)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,u=c!==this.sa;return this.sa=c,o.length!==0||u?{snapshot:new ea(this.query,e.aa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new mf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=ne(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new _f(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new yf(r))}),n}da(e){this.ia=e.ls,this.oa=ne();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return ea.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},Ww=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},zw=class{constructor(e){this.key=e,this.Ra=!1}},Kw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new di(a=>Vx(a),xf),this.fa=new Map,this.ga=new Set,this.pa=new Oe(O.comparator),this.ya=new Map,this.wa=new gu,this.Sa={},this.ba=new Map,this.Da=mu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function Nq(t,e){return p(this,null,function*(){let n=$q(t),r,i,s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{let o=yield yq(n.localStore,or(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield Pq(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&oR(n.remoteStore,o)}return i})}function Pq(t,e,n,r,i){return p(this,null,function*(){t.va=(d,h,f)=>function(w,E,A,$){return p(this,null,function*(){let ie=E.view.ca(A);ie.Zi&&(ie=yield Ex(w.localStore,E.query,!1).then(({documents:Ot})=>E.view.ca(Ot,ie)));let pe=$&&$.targetChanges.get(E.targetId),ke=$&&$.targetMismatches.get(E.targetId)!=null,ve=E.view.applyChanges(ie,w.isPrimaryClient,pe,ke);return Dx(w,E.targetId,ve.Ta),ve.snapshot})}(t,d,h,f);let s=yield Ex(t.localStore,e,!0),o=new Gw(e,s.ls),a=o.ca(s.documents),c=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Dx(t,n,u.Ta);let l=new Ww(e,n,o);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot})}function Oq(t,e){return p(this,null,function*(){let n=W(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!xf(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nw(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),aR(n.remoteStore,r.targetId),Qw(n,r.targetId)}).catch(wu))):(Qw(n,r.targetId),yield Nw(n.localStore,r.targetId,!0))})}function kq(t,e,n){return p(this,null,function*(){let r=Hq(t);try{let i=yield function(o,a){let c=W(o),u=ht.now(),l=a.reduce((f,_)=>f.add(_.key),ne()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=Rr(),w=ne();return c.ss.getEntries(f,l).next(E=>{_=E,_.forEach((A,$)=>{$.isValidDocument()||(w=w.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,_)).next(E=>{d=E;let A=[];for(let $ of a){let ie=G4($,d.get($.key).overlayedDocument);ie!=null&&A.push(new Mr($.key,ie,Nx(ie.value.mapValue),Ar.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,A,a)}).next(E=>{h=E;let A=E.applyToLocalDocumentSet(d,w);return c.documentOverlayCache.saveOverlays(f,E.batchId,A)})}).then(()=>({batchId:h.batchId,changes:Bx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Sa[o.currentUser.toKey()];u||(u=new Oe(fe)),u=u.insert(a,c),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Cu(r,i.changes),yield Pf(r.remoteStore)}catch(i){let s=gE(i,"Failed to persist write");n.reject(s)}})}function mR(t,e){return p(this,null,function*(){let n=W(t);try{let r=yield pq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.ya.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ce(o.Ra):i.removedDocuments.size>0&&(Ce(o.Ra),o.Ra=!1))}),yield Cu(n,r,e)}catch(r){yield wu(r)}})}function Cx(t,e,n){let r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=W(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(u=!0)}),u&&yE(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fq(t,e,n){return p(this,null,function*(){let r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),s=i&&i.key;if(s){let o=new Oe(O.comparator);o=o.insert(s,Rn.newNoDocument(s,G.min()));let a=ne().add(s),c=new nf(G.min(),new Map,new Oe(fe),o,a);yield mR(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),_E(r)}else yield Nw(r.localStore,e,!1).then(()=>Qw(r,e,n)).catch(wu)})}function Lq(t,e){return p(this,null,function*(){let n=W(t),r=e.batch.batchId;try{let i=yield fq(n.localStore,e);yR(n,r,null),gR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Cu(n,i)}catch(i){yield wu(i)}})}function Vq(t,e,n){return p(this,null,function*(){let r=W(t);try{let i=yield function(o,a){let c=W(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(Ce(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);yR(r,e,n),gR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Cu(r,i)}catch(i){yield wu(i)}})}function gR(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function yR(t,e,n){let r=W(t),i=r.Sa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Qw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||_R(t,r)})}function _R(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(aR(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),_E(t))}function Dx(t,e,n){for(let r of n)r instanceof yf?(t.wa.addReference(r.key,e),Uq(t,r)):r instanceof _f?(x("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||_R(t,r.key)):V()}function Uq(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(x("SyncEngine","New document in limbo: "+n),t.ga.add(r),_E(t))}function _E(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new O(Pe.fromString(e)),r=t.Da.next();t.ya.set(r,new zw(n)),t.pa=t.pa.insert(n,r),oR(t.remoteStore,new pu(or(dE(n.path)),r,"TargetPurposeLimboResolution",xx._e))}}function Cu(t,e,n){return p(this,null,function*(){let r=W(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Aw.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Va.a_(i),yield function(c,u){return p(this,null,function*(){let l=W(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>I.forEach(u,h=>I.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>I.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Eu(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),_=f.snapshotVersion,w=f.withLastLimboFreeSnapshotVersion(_);l.ts=l.ts.insert(h,w)}}})}(r.localStore,s))})}function jq(t,e){return p(this,null,function*(){let n=W(t);if(!n.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());let r=yield iR(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(c=>{c.reject(new M(v.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cu(n,r._s)}})}function Bq(t,e){let n=W(t),r=n.ya.get(e);if(r&&r.Ra)return ne().add(r.key);{let i=ne(),s=n.fa.get(e);if(!s)return i;for(let o of s){let a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function $q(t){let e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fq.bind(null,e),e.Va.a_=Rq.bind(null,e.eventManager),e.Va.Fa=Mq.bind(null,e.eventManager),e}function Hq(t){let e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vq.bind(null,e),e}var vf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hq(this.persistence,new Rw,e.initialUser,this.serializer)}createPersistence(e){return new Tw(Sw.jr,this.serializer)}createSharedClientState(e){return new Pw}terminate(){return p(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Yw=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jq.bind(null,this.syncEngine),yield xq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new qw}()}createDatastore(e){let n=Mf(e.databaseInfo.databaseId),r=function(s){return new Fw(s)}(e.databaseInfo);return function(s,o,a,c){return new Uw(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Bw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Cx(this.syncEngine,n,0),function(){return lf.D()?new lf:new Ow}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Kw(i,s,o,a,c,u);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return p(this,null,function*(){let r=W(n);x("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Iu(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};var wf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Zw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){x("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(x("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return p(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=gE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Rv(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield iR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Tx(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Gq(t);x("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>Ix(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Ix(e.remoteStore,s)),t._onlineComponents=e})}function qq(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Gq(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!qq(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),yield Rv(t,new vf)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield Rv(t,new vf);return t._offlineComponents})}function vR(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tx(t,t._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield Tx(t,new Yw))),t._onlineComponents})}function Wq(t){return vR(t).then(e=>e.syncEngine)}function wR(t){return p(this,null,function*(){let e=yield vR(t),n=e.eventManager;return n.onListen=Nq.bind(null,e.syncEngine),n.onUnlisten=Oq.bind(null,e.syncEngine),n})}function zq(t,e,n={}){let r=new xn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new wf({next:h=>{o.enqueueAndForget(()=>pR(s,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new M(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new M(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new gf(dE(a.path),l,{includeMetadataChanges:!0,J_:!0});return fR(s,d)}(yield wR(t),t.asyncQueue,e,n,r)})),r.promise}function Kq(t,e,n={}){let r=new xn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new wf({next:h=>{o.enqueueAndForget(()=>pR(s,d)),h.fromCache&&c.source==="server"?u.reject(new M(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new gf(a,l,{includeMetadataChanges:!0,J_:!0});return fR(s,d)}(yield wR(t),t.asyncQueue,e,n,r)})),r.promise}function ER(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var bx=new Map;function IR(t,e,n){if(!n)throw new M(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qq(t,e,n,r){if(e===!0&&r===!0)throw new M(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sx(t){if(!O.isDocumentKey(t))throw new M(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ax(t){if(O.isDocumentKey(t))throw new M(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function Nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vE(t);throw new M(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ef=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ER((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ta=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ef({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ef(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Mv;switch(r.type){case"firstParty":return new kv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=bx.get(n);r&&(x("ComponentProvider","Removing Datastore"),bx.delete(n),r.terminate())}(this),Promise.resolve()}};function CR(t,e,n,r={}){var i;let s=(t=Nr(t,ta))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=st.MOCK_USER;else{a=Py(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new M(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new st(u)}t._authCredentials=new Nv(new Qh(a,c))}}var If=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ci=class t extends If{constructor(e,n,r){super(e,n,dE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new O(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function rn(t,e,...n){if(t=$e(t),IR("collection","path",e),t instanceof ta){let r=Pe.fromString(e,...n);return Ax(r),new ci(t,null,r)}{if(!(t instanceof qt||t instanceof ci))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return Ax(r),new ci(t.firestore,null,r)}}function Tt(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Yh.newId()),IR("doc","path",e),t instanceof ta){let r=Pe.fromString(e,...n);return Sx(r),new qt(t,null,new O(r))}{if(!(t instanceof qt||t instanceof ci))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return Sx(r),new qt(t.firestore,t instanceof ci?t.converter:null,new O(r))}}var Jw=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new df(this,"async_queue_retry"),this.iu=()=>{let n=xv();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=xv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=xv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new xn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return p(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Eu(e))throw e;x("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=$w.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&V()}verifyOperationInProgress(){}uu(){return p(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};var fi=class extends ta{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Jw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TR(this),this._firestoreClient.terminate()}};function DR(t,e){let n=typeof t=="object"?t:ts(),r=typeof t=="string"?t:e||"(default)",i=bo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ry("firestore");s&&CR(i,...s)}return i}function wE(t){return t._firestoreClient||TR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function TR(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new jv(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ER(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Zw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var yu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new M(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _u=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new M(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cf=class{constructor(e){this._methodName=e}};var vu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new M(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new M(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}};var Yq=/^__.*__$/,Xw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ds(e,this.data,n,this.fieldTransforms)}};function bR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}var eE=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Df(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(bR(this.Iu)&&Yq.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},tE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mf(e)}pu(e,n,r,i=!1){return new eE({Iu:e,methodName:n,gu:r,path:Ht.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function SR(t){let e=t._freezeSettings(),n=Mf(t._databaseId);return new tE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AR(t,e,n,r,i,s={}){let o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);NR("Data must be an object, but it was:",o,r);let a=RR(r,o),c,u;if(s.merge)c=new ir(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=Zq(e,d,n);if(!o.contains(h))throw new M(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Xq(l,h)||l.push(h)}c=new ir(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Xw(new An(a),c,u)}function xR(t,e){if(MR(t=$e(t)))return NR("Unsupported field value:",e,t),RR(t,e);if(t instanceof Cf)return function(r,i){if(!bR(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=xR(a,i.Vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ht.fromDate(r);return{timestampValue:af(i.serializer,s)}}if(r instanceof ht){let s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:af(i.serializer,s)}}if(r instanceof vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yu)return{bytesValue:Jx(i.serializer,r._byteString)};if(r instanceof qt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${vE(r)}`)}(t,e)}function RR(t,e){let n={};return Rx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,(r,i)=>{let s=xR(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function MR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof vu||t instanceof yu||t instanceof qt||t instanceof Cf)}function NR(t,e,n){if(!MR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=vE(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function Zq(t,e,n){if((e=$e(e))instanceof _u)return e._internalPath;if(typeof e=="string")return PR(t,e);throw Df("Field path arguments must be of type string or ",t,!1,void 0,n)}var Jq=new RegExp("[~\\*/\\[\\]]");function PR(t,e,n){if(e.search(Jq)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _u(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Df(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new M(v.INVALID_ARGUMENT,a+t+c)}function Xq(t,e){return t.some(n=>n.isEqual(e))}var Tf=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(OR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},nE=class extends Tf{data(){return super.data()}};function OR(t,e){return typeof e=="string"?PR(t,e):e instanceof _u?e._internalPath:e._delegate._internalPath}function eG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new M(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rE=class{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ra(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new vu(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=aE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){let n=ui(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Pe.fromString(e);Ce(rR(r));let i=new ef(r.get(1),r.get(3)),s=new O(r.popFirst(5));return i.isEqual(n)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function kR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var _s=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bf=class extends Tf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new $o(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(OR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},$o=class extends bf{data(e={}){return super.data(e)}},iE=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _s(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $o(this._firestore,this._userDataWriter,r.key,r,new _s(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:tG(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function tG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function FR(t){t=Nr(t,qt);let e=Nr(t.firestore,fi);return zq(wE(e),t._key).then(n=>nG(e,t,n))}var Sf=class extends rE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}};function pi(t){t=Nr(t,If);let e=Nr(t.firestore,fi),n=wE(e),r=new Sf(e);return eG(t._query),Kq(n,t._query).then(i=>new iE(e,r,t,i))}function bs(t,e,n){t=Nr(t,qt);let r=Nr(t.firestore,fi),i=kR(t.converter,e,n);return EE(r,[AR(SR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ar.none())])}function Ss(t){return EE(Nr(t.firestore,fi),[new hu(t._key,Ar.none())])}function LR(t,e){let n=Nr(t.firestore,fi),r=Tt(t),i=kR(t.converter,e);return EE(n,[AR(SR(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}function EE(t,e){return function(r,i){let s=new xn;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return kq(yield Wq(r),i,s)})),s.promise}(wE(t),e)}function nG(t,e,n){let r=n.docs.get(e._key),i=new Sf(t);return new bf(t,i,e._key,r,new _s(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){na=i})(Zn),Yn(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new fi(new Pv(r.getProvider("auth-internal")),new Lv(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new M(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Se(nx,"4.4.0",e),Se(nx,"4.4.0","esm2017")})();var bt=class{constructor(e){return e}},VR="firestore",IE=class{constructor(){return is(VR)}};var CE=new k("angularfire2.firestore-instances");function rG(t,e){let n=Ao(VR,t,e);return n&&new bt(n)}function iG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new bt(r)}}var sG={provide:IE,deps:[[new Ke,CE]]},oG={provide:bt,useFactory:rG,deps:[[new Ke,CE],Tn]},DE=(()=>{class t{constructor(){Se("angularfire",Ir.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=et({type:t});static \u0275inj=Xe({providers:[oG,sG]})}return t})();function UR(t,...e){return{ngModule:DE,providers:[{provide:CE,useFactory:iG(t),multi:!0,deps:[ye,Rt,ss,ni,[new Ke,Pc],[new Ke,rs],...e]}]}}var jR=Bt(LR,!0);var BR=Bt(rn,!0);var TE=Bt(FR,!0);var $R=Bt(DR,!0);var bE=Bt(bs,!0);var ot=(()=>{let e=class e{constructor(r,i){this.auth=r,this.firestore=i,this.authStateChange=new ee(s=>{let o=ph(this.auth,a=>{s.next(a)});return()=>o()})}getShiftById(r){let i=this.auth.currentUser;if(i){let s=i.uid,o=Tt(this.firestore,`users/${s}/shifts/${r}`);return TE(o).then(a=>a.data())}else return}register(r,i,s,o,a){return dh(this.auth,r,i).then(c=>{let u=c.user;if(u){let l=u.uid,d=rn(this.firestore,"users"),h={userId:l,email:r,firstName:s,lastName:o,birthDate:a};return bE(Tt(this.firestore,"users",l),h).then(()=>{let f=rn(this.firestore,`users/${l}/formData`),_={email:r,firstName:s,lastName:o,birthDate:a};return bE(Tt(this.firestore,`users/${l}/formData/${l}`),_).then(()=>c)})}else return Promise.reject(new Error("No authenticated user"))}).catch(c=>Promise.reject(c))}updatePassword(r,i){let s=this.auth.currentUser;if(s&&s.email){let o=lh.credential(s.email,r);return PS(s,o).then(()=>fh(s,i))}else return Promise.reject(new Error("No authenticated user or user email is null"))}getFormData(r){let i=Tt(this.firestore,`users/${r}/formData`,r);return TE(i).then(s=>s.data())}loadShiftsData(){return new ee(r=>{let i=this.auth.currentUser;if(i){let s=i.uid,o=rn(this.firestore,`users/${s}/shifts`);pi(o).then(a=>{let c=[];a.forEach(u=>{c.push(S({id:u.id},u.data()))}),r.next(c)}).catch(a=>{r.error(a)})}else r.error(new Error("No authenticated user"))})}};e.\u0275fac=function(i){return new(i||e)(U(Ze),U(bt))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aG(t,e){if(t&1&&(m(0,"tr",9)(1,"td",10),y(2,"Date"),g(),m(3,"td"),y(4),g(),m(5,"td",10),y(6,"Start time"),g(),m(7,"td"),y(8),g(),m(9,"td",10),y(10,"End time"),g(),m(11,"td"),y(12),g(),m(13,"td",10),y(14,"Hourly wage"),g(),m(15,"td"),y(16),g(),m(17,"td",10),y(18,"Workplace"),g(),m(19,"td"),y(20),g(),m(21,"td",10),y(22,"Profit"),g(),m(23,"td"),y(24),g()()),t&2){let n=e.$implicit;C(4),J(n.Date),C(4),J(n.start),C(4),J(n.end),C(4),J(n.wage),C(4),J(n.workplace),C(4),J(n.profit)}}function cG(t,e){if(t&1&&(m(0,"tr",9)(1,"td",10),y(2,"Date"),g(),m(3,"td"),y(4),g(),m(5,"td",10),y(6,"Start time"),g(),m(7,"td"),y(8),g(),m(9,"td",10),y(10,"End time"),g(),m(11,"td"),y(12),g(),m(13,"td",10),y(14,"Hourly wage"),g(),m(15,"td"),y(16),g(),m(17,"td",10),y(18,"Workplace"),g(),m(19,"td"),y(20),g(),m(21,"td",10),y(22,"Profit"),g(),m(23,"td"),y(24),g()()),t&2){let n=e.$implicit;C(4),J(n.Date),C(4),J(n.start),C(4),J(n.end),C(4),J(n.wage),C(4),J(n.workplace),C(4),J(n.profit)}}function uG(t,e){if(t&1&&(m(0,"tr",9)(1,"td",10),y(2,"Date"),g(),m(3,"td"),y(4),g(),m(5,"td",10),y(6,"Start time"),g(),m(7,"td"),y(8),g(),m(9,"td",10),y(10,"End time"),g(),m(11,"td"),y(12),g(),m(13,"td",10),y(14,"Hourly wage"),g(),m(15,"td"),y(16),g(),m(17,"td",10),y(18,"Workplace"),g(),m(19,"td"),y(20),g(),m(21,"td",10),y(22,"Profit"),g(),m(23,"td"),y(24),g()()),t&2){let n=e.$implicit;C(4),J(n.Date),C(4),J(n.start),C(4),J(n.end),C(4),J(n.wage),C(4),J(n.workplace),C(4),J(n.profit)}}var SE=(()=>{let e=class e{constructor(r){this.authService=r,this.shifts=[],this.bestMonth="",this.bestMonthProfit=0,this.upcomingShifts=[],this.pastWeekShifts=[],this.bestMonthShifts=[]}ngOnInit(){this.loadShifts()}loadShifts(){this.authService.loadShiftsData().subscribe(r=>{this.shifts=r,this.sortShiftsByDate(),this.loadUpcomingShifts(),this.loadPastWeekShifts(),this.calculateBestMonth(),this.shifts.forEach(i=>{i.profit=this.calculateProfit(i.start,i.end,i.wage)})},r=>{console.error("Error loading shifts:",r)})}sortShiftsByDate(){this.shifts.sort((r,i)=>{let s=new Date(r.Date),o=new Date(i.Date);return s.getTime()-o.getTime()})}loadUpcomingShifts(){let r=new Date;this.upcomingShifts=this.shifts.filter(i=>new Date(i.Date)>=r),this.upcomingShifts.forEach(i=>{i.profit=this.calculateProfit(i.start,i.end,i.wage)}),this.upcomingShifts.sort((i,s)=>new Date(i.Date).getTime()-new Date(s.Date).getTime())}loadPastWeekShifts(){let r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()-7);this.pastWeekShifts=this.shifts.filter(s=>new Date(s.Date)>=i&&new Date(s.Date)<r),this.pastWeekShifts.forEach(s=>{s.profit=this.calculateProfit(s.start,s.end,s.wage)}),this.pastWeekShifts.sort((s,o)=>new Date(o.Date).getTime()-new Date(s.Date).getTime())}calculateBestMonth(){let r={};this.shifts.forEach(a=>{let c=new Date(a.Date).toLocaleString("default",{month:"long"}),u=this.convertTimeToNumber(a.start),l=this.convertTimeToNumber(a.end),d=Number(a.wage);if(!isNaN(u)&&!isNaN(l)&&!isNaN(d)){let h=this.calculateProfit(a.start,a.end,a.wage);r[c]?r[c]+=h:r[c]=h}});let i=0,s="";for(let a in r)r[a]>i&&(i=r[a],s=a);this.bestMonth=s,this.bestMonthProfit=i;let o=new Date(Date.parse("01 "+this.bestMonth+" 2000")).getMonth()+1;this.bestMonthShifts=this.shifts.filter(a=>new Date(a.Date).getMonth()+1===o),this.bestMonthShifts.sort((a,c)=>new Date(a.Date).getTime()-new Date(c.Date).getTime())}calculateProfit(r,i,s){let o=this.convertTimeToNumber(r),a=this.convertTimeToNumber(i),c=Number(s);return Math.round((a-o)*c)}convertTimeToNumber(r){let[i,s]=r.split(":").map(Number);return i+s/60}};e.\u0275fac=function(i){return new(i||e)(D(ot))},e.\u0275cmp=Ue({type:e,selectors:[["app-home"]],standalone:!0,features:[je],decls:64,vars:5,consts:[[1,"table"],["id","upcomingShiftsTable",1,"shift-table"],[1,"table-header"],["id","upcomingShiftsTableBody"],["class","shifts",4,"ngFor","ngForOf"],["id","pastWeekShiftsTable",1,"shift-table"],["id","pastWeekShiftsTableBody"],["id","bestMonthShiftsTable",1,"shift-table"],["id","bestMonthShiftsTableBody"],[1,"shifts"],[1,"mobile"]],template:function(i,s){i&1&&(m(0,"h1"),y(1,"Home"),g(),m(2,"div",0)(3,"h2"),y(4,"Upcoming shifts"),g(),m(5,"table",1)(6,"thead")(7,"tr",2)(8,"th"),y(9,"Date"),g(),m(10,"th"),y(11,"Start time"),g(),m(12,"th"),y(13,"End time"),g(),m(14,"th"),y(15,"Hourly wage"),g(),m(16,"th"),y(17,"Workplace"),g(),m(18,"th"),y(19,"Profit"),g()()(),m(20,"tbody",3),de(21,aG,25,6,"tr",4),g()()(),m(22,"div",0)(23,"h2"),y(24,"Past week shifts"),g(),m(25,"table",5)(26,"thead")(27,"tr",2)(28,"th"),y(29,"Date"),g(),m(30,"th"),y(31,"Start time"),g(),m(32,"th"),y(33,"End time"),g(),m(34,"th"),y(35,"Hourly wage"),g(),m(36,"th"),y(37,"Workplace"),g(),m(38,"th"),y(39,"Profit"),g()()(),m(40,"tbody",6),de(41,cG,25,6,"tr",4),g()()(),m(42,"div",0)(43,"h2"),y(44),g(),m(45,"h2"),y(46),g(),m(47,"table",7)(48,"thead")(49,"tr",2)(50,"th"),y(51,"Date"),g(),m(52,"th"),y(53,"Start time"),g(),m(54,"th"),y(55,"End time"),g(),m(56,"th"),y(57,"Hourly wage"),g(),m(58,"th"),y(59,"Workplace"),g(),m(60,"th"),y(61,"Profit"),g()()(),m(62,"tbody",8),de(63,uG,25,6,"tr",4),g()()()),i&2&&(C(21),L("ngForOf",s.upcomingShifts),C(20),L("ngForOf",s.pastWeekShifts),C(3),Dn("Best Month: ",s.bestMonth,""),C(2),Dn("Total Profit: ",s.bestMonthProfit,""),C(17),L("ngForOf",s.bestMonthShifts))},dependencies:[yd,Ye],styles:[".shift-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0}.table[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;border-radius:10px;padding:10px;margin-top:30px;background-color:#395b64;color:#e7f6f2}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.mobile[_ngcontent-%COMP%]{display:none}.shift-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395b64;padding:20px}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333}@media (max-width: 850px){.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%]{background-color:#2c3333;margin-top:0}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{font-weight:700}.shift-table[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:10px}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;border:1px solid #395B64;border-radius:8px;background-color:#395b64;color:#e7f6f2}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}@media (min-width: 551px) and (max-width: 850px){.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:5px;justify-content:center}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:calc(50% - 5px)}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}"]});let t=e;return t})();var JR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(D($n),D(In))},e.\u0275dir=Re({type:e});let t=e;return t})(),ME=(()=>{let e=class e extends JR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275dir=Re({type:e,features:[Cn]});let t=e;return t})(),Hf=new k("NgValueAccessor");var lG={provide:Hf,useExisting:gr(()=>Nt),multi:!0};function dG(){let t=vr()?vr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hG=new k("CompositionEventMode"),Nt=(()=>{let e=class e extends JR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dG())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(D($n),D(In),D(hG,8))},e.\u0275dir=Re({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&he("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ui([lG]),Cn]});let t=e;return t})();function mi(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function XR(t){return t!=null&&typeof t.length=="number"}var NE=new k("NgValidators"),eM=new k("NgAsyncValidators"),fG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,re=class{static min(e){return pG(e)}static max(e){return mG(e)}static required(e){return tM(e)}static requiredTrue(e){return gG(e)}static email(e){return yG(e)}static minLength(e){return _G(e)}static maxLength(e){return vG(e)}static pattern(e){return wG(e)}static nullValidator(e){return Ff(e)}static compose(e){return aM(e)}static composeAsync(e){return uM(e)}};function pG(t){return e=>{if(mi(e.value)||mi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function mG(t){return e=>{if(mi(e.value)||mi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function tM(t){return mi(t.value)?{required:!0}:null}function gG(t){return t.value===!0?null:{required:!0}}function yG(t){return mi(t.value)||fG.test(t.value)?null:{email:!0}}function _G(t){return e=>mi(e.value)||!XR(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function vG(t){return e=>XR(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function wG(t){if(!t)return Ff;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(mi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Ff(t){return null}function nM(t){return t!=null}function rM(t){return Vi(t)?Ae(t):t}function iM(t){let e={};return t.forEach(n=>{e=n!=null?S(S({},e),n):e}),Object.keys(e).length===0?null:e}function sM(t,e){return e.map(n=>n(t))}function EG(t){return!t.validate}function oM(t){return t.map(e=>EG(e)?e:n=>e.validate(n))}function aM(t){if(!t)return null;let e=t.filter(nM);return e.length==0?null:function(n){return iM(sM(n,e))}}function cM(t){return t!=null?aM(oM(t)):null}function uM(t){if(!t)return null;let e=t.filter(nM);return e.length==0?null:function(n){let r=sM(n,e).map(rM);return Rp(r).pipe(Q(iM))}}function lM(t){return t!=null?uM(oM(t)):null}function HR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function dM(t){return t._rawValidators}function hM(t){return t._rawAsyncValidators}function AE(t){return t?Array.isArray(t)?t:[t]:[]}function Lf(t,e){return Array.isArray(t)?t.includes(e):t===e}function qR(t,e){let n=AE(e);return AE(t).forEach(i=>{Lf(n,i)||n.push(i)}),n}function GR(t,e){return AE(e).filter(n=>!Lf(t,n))}var Vf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},oa=class extends Vf{get formDirective(){return null}get path(){return null}},Su=class extends Vf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Uf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},IG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fee=ge(S({},IG),{"[class.ng-submitted]":"isSubmitted"}),sn=(()=>{let e=class e extends Uf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(D(Su,2))},e.\u0275dir=Re({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Yr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Cn]});let t=e;return t})(),on=(()=>{let e=class e extends Uf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(D(oa,10))},e.\u0275dir=Re({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Yr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Cn]});let t=e;return t})();var Tu="VALID",Of="INVALID",sa="PENDING",bu="DISABLED";function PE(t){return(qf(t)?t.validators:t)||null}function CG(t){return Array.isArray(t)?cM(t):t||null}function OE(t,e){return(qf(e)?e.asyncValidators:t)||null}function DG(t){return Array.isArray(t)?lM(t):t||null}function qf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function fM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new N(1e3,"");if(!r[n])throw new N(1001,"")}function pM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new N(1002,"")})}var aa=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tu}get invalid(){return this.status===Of}get pending(){return this.status==sa}get disabled(){return this.status===bu}get enabled(){return this.status!==bu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GR(e,this._rawAsyncValidators))}hasValidator(e){return Lf(this._rawValidators,e)}hasAsyncValidator(e){return Lf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sa,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bu,this.errors=null,this._forEachChild(r=>{r.disable(ge(S({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(S({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this._forEachChild(r=>{r.enable(ge(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(S({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tu||this.status===sa)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bu:Tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sa,this._hasOwnPendingAsyncValidator=!0;let n=rM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?bu:this.errors?Of:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sa)?sa:this._anyControlsHaveStatus(Of)?Of:Tu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=DG(this._rawAsyncValidators)}},jf=class extends aa{constructor(e,n,r){super(PE(n),OE(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){pM(this,!0,e),Object.keys(e).forEach(r=>{fM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xE=class extends jf{};var kE=new k("CallSetDisabledState",{providedIn:"root",factory:()=>Gf}),Gf="always";function TG(t,e){return[...e.path,t]}function WR(t,e,n=Gf){FE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),SG(t,e),xG(t,e),AG(t,e),bG(t,e)}function zR(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$f(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Bf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function FE(t,e){let n=dM(t);e.validator!==null?t.setValidators(HR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=hM(t);e.asyncValidator!==null?t.setAsyncValidators(HR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Bf(e._rawValidators,i),Bf(e._rawAsyncValidators,i)}function $f(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=dM(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=hM(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Bf(e._rawValidators,r),Bf(e._rawAsyncValidators,r),n}function SG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&mM(t,e)})}function AG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&mM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function mM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function RG(t,e){t==null,FE(t,e)}function MG(t,e){return $f(t,e)}function NG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function PG(t){return Object.getPrototypeOf(t.constructor)===ME}function OG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Nt?n=s:PG(s)?r=s:i=s}),i||r||n||null}function FG(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function QR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var kf=class extends aa{constructor(e=null,n,r){super(PE(n),OE(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(QR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){QR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LG=t=>t instanceof kf;var lr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Re({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var VG=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Xe({});let t=e;return t})();var gM=new k("NgModelWithFormControlWarning");var UG={provide:oa,useExisting:gr(()=>Gt)},Gt=(()=>{let e=class e extends oa{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ft,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($f(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return WR(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){zR(r.control||null,r,!1),FG(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,OG(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(zR(i||null,r),LG(s)&&(WR(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);RG(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&MG(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FE(this.form,this),this._oldForm&&$f(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(D(NE,10),D(eM,10),D(kE,8))},e.\u0275dir=Re({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&he("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ui([UG]),Cn,_r]});let t=e;return t})();var jG={provide:Su,useExisting:gr(()=>Wt)},Wt=(()=>{let e=class e extends Su{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ft,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=kG(this,o)}ngOnChanges(r){this._added||this._setUpControl(),NG(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return TG(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(D(oa,13),D(NE,10),D(eM,10),D(Hf,10),D(gM,8))},e.\u0275dir=Re({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ui([jG]),Cn,_r]});let t=e;return t})(),BG={provide:Hf,useExisting:gr(()=>gi),multi:!0};function yM(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function $G(t){return t.split(":")[0]}var gi=(()=>{let e=class e extends ME{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=yM(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=$G(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275dir=Re({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&he("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ui([BG]),Cn]});let t=e;return t})(),ca=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(yM(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(D(In),D($n),D(gi,9))},e.\u0275dir=Re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),HG={provide:Hf,useExisting:gr(()=>_M),multi:!0};function YR(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function qG(t){return t.split(":")[0]}var _M=(()=>{let e=class e extends ME{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let u=a[c],l=this._getOptionValue(u.value);s.push(l)}}else{let a=i.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let l=this._getOptionValue(u.value);s.push(l)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=qG(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275dir=Re({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&he("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ui([HG]),Cn]});let t=e;return t})(),ua=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(YR(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(YR(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(D(In),D($n),D(_M,9))},e.\u0275dir=Re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var GG=(()=>{let e=class e{constructor(){this._validator=Ff}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ff,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Re({type:e,features:[_r]});let t=e;return t})();var WG={provide:NE,useExisting:gr(()=>Mn),multi:!0};var Mn=(()=>{let e=class e extends GG{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bi,this.createValidator=r=>tM}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Kr(e)))(s||e)}})(),e.\u0275dir=Re({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Ya("required",s._enabled?"":null)},inputs:{required:"required"},features:[Ui([WG]),Cn]});let t=e;return t})();var vM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Xe({imports:[VG]});let t=e;return t})(),RE=class extends aa{constructor(e,n,r){super(PE(n),OE(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){pM(this,!1,e),e.forEach((r,i)=>{fM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function ZR(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var an=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return ZR(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new jf(s,o)}record(r,i=null){let s=this._reduceControls(r);return new xE(s,i)}control(r,i,s){let o={};return this.useNonNullable?(ZR(i)?o=i:(o.validators=i,o.asyncValidators=s),new kf(r,ge(S({},o),{nonNullable:!0}))):new kf(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new RE(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof kf)return r;if(r instanceof aa)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:kE,useValue:r.callSetDisabledState??Gf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Xe({imports:[vM]});let t=e;return t})(),cn=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:gM,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:kE,useValue:r.callSetDisabledState??Gf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Xe({imports:[vM]});let t=e;return t})();function zG(t,e){t&1&&(_g(0),m(1,"li",10),y(2,"Login"),g(),vg())}function KG(t,e){if(t&1){let n=Li();m(0,"li",11),he("click",function(){wn(n);let i=Qe(2);return En(i.logout())}),y(1,"Log Out"),g()}}function QG(t,e){if(t&1&&(m(0,"div")(1,"ul",1)(2,"div",2)(3,"li",3),y(4,"Home"),g(),m(5,"li",4),y(6,"My Shifts"),g(),m(7,"li",5),y(8,"Add Shift"),g()(),m(9,"div",6),z(10,"p"),m(11,"li",7),y(12),g(),de(13,zG,3,0,"ng-container",8)(14,KG,2,0,"ng-template",null,9,oT),g()()()),t&2){let n=rT(15),r=Qe();C(12),Dn("Hello ",r.userName,""),C(1),L("ngIf",!r.isLoggedIn)("ngIfElse",n)}}var EM=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.router=i,this.auth=s,this.userName="",this.isNavbarVisible=!0,this.router.events.subscribe(o=>{o instanceof Gi&&(this.isNavbarVisible=!["/login","/register"].includes(o.url))})}ngOnInit(){this.authService.authStateChange.subscribe(r=>{if(this.isLoggedIn=r,r){let i=this.auth.currentUser;i&&this.authService.getFormData(i.uid).then(s=>{s&&(this.userName=s.firstName)})}else this.userName=""})}logout(){Ae(OS(this.auth)).subscribe(()=>{this.router.navigate(["/login"])})}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(ut),D(Ze))},e.\u0275cmp=Ue({type:e,selectors:[["app-navbar"]],standalone:!0,features:[je],decls:1,vars:1,consts:[[4,"ngIf"],[1,"navbar"],[1,"left"],["routerLink","/home","routerLinkActive","active"],["routerLink","/shifts","routerLinkActive","active"],["routerLink","/addshift","routerLinkActive","active"],[1,"right"],["routerLink","/profile","routerLinkActive","active"],[4,"ngIf","ngIfElse"],["loggedIn",""],["routerLink","/login","routerLinkActive","active"],[3,"click"]],template:function(i,s){i&1&&de(0,QG,16,3,"div",0),i&2&&L("ngIf",s.isNavbarVisible)},dependencies:[db,Ye,Hn],styles:[".navbar[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;background-color:#395b64;border-radius:10px;color:#e7f6f2;list-style:none;padding:10px;margin:0;display:flex;justify-content:space-between;box-shadow:0 2px 5px #0000001a}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;align-items:center}.left[_ngcontent-%COMP%]{width:60%;justify-content:space-evenly}.right[_ngcontent-%COMP%]{width:40%;justify-content:space-evenly}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;border-radius:5px;transition:background-color .3s ease,transform .2s ease;text-align:center;cursor:pointer}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333;transform:scale(1.05)}"]});let t=e;return t})();function YG(t,e){t&1&&(m(0,"div",17),y(1," Invalid email format. "),g())}function ZG(t,e){t&1&&(m(0,"div",17),y(1," Password must be at least 6 characters long. "),g())}function JG(t,e){t&1&&(m(0,"div",17),y(1," Passwords do not match. "),g())}function XG(t,e){t&1&&(m(0,"div",17),y(1," First name must be at least 2 characters long. "),g())}function eW(t,e){t&1&&(m(0,"div",17),y(1," Last name must be at least 2 characters long. "),g())}function tW(t,e){t&1&&(m(0,"div",17),y(1," Age must be between 6 and 130. "),g())}var LE=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.fb=i,this.router=s,this.message="",this.registerForm=this.fb.group({email:["",[re.required,re.email]],password:["",[re.required,re.minLength(6)]],confirmPassword:["",[re.required]],firstName:["",[re.required,re.minLength(2)]],lastName:["",[re.required,re.minLength(2)]],birthDate:["",[re.required,this.ageValidator]]},{validators:this.passwordMatchValidator})}onSubmit(){let r=this.registerForm.get("password"),i=this.registerForm.get("confirmPassword");if(r?.value===i?.value){if(this.registerForm.valid){let{email:s,password:o,firstName:a,lastName:c,birthDate:u}=this.registerForm.value;this.authService.register(s,o,a,c,u).then(l=>{this.message="Registration successful",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},l=>{this.message="Registration failed"})}}else this.registerForm.setErrors({passwordMismatch:!0})}goToLogin(){this.router.navigate(["/login"])}passwordMatchValidator(r){let i=r.get("password"),s=r.get("confirmPassword");if(i&&s){let o=i.value,a=s.value;return o===a?null:{passwordMismatch:!0}}return null}ageValidator(r){let i=new Date(r.value),o=new Date().getFullYear()-i.getFullYear();return o<6||o>130?{invalidAge:!0}:null}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(an),D(ut))},e.\u0275cmp=Ue({type:e,selectors:[["app-register"]],standalone:!0,features:[je],decls:34,vars:13,consts:[[1,"form"],[3,"formGroup","ngSubmit"],["for","email"],["formControlName","email","type","email","name","email","required",""],["class","error",4,"ngIf"],["for","password"],["formControlName","password","type","password","name","password","required",""],["for","confirmPassword"],["formControlName","confirmPassword","type","password","name","password-confirm","required",""],["for","firstName"],["formControlName","firstName","type","text","name","first-name","required",""],["for","lastName"],["formControlName","lastName","type","text","name","last-name","required",""],["for","birthDate"],["formControlName","birthDate","type","date","name","birth-date","required",""],["type","submit",3,"disabled"],[3,"click"],[1,"error"]],template:function(i,s){if(i&1&&(m(0,"h1"),y(1,"Register"),g(),m(2,"div",0)(3,"form",1),he("ngSubmit",function(){return s.onSubmit()}),m(4,"label",2),y(5,"Email:"),g(),z(6,"input",3),de(7,YG,2,0,"div",4),m(8,"label",5),y(9,"Password:"),g(),z(10,"input",6),de(11,ZG,2,0,"div",4),m(12,"label",7),y(13,"Confirm Password:"),g(),z(14,"input",8),de(15,JG,2,0,"div",4),m(16,"label",9),y(17,"First Name:"),g(),z(18,"input",10),de(19,XG,2,0,"div",4),m(20,"label",11),y(21,"Last Name:"),g(),z(22,"input",12),de(23,eW,2,0,"div",4),m(24,"label",13),y(25,"Birth Date"),g(),z(26,"input",14),de(27,tW,2,0,"div",4),m(28,"button",15),y(29,"Register"),g(),m(30,"p",16),he("click",function(){return s.goToLogin()}),y(31,"Already have an account? Login here!"),g()(),m(32,"p"),y(33),g()()),i&2){let o,a,c,u,l,d;C(3),L("formGroup",s.registerForm),C(4),L("ngIf",((o=s.registerForm.get("email"))==null?null:o.hasError("email"))&&((o=s.registerForm.get("email"))==null?null:o.touched)),C(4),L("ngIf",((a=s.registerForm.get("password"))==null?null:a.hasError("minlength"))&&((a=s.registerForm.get("password"))==null?null:a.touched)),C(4),L("ngIf",s.registerForm.hasError("passwordMismatch")&&((c=s.registerForm.get("confirmPassword"))==null?null:c.touched)),C(4),L("ngIf",((u=s.registerForm.get("firstName"))==null?null:u.hasError("minlength"))&&((u=s.registerForm.get("firstName"))==null?null:u.touched)),C(4),L("ngIf",((l=s.registerForm.get("lastName"))==null?null:l.hasError("minlength"))&&((l=s.registerForm.get("lastName"))==null?null:l.touched)),C(4),L("ngIf",((d=s.registerForm.get("birthDate"))==null?null:d.hasError("invalidAge"))&&((d=s.registerForm.get("birthDate"))==null?null:d.touched)),C(1),L("disabled",s.registerForm.invalid),C(4),Yr("successful",s.message==="Registration successful")("error",s.message==="Registration failed"),C(1),J(s.message)}},dependencies:[cn,lr,Nt,sn,on,Mn,Gt,Wt,Hn,Ye],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-family:Arial,sans-serif}"]});let t=e;return t})();function nW(t,e){t&1&&(m(0,"div",9),y(1," Invalid email format. "),g())}function rW(t,e){t&1&&(m(0,"div",9),y(1," Password must be at least 6 characters long. "),g())}var VE=(()=>{let e=class e{constructor(r,i,s,o){this.authService=r,this.fb=i,this.router=s,this.auth=o,this.message="",this.loginForm=this.fb.group({email:["",[re.required,re.email]],password:["",[re.required]]})}onSubmit(){if(this.loginForm.valid){let{email:r,password:i}=this.loginForm.value;hh(this.auth,r,i).then(s=>{this.router.navigate(["/home"])}).catch(s=>{this.message="Authentication failed"})}}onLoginSuccess(){this.router.navigate(["/home"])}goToRegister(){this.router.navigate(["/register"])}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(an),D(ut),D(Ze))},e.\u0275cmp=Ue({type:e,selectors:[["app-login"]],standalone:!0,features:[je],decls:18,vars:8,consts:[[1,"form"],[3,"formGroup","ngSubmit"],["for","email"],["formControlName","email","type","email","name","email","required",""],["class","error",4,"ngIf"],["for","password"],["formControlName","password","type","password","name","password","required",""],["type","submit"],[3,"click"],[1,"error"]],template:function(i,s){if(i&1&&(m(0,"h1"),y(1,"Login"),g(),m(2,"div",0)(3,"form",1),he("ngSubmit",function(){return s.onSubmit()}),m(4,"label",2),y(5,"Email:"),g(),z(6,"input",3),de(7,nW,2,0,"div",4),m(8,"label",5),y(9,"Password:"),g(),z(10,"input",6),de(11,rW,2,0,"div",4),m(12,"button",7),y(13,"Login"),g(),m(14,"p",8),he("click",function(){return s.goToRegister()}),y(15,"Don't have an account? Register here!"),g()(),m(16,"p"),y(17),g()()),i&2){let o,a;C(3),L("formGroup",s.loginForm),C(4),L("ngIf",((o=s.loginForm.get("email"))==null?null:o.hasError("email"))&&((o=s.loginForm.get("email"))==null?null:o.touched)),C(4),L("ngIf",((a=s.loginForm.get("password"))==null?null:a.hasError("minlength"))&&((a=s.loginForm.get("password"))==null?null:a.touched)),C(5),Yr("successful",s.message==="Authentication successful")("error",s.message==="Authentication failed"),C(1),Dn(" ",s.message," ")}},dependencies:[cn,lr,Nt,sn,on,Mn,Gt,Wt,Hn,Ye],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:Arial,sans-serif}"]});let t=e;return t})();function iW(t,e){if(t&1){let n=Li();m(0,"tr",20)(1,"td",21),y(2,"Date"),g(),m(3,"td"),y(4),g(),m(5,"td",21),y(6,"Start time"),g(),m(7,"td"),y(8),g(),m(9,"td",21),y(10,"End time"),g(),m(11,"td"),y(12),g(),m(13,"td",21),y(14,"Hourly wage"),g(),m(15,"td"),y(16),g(),m(17,"td",21),y(18,"Workplace"),g(),m(19,"td"),y(20),g(),m(21,"td",21),y(22,"Profit"),g(),m(23,"td"),y(24),g(),m(25,"td",22)(26,"button",23),he("click",function(){let s=wn(n).$implicit,o=Qe();return En(o.editShift(s))}),y(27,"Edit"),g(),m(28,"button",23),he("click",function(){let s=wn(n).$implicit,o=Qe();return En(o.deleteShift(s))}),y(29,"Delete"),g()()()}if(t&2){let n=e.$implicit;C(4),J(n.Date),C(4),J(n.start),C(4),J(n.end),C(4),J(n.wage),C(4),J(n.workplace),C(4),J(n.profit)}}var UE=(()=>{let e=class e{constructor(r,i,s,o,a){this.authService=r,this.firestore=i,this.router=s,this.fb=o,this.auth=a,this.shifts=[],this.bestMonth="",this.bestMonthProfit=0,this.searchForm=this.fb.group({workplace:["any"],start:[""],end:[""]})}filterShifts(){let r=this.searchForm.value;this.loadShifts().then(()=>{this.shifts=this.shifts.filter(i=>{let s=r.workplace==="any"||i.workplace===r.workplace,o=!r.start||new Date(i.Date)>=new Date(r.start),a=!r.end||new Date(i.Date)<=new Date(r.end);return s&&o&&a})})}clearSearch(){this.searchForm.reset({workplace:"any",start:"",end:""}),this.loadShifts()}editShift(r){this.router.navigate(["/editshift",r.id])}deleteShift(r){return p(this,null,function*(){try{let i=this.auth.currentUser;if(i){let s=i.uid,o=Tt(this.firestore,`users/${s}/shifts/${r.id}`);yield Ss(o),this.shifts=this.shifts.filter(a=>a.id!==r.id),this.calculateBestMonth()}else console.error("No authenticated user")}catch(i){console.error("Error deleting shift:",i)}})}ngOnInit(){this.loadShifts()}loadShifts(){return p(this,null,function*(){try{let r=this.auth.currentUser;if(r){let i=r.uid,s=rn(this.firestore,`users/${i}/shifts`),o=yield pi(s);this.shifts=[],o.forEach(a=>{let c=S({id:a.id},a.data());c.profit=Math.round((this.convertTimeToNumber(c.end)-this.convertTimeToNumber(c.start))*Number(c.wage)),this.shifts.push(c)}),this.shifts.sort((a,c)=>{let u=new Date(a.Date),l=new Date(c.Date);return u.getTime()-l.getTime()}),this.calculateBestMonth()}}catch(r){console.error("Error loading shifts:",r)}})}calculateBestMonth(){let r={};this.shifts.forEach(o=>{let a=new Date(o.Date).toLocaleString("default",{month:"long"}),c=this.convertTimeToNumber(o.start),u=this.convertTimeToNumber(o.end),l=Number(o.wage);if(!isNaN(c)&&!isNaN(u)&&!isNaN(l)){let d=(u-c)*l;r[a]?r[a]+=d:r[a]=d}});let i=0,s="";for(let o in r)r[o]>i&&(i=r[o],s=o);this.bestMonth=s,this.bestMonthProfit=i}convertTimeToNumber(r){let[i,s]=r.split(":").map(Number);return i+s/60}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(bt),D(ut),D(an),D(Ze))},e.\u0275cmp=Ue({type:e,selectors:[["app-shifts"]],standalone:!0,features:[je],decls:50,vars:4,consts:[[1,"search",3,"formGroup"],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","any"],["value","option1"],["value","option2"],["value","option3"],["for","start"],["formControlName","start","type","date","name","start","required",""],["for","end"],["formControlName","end","type","date","name","end","required",""],["type","button",3,"click"],[1,"table"],["id","shiftTable",1,"shift-table"],[1,"table-header"],["id","shiftTableBody"],["class","shifts",4,"ngFor","ngForOf"],[1,"display-month"],["colspan","2","id","bestMonth"],["colspan","3","id","bestMonthProfit"],[1,"shifts"],[1,"mobile"],[1,"btn"],[3,"click"]],template:function(i,s){i&1&&(m(0,"h1"),y(1,"Shifts"),g(),m(2,"div",0)(3,"label",1),y(4,"Workplace:"),g(),m(5,"select",2)(6,"option",3),y(7,"Any"),g(),m(8,"option",4),y(9,"Option 1"),g(),m(10,"option",5),y(11,"Option 2"),g(),m(12,"option",6),y(13,"Option 3"),g()(),m(14,"label",7),y(15,"Start date:"),g(),z(16,"input",8),m(17,"label",9),y(18,"End date:"),g(),z(19,"input",10),m(20,"button",11),he("click",function(){return s.filterShifts()}),y(21,"Search"),g(),m(22,"button",11),he("click",function(){return s.clearSearch()}),y(23,"Clear"),g()(),m(24,"div",12)(25,"table",13)(26,"thead")(27,"tr",14)(28,"th"),y(29,"Date"),g(),m(30,"th"),y(31,"Start time"),g(),m(32,"th"),y(33,"End time"),g(),m(34,"th"),y(35,"Hourly wage"),g(),m(36,"th"),y(37,"Workplace"),g(),m(38,"th"),y(39,"Profit"),g()()(),m(40,"tbody",15),de(41,iW,30,6,"tr",16),g(),m(42,"tfoot")(43,"tr",17)(44,"th"),y(45,"Best Month"),g(),m(46,"th",18),y(47),g(),m(48,"th",19),y(49),g()()()()()),i&2&&(C(2),L("formGroup",s.searchForm),C(39),L("ngForOf",s.shifts),C(6),J(s.bestMonth),C(2),J(s.bestMonthProfit))},dependencies:[yd,Ye,DE,cn,ca,ua,Nt,gi,sn,on,Mn,Gt,Wt],styles:[".shift-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:70px;box-sizing:border-box;margin-bottom:10px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}.search[_ngcontent-%COMP%]{height:50px;display:flex;justify-content:center;align-items:center;background-color:#395b64;border-radius:8px;box-shadow:0 0 10px #0000001a;padding:20px;text-align:center;margin-top:30px}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}.table[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;border-radius:10px;padding:10px;margin-top:30px;background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{display:none}.shift-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395b64;padding:20px}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2c3333;color:#e7f6f2}@media (max-width: 850px){.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.search[_ngcontent-%COMP%]{flex-direction:column;height:100%;width:80%;margin:auto}.table[_ngcontent-%COMP%]{background-color:#2c3333;margin-top:0}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{font-weight:700}.shift-table[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:10px}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;border:1px solid #395B64;border-radius:8px;background-color:#395b64;color:#e7f6f2}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}@media (min-width: 551px) and (max-width: 850px){.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:5px;justify-content:center}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:calc(50% - 5px)}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}button[_ngcontent-%COMP%]{display:inline-block;width:100px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}"]});let t=e;return t})();var sW=t=>({successful:t}),IM=(()=>{let e=class e{constructor(r,i,s,o){this.fb=r,this.authService=i,this.auth=s,this.firestore=o,this.message="",this.successClass=!1,this.shiftForm=this.fb.group({Date:["",re.required],start:["",re.required],end:["",re.required],wage:["",re.required],workplace:["",re.required],name:["",re.required],comments:["",re.required]})}onSubmit(){if(!this.shiftForm.valid)return;let r=this.auth.currentUser?.uid,i=BR(this.firestore,`users/${r}/shifts`),s=this.shiftForm.value;jR(i,s).then(()=>{this.handleSuccess()}).catch(o=>{this.handleError(new Error("Failed to save shift data"))})}handleSuccess(){this.message="Shift saved successfully",this.successClass=!0,setTimeout(()=>{this.successClass=!1,this.shiftForm.reset(),this.message=""},2e3)}handleError(r){this.message=`Error saving shift: ${r.message}`}};e.\u0275fac=function(i){return new(i||e)(D(an),D(ot),D(Ze),D(bt))},e.\u0275cmp=Ue({type:e,selectors:[["app-addshift"]],standalone:!0,features:[je],decls:36,vars:5,consts:[[1,"form"],[3,"formGroup","ngSubmit"],["for","Date"],["formControlName","Date","type","date","name","birth-date","required",""],["for","Start"],["formControlName","start","type","time","name","start","required",""],["for","End"],["formControlName","end","type","time","name","end","required",""],["for","wage"],["formControlName","wage","type","text","name","wage","required",""],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","option1"],["value","option2"],["value","option3"],["for","name"],["formControlName","name","type","text","name","name","required",""],["for","comments"],["formControlName","comments","type","text","name","comments","required",""],["type","submit"],[3,"ngClass"]],template:function(i,s){i&1&&(m(0,"div")(1,"h1"),y(2,"Add Shift"),g()(),m(3,"div",0)(4,"form",1),he("ngSubmit",function(){return s.onSubmit()}),m(5,"label",2),y(6,"Date"),g(),z(7,"input",3),m(8,"label",4),y(9,"Start time:"),g(),z(10,"input",5),m(11,"label",6),y(12,"End time:"),g(),z(13,"input",7),m(14,"label",8),y(15,"Hourly wage:"),g(),z(16,"input",9),m(17,"label",10),y(18,"Workplace:"),g(),m(19,"select",11)(20,"option",12),y(21,"Option 1"),g(),m(22,"option",13),y(23,"Option 2"),g(),m(24,"option",14),y(25,"Option 3"),g()(),m(26,"label",15),y(27,"Shift name:"),g(),z(28,"input",16),m(29,"label",17),y(30,"Comments:"),g(),z(31,"input",18),m(32,"button",19),y(33,"Save"),g(),m(34,"p",20),y(35),g()()()),i&2&&(C(4),L("formGroup",s.shiftForm),C(30),L("ngClass",ji(3,sW,s.successClass)),C(1),J(s.message))},dependencies:[wM,lr,ca,ua,Nt,gi,sn,on,Mn,cn,Gt,Wt,po,Ye],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();var oW=t=>({successful:t});function aW(t,e){if(t&1&&(m(0,"div",21),y(1),g()),t&2){let n=Qe();L("ngClass",ji(2,oW,n.successClass)),C(1),J(n.message)}}var Wf=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.fb=r,this.authService=i,this.route=s,this.router=o,this.auth=a,this.firestore=c,this.message="",this.successClass=!1,this.shiftForm=this.fb.group({Date:[""],start:[""],end:[""],wage:[""],workplace:[""],name:[""],comments:[""]})}ngOnInit(){this.route.paramMap.subscribe(r=>{let i=r.get("id");this.shiftId=i!==null?i:"",this.loadShiftData()})}loadShiftData(){return p(this,null,function*(){try{if(this.shiftId){let r=yield this.authService.getShiftById(this.shiftId);r?this.shiftForm.patchValue({Date:r.Date||"",start:r.start||"",end:r.end||"",wage:r.wage||"",workplace:r.workplace||"",name:r.name||"",comments:r.comments||""}):console.error("Shift not found")}}catch(r){console.error("Error loading shift data:",r)}})}onSubmit(){if(this.shiftForm.valid){let r=this.shiftForm.value,i=this.auth.currentUser?.uid,s=Tt(this.firestore,`users/${i}/shifts/${this.shiftId}`);bs(s,r).then(()=>{this.message="Shift saved successfully",this.successClass=!0,setTimeout(()=>{this.successClass=!1,this.shiftForm.reset(),this.router.navigate(["/shifts"])},2e3)}).catch(o=>{this.message=`Error saving shift: ${o.message}`})}}};e.\u0275fac=function(i){return new(i||e)(D(an),D(ot),D(wr),D(ut),D(Ze),D(bt))},e.\u0275cmp=Ue({type:e,selectors:[["app-editshift"]],standalone:!0,features:[je],decls:34,vars:2,consts:[[1,"form"],[3,"formGroup","ngSubmit"],["for","Date"],["formControlName","Date","type","date","name","birth-date","required",""],["for","Start"],["formControlName","start","type","time","name","start","required",""],["for","End"],["formControlName","end","type","time","name","end","required",""],["for","wage"],["formControlName","wage","type","text","name","wage","required",""],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","option1"],["value","option2"],["value","option3"],["for","name"],["formControlName","name","type","text","name","name","required",""],["for","comments"],["formControlName","comments","type","text","name","comments","required",""],["type","submit"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(i,s){i&1&&(m(0,"h1"),y(1,"Edit shift"),g(),m(2,"div",0)(3,"form",1),he("ngSubmit",function(){return s.onSubmit()}),m(4,"label",2),y(5,"Date"),g(),z(6,"input",3),m(7,"label",4),y(8,"Start time:"),g(),z(9,"input",5),m(10,"label",6),y(11,"End time:"),g(),z(12,"input",7),m(13,"label",8),y(14,"Hourly wage:"),g(),z(15,"input",9),m(16,"label",10),y(17,"Workplace:"),g(),m(18,"select",11)(19,"option",12),y(20,"Option 1"),g(),m(21,"option",13),y(22,"Option 2"),g(),m(23,"option",14),y(24,"Option 3"),g()(),m(25,"label",15),y(26,"Shift name:"),g(),z(27,"input",16),m(28,"label",17),y(29,"Comments:"),g(),z(30,"input",18),m(31,"button",19),y(32,"Save"),g(),de(33,aW,2,4,"div",20),g()()),i&2&&(C(3),L("formGroup",s.shiftForm),C(30),L("ngIf",s.message))},dependencies:[cn,lr,ca,ua,Nt,gi,sn,on,Mn,Gt,Wt,Hn,Ye,po],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();function cW(t,e){t&1&&(m(0,"div",11),y(1," Email must be in a valid format. "),g())}function uW(t,e){t&1&&(m(0,"div",11),y(1," First Name must have at least 2 characters. "),g())}function lW(t,e){t&1&&(m(0,"div",11),y(1," Last Name must have at least 2 characters. "),g())}function dW(t,e){t&1&&(m(0,"div",11),y(1," Age must be between 6 and 130. "),g())}var CM=t=>({successful:t});function hW(t,e){if(t&1&&(m(0,"div",12),y(1),g()),t&2){let n=Qe(2);L("ngClass",ji(2,CM,n.message.includes("successfully"))),C(1),J(n.message)}}function fW(t,e){if(t&1){let n=Li();m(0,"div",1)(1,"form",2)(2,"label"),y(3,"Email:"),g(),z(4,"input",3),de(5,cW,2,0,"div",4),m(6,"label"),y(7,"First Name:"),g(),z(8,"input",5),de(9,uW,2,0,"div",4),m(10,"label"),y(11,"Last Name:"),g(),z(12,"input",6),de(13,lW,2,0,"div",4),m(14,"label"),y(15,"Birth Date:"),g(),z(16,"input",7),de(17,dW,2,0,"div",4),m(18,"button",8),he("click",function(){wn(n);let i=Qe();return En(i.onUpdate())}),y(19,"Update"),g(),m(20,"button",8),he("click",function(){wn(n);let i=Qe();return En(i.onDelete())}),y(21,"Delete"),g(),m(22,"p",9),he("click",function(){wn(n);let i=Qe();return En(i.toggleChangePasswordMode())}),y(23,"Change password"),g()(),de(24,hW,2,4,"div",10),g()}if(t&2){let n=Qe(),r,i,s,o;C(1),L("formGroup",n.profileForm),C(4),L("ngIf",((r=n.profileForm.get("email"))==null?null:r.invalid)&&(((r=n.profileForm.get("email"))==null?null:r.dirty)||((r=n.profileForm.get("email"))==null?null:r.touched))),C(4),L("ngIf",((i=n.profileForm.get("firstName"))==null?null:i.invalid)&&(((i=n.profileForm.get("firstName"))==null?null:i.dirty)||((i=n.profileForm.get("firstName"))==null?null:i.touched))),C(4),L("ngIf",((s=n.profileForm.get("lastName"))==null?null:s.invalid)&&(((s=n.profileForm.get("lastName"))==null?null:s.dirty)||((s=n.profileForm.get("lastName"))==null?null:s.touched))),C(4),L("ngIf",((o=n.profileForm.get("birthDate"))==null?null:o.invalid)&&(((o=n.profileForm.get("birthDate"))==null?null:o.dirty)||((o=n.profileForm.get("birthDate"))==null?null:o.touched))),C(7),L("ngIf",n.message)}}function pW(t,e){t&1&&(m(0,"div",11),y(1," Old Password is incorrect. "),g())}function mW(t,e){if(t&1&&(m(0,"div",11),y(1),g()),t&2){let n=Qe(2);C(1),Dn(" ",n.message," ")}}function gW(t,e){t&1&&(m(0,"div",11),y(1," New Password must be at least 6 characters long. "),g())}function yW(t,e){if(t&1&&(m(0,"div",12),y(1),g()),t&2){let n=Qe(2);L("ngClass",ji(2,CM,n.message.includes("successfully"))),C(1),J(n.message)}}function _W(t,e){if(t&1){let n=Li();m(0,"div",1)(1,"form",2)(2,"label"),y(3,"Old Password:"),g(),z(4,"input",13),de(5,pW,2,0,"div",4)(6,mW,2,1,"div",4),m(7,"label"),y(8,"New Password:"),g(),z(9,"input",14),de(10,gW,2,0,"div",4),m(11,"button",8),he("click",function(){wn(n);let i=Qe();return En(i.onChangePassword())}),y(12,"Update"),g(),m(13,"button",8),he("click",function(){wn(n);let i=Qe();return En(i.toggleChangePasswordMode())}),y(14,"Cancel"),g()(),de(15,yW,2,4,"div",10),g()}if(t&2){let n=Qe(),r,i;C(1),L("formGroup",n.passwordForm),C(4),L("ngIf",((r=n.passwordForm.get("oldPassword"))==null?null:r.invalid)&&((r=n.passwordForm.get("oldPassword"))==null?null:r.dirty)),C(1),L("ngIf",n.message&&n.message.includes("Old password is incorrect")),C(4),L("ngIf",((i=n.passwordForm.get("newPassword"))==null?null:i.invalid)&&((i=n.passwordForm.get("newPassword"))==null?null:i.dirty)),C(5),L("ngIf",n.message&&!n.message.includes("Old password is incorrect"))}}var jE=(()=>{let e=class e{constructor(r,i,s,o,a){this.authService=r,this.fb=i,this.auth=s,this.firestore=o,this.router=a,this.message="",this.changePasswordMode=!1,this.profileForm=this.fb.group({email:["",[re.required,re.email]],firstName:["",[re.required,re.minLength(2)]],lastName:["",[re.required,re.minLength(2)]],birthDate:["",[re.required,this.ageValidator]]}),this.passwordForm=this.fb.group({oldPassword:["",[re.required]],newPassword:["",[re.required,re.minLength(6)]]})}ngOnInit(){let r=this.auth.currentUser;r&&(this.currentUser=r,this.populateForm())}populateForm(){this.authService.getFormData(this.currentUser.uid).then(r=>{setTimeout(()=>{this.profileForm.patchValue({email:r.email||this.currentUser.email,firstName:r.firstName||this.currentUser.firstName||"",lastName:r.lastName||this.currentUser.lastName||"",birthDate:r.birthDate||this.currentUser.birthDate||""})})})}onUpdate(){if(this.profileForm.valid){let{email:r,firstName:i,lastName:s,birthDate:o}=this.profileForm.value,a=this.currentUser.uid,c=Tt(this.firestore,"users",a),u=rn(this.firestore,`users/${a}/formData`),l=Tt(u,a);Promise.all([bs(c,{email:r,firstName:i,lastName:s,birthDate:o},{merge:!0}),bs(l,{email:r,firstName:i,lastName:s,birthDate:o},{merge:!0})]).then(()=>{this.message="Profile updated successfully",setTimeout(()=>{this.message=""},2e3)}).catch(d=>{this.message="Failed to update profile"})}else this.markFormFieldsAsTouched(this.profileForm)}onDelete(){(()=>p(this,null,function*(){try{if(this.currentUser&&this.currentUser.uid){let i=rn(this.firestore,`users/${this.currentUser.uid}/shifts`),s=yield pi(i);for(let u of s.docs)yield Ss(u.ref);let o=rn(this.firestore,`users/${this.currentUser.uid}/formData`),a=yield pi(o);for(let u of a.docs)yield Ss(u.ref);let c=Tt(this.firestore,`users/${this.currentUser.uid}`);yield Ss(c),this.auth.currentUser&&(yield this.auth.currentUser.delete()),this.currentUser=null,this.profileForm.reset(),this.message="Account deleted successfully",setTimeout(()=>{this.router.navigateByUrl("/login")},1e3)}}catch{this.message="Failed to delete account"}}))()}ageValidator(r){let i=new Date(r.value),s=new Date().getFullYear()-i.getFullYear();return s>=6&&s<=130?null:{ageRange:!0}}toggleChangePasswordMode(){this.changePasswordMode=!this.changePasswordMode,this.changePasswordMode||(this.passwordForm.reset(),this.message="")}onChangePassword(){if(this.passwordForm.valid){let r=this.passwordForm.get("oldPassword");if(r){let{oldPassword:i,newPassword:s}=this.passwordForm.value;this.authService.updatePassword(i,s).then(()=>{this.message="Password changed successfully",setTimeout(()=>{this.message="",this.passwordForm.reset(),this.toggleChangePasswordMode()},2e3)}).catch(o=>{r.setErrors(null),r.setErrors({incorrectPassword:!0})})}}else this.markFormFieldsAsTouched(this.passwordForm)}markFormFieldsAsTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(an),D(Ze),D(bt),D(ut))},e.\u0275cmp=Ue({type:e,selectors:[["app-profile"]],standalone:!0,features:[je],decls:4,vars:2,consts:[["class","form",4,"ngIf"],[1,"form"],[3,"formGroup"],["type","text","formControlName","email"],["class","error",4,"ngIf"],["type","text","formControlName","firstName"],["type","text","formControlName","lastName"],["type","date","formControlName","birthDate"],["type","button",3,"click"],[3,"click"],[3,"ngClass",4,"ngIf"],[1,"error"],[3,"ngClass"],["type","password","formControlName","oldPassword"],["type","password","formControlName","newPassword"]],template:function(i,s){i&1&&(m(0,"h1"),y(1,"Profile"),g(),de(2,fW,25,6,"div",0)(3,_W,16,5,"div",0)),i&2&&(C(2),L("ngIf",!s.changePasswordMode&&s.currentUser),C(1),L("ngIf",s.changePasswordMode))},dependencies:[cn,lr,Nt,sn,on,Gt,Wt,Ye,po,Hn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();var yi=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(r,i){return this.authService.authStateChange.pipe(Qt(1),Q(s=>!!s||this.checkLocalStorage()||i.url==="/register"?(console.log("Allow access."),!0):(i.url!=="/login"&&this.router.navigate(["/login"]),!1)))}checkLocalStorage(){return localStorage.getItem("isAuthenticated")==="true"}};e.\u0275fac=function(i){return new(i||e)(U(ot),U(ut))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var DM=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:SE,canActivate:[yi]},{path:"register",component:LE},{path:"login",component:VE},{path:"shifts",component:UE,canActivate:[yi]},{path:"addshift",component:IM,canActivate:[yi]},{path:"editshift",component:Wf,canActivate:[yi]},{path:"profile",component:jE,canActivate:[yi]},{path:"editshift/:id",component:Wf,canActivate:[yi]}];var TM={providers:[hb(DM),qa(Ub(()=>jb({projectId:"shiftbuilder-ed2e0",appId:"1:667360274742:web:9e25358a7e2ea342c66b97",storageBucket:"shiftbuilder-ed2e0.appspot.com",apiKey:"AIzaSyCsKEm9m-zftadgt8KnnqH3EYAGl212Py4",authDomain:"shiftbuilder-ed2e0.firebaseapp.com",messagingSenderId:"667360274742"}))),qa(MS(()=>NS())),qa(UR(()=>$R()))]};var bM="@firebase/database",SM="1.0.2";var UI="";function vW(t){UI=t}var KE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Co(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var QE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var aN=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KE(e)}}catch{}return new QE},xs=aN("localStorage"),YE=aN("sessionStorage");var pa=new Kn("@firebase/database"),wW=function(){let t=1;return function(){return t++}}(),cN=function(t){let e=Tb(t),n=new Ld;n.update(e);let r=n.digest();return Vd.encodeByteArray(r)},Uu=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Uu.apply(null,r):typeof r=="object"?e+=nt(r):e+=r,e+=" "}return e},Rs=null,AM=!0,EW=function(t,e){T(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(pa.logLevel=X.VERBOSE,Rs=pa.log.bind(pa),e&&YE.set("logging_enabled",!0)):typeof t=="function"?Rs=t:(Rs=null,YE.remove("logging_enabled"))},vt=function(...t){if(AM===!0&&(AM=!1,Rs===null&&YE.get("logging_enabled")===!0&&EW(!0)),Rs){let e=Uu.apply(null,t);Rs(e)}},ju=function(t){return function(...e){vt(t,...e)}},ZE=function(...t){let e="FIREBASE INTERNAL ERROR: "+Uu(...t);pa.error(e)},Ms=function(...t){let e=`FIREBASE FATAL ERROR: ${Uu(...t)}`;throw pa.error(e),new Error(e)},zt=function(...t){let e="FIREBASE WARNING: "+Uu(...t);pa.warn(e)},IW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},CW=function(t){if(Wn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ga="[MIN_NAME]",Ns="[MAX_NAME]",Ca=function(t,e){if(t===e)return 0;if(t===ga||e===Ns)return-1;if(e===ga||t===Ns)return 1;{let n=xM(t),r=xM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},DW=function(t,e){return t===e?0:t<e?-1:1},Au=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nt(e))},jI=function(t){if(typeof t!="object"||t===null)return nt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=nt(e[r]),n+=":",n+=jI(t[e[r]]);return n+="}",n},lN=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function dn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var dN=function(t){T(!uN(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},TW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},bW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var SW=new RegExp("^-?(0*)\\d{1,10}$"),AW=-2147483648,xW=2147483647,xM=function(t){if(SW.test(t)){let e=Number(t);if(e>=AW&&e<=xW)return e}return null},Bu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw zt("Exception was thrown by user callback.",n),e},Math.floor(0))}},RW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var JE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var XE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(e)}},RM=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Kf="5",hN="v",fN="s",pN="r",mN="f",gN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yN="ls",_N="p",eI="ac",vN="websocket",wN="long_polling";var tI=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function MW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function EN(t,e,n){T(typeof e=="string","typeof type must == string"),T(typeof n=="object","typeof params must == object");let r;if(e===vN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===wN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MW(t)&&(n.ns=t.namespace);let i=[];return dn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var nI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){zn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return mb(this.counters_)}};var BE={},$E={};function BI(t){let e=t.toString();return BE[e]||(BE[e]=new nI),BE[e]}function NW(t,e){let n=t.toString();return $E[n]||($E[n]=e()),$E[n]}var rI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Bu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var MM="start",PW="close",OW="pLPCommand",kW="pRTLPCB",IN="id",CN="pw",DN="ser",FW="cb",LW="seg",VW="ts",UW="d",jW="dframe",TN=1870,bN=30,BW=TN-bN,$W=25e3,HW=3e4,iI=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ju(e),this.stats_=BI(n),this.urlFn=c=>(this.appCheckToken&&(c[eI]=this.appCheckToken),EN(n,wN,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new rI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HW)),CW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sI((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===MM)this.id=a,this.password=c;else if(o===PW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[MM]="t",r[DN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hN]=Kf,this.transportSessionId&&(r[fN]=this.transportSessionId),this.lastSessionId&&(r[yN]=this.lastSessionId),this.applicationId&&(r[_N]=this.applicationId),this.appCheckToken&&(r[eI]=this.appCheckToken),typeof location<"u"&&location.hostname&&gN.test(location.hostname)&&(r[pN]=mN);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Wn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TW()&&!bW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=nt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Sy(n),i=lN(r,BW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Wn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[jW]="t",r[IN]=e,r[CN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=nt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},sI=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Wn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=wW(),window[OW+this.uniqueCallbackIdentifier]=e,window[kW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vt("frame writing exception"),a.stack&&vt(a.stack),vt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[IN]=this.myID,e[CN]=this.myPW,e[DN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bN+r.length<=TN;){let o=this.pendingSegs.shift();r=r+"&"+LW+i+"="+o.seg+"&"+VW+i+"="+o.ts+"&"+UW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor($W)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Wn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var qW=16384,GW=45e3,Qf=null;typeof MozWebSocket<"u"?Qf=MozWebSocket:typeof WebSocket<"u"&&(Qf=WebSocket);var xu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ju(this.connId),this.stats_=BI(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[hN]=Kf,!Wn()&&typeof location<"u"&&location.hostname&&gN.test(location.hostname)&&(a[pN]=mN),r&&(a[fN]=r),i&&(a[yN]=i),s&&(a[eI]=s),o&&(a[_N]=o),EN(n,vN,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xs.set("previous_websocket_failure",!0);try{let i;if(Wn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Kf}/${UI}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Qf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Qf!==null&&!t.forceDisallow_}static previouslyFailed(){return xs.isInMemoryStorage||xs.get("previous_websocket_failure")===!0}markConnectionHealthy(){xs.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Co(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(T(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=nt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=lN(r,qW);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(GW))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),WW=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[iI,xu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=xu&&xu.isAvailable(),i=r&&!xu.previouslyFailed();if(n.webSocketOnly&&(r||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),zW=6e4,KW=5e3,QW=10*1024,YW=100*1024,HE="t",NM="d",ZW="s",PM="r",JW="e",OM="o",kM="a",FM="n",LM="p",XW="h",oI=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ju("c:"+this.id+":"),this.transportManager_=new WW(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>YW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(HE in e){let n=e[HE];n===kM?this.upgradeIfSecondaryHealthy_():n===PM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===OM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Au("t",e),r=Au("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:FM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Au("t",e),r=Au("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Au(HE,e);if(NM in e){let r=e[NM];if(n===XW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===FM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ZW?this.onConnectionShutdown_(r):n===PM?this.onReset_(r):n===JW?ZE("Server Error: "+r):n===OM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Kf!==r&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Pu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Yf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Zf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){T(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Jf=class t extends Zf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!wc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var VM=32,UM=768,Ie=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function we(){return new Ie("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vi(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ie(t.pieces_,e)}function SN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ez(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function AN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xN(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ie(e,0)}function at(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ie(n,0)}function oe(t){return t.pieceNum_>=t.pieces_.length}function un(t,e){let n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return un(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function RN(t,e){if(vi(t)!==vi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Pn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(vi(t)>vi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var aI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=AN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Cc(this.parts_[r]);MN(this)}};function tz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Cc(e),MN(t)}function nz(t){let e=t.parts_.pop();t.byteLength_-=Cc(e),t.parts_.length>0&&(t.byteLength_-=1)}function MN(t){if(t.byteLength_>UM)throw new Error(t.errorPrefix_+"has a key path longer than "+UM+" bytes ("+t.byteLength_+").");if(t.parts_.length>VM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+VM+") or object contains a cycle "+As(t))}function As(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var cI=class t extends Zf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ru=1e3,rz=60*5*1e3,jM=30*1e3,iz=1.3,sz=3e4,oz="server_kill",BM=3,$I=(()=>{class t extends Yf{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=ju("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ru,this.maxReconnectDelay_=rz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Wn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Jf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(nt(o)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Ki,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),T(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&zn(n,"w")){let i=Yi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Ib(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jM)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=Eb(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),T(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+nt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ZE("Unrecognized action received from server: "+nt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ru,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ru,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sz&&(this.reconnectDelay_=Ru),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iz)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){T(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?vt("getToken() completed but was canceled"):(vt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new oI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,_=>{zt(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(oz)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&zt(h),u())}}})}interrupt(n){vt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){vt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ec(this.interruptReasons_)&&(this.reconnectDelay_=Ru,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>jI(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Ie(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){vt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=BM&&(this.reconnectDelay_=jM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){vt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=BM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Wn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+UI.replace(/\./g,"-")]=1,wc()?n["framework.cordova"]=1:Ud()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Jf.getInstance().currentlyOnline();return Ec(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),le=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ya=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new le(ga,e),i=new le(ga,n);return this.compare(r,i)!==0}minPost(){return le.MIN}};var zf,Xf=class extends ya{static get __EMPTY_NODE(){return zf}static set __EMPTY_NODE(e){zf=e}compare(e,n){return Ca(e.name,n.name)}isDefinedOn(e){throw Qi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(Ns,zf)}makePost(e,n){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new le(e,zf)}toString(){return".key"}},ma=new Xf;var ha=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Nn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??ln.EMPTY_NODE,this.right=o??ln.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ln.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return ln.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),uI=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ln=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ha(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ha(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ha(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ha(this.root_,null,this.comparator_,!0,e)}};ln.EMPTY_NODE=new uI;function az(t,e){return Ca(t.name,e.name)}function HI(t,e){return Ca(t,e)}var lI;function cz(t){lI=t}var NN=function(t){return typeof t=="number"?"number:"+dN(t):"string:"+t},PN=function(t){if(t.isLeafNode()){let e=t.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zn(e,".sv"),"Priority must be a string or number.")}else T(t===lI||t.isEmpty(),"priority of unexpected type.");T(t===lI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var $M,_a=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PN(this.priorityNode_)}static set __childrenNodeConstructor(n){$M=n}static get __childrenNodeConstructor(){return $M}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return oe(n)?this:ue(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ue(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(T(i!==".priority"||vi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+NN(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=dN(this.value_):n+=this.value_,this.lazyHash_=cN(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(T(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return T(s>=0,"Unknown leaf type: "+r),T(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),ON,kN;function uz(t){ON=t}function lz(t){kN=t}var dI=class extends ya{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(Ns,new _a("[PRIORITY-POST]",kN))}makePost(e,n){let r=ON(e);return new le(n,new _a("[PRIORITY-POST]",r))}toString(){return".priority"}},Et=new dI;var dz=Math.log(2),hI=class{constructor(e){let n=s=>parseInt(Math.log(s)/dz,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ep=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new Nn(h,d.node,Nn.BLACK,null,null);{let f=parseInt(l/2,10)+c,_=i(c,f),w=i(f+1,u);return d=t[f],h=n?n(d):d,new Nn(h,d.node,Nn.BLACK,_,w)}},s=function(c){let u=null,l=null,d=t.length,h=function(_,w){let E=d-_,A=d;d-=_;let $=i(E+1,A),ie=t[E],pe=n?n(ie):ie;f(new Nn(pe,ie.node,w,null,$))},f=function(_){u?(u.left=_,u=_):(l=_,u=_)};for(let _=0;_<c.count;++_){let w=c.nextBitIsOne(),E=Math.pow(2,c.count-(_+1));w?h(E,Nn.BLACK):(h(E,Nn.BLACK),h(E,Nn.RED))}return l},o=new hI(t.length),a=s(o);return new ln(r||e,a)};var qE,da={},va=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return T(da&&Et,"ChildrenNode.ts has not been loaded"),qE=qE||new t({".priority":da},{".priority":Et}),qE}get(e){let n=Yi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ln?n:null}hasIndex(e){return zn(this.indexSet_,e.toString())}addIndex(e,n){T(e!==ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(le.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ep(r,e.getCompare()):a=da;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=Ic(this.indexes_,(i,s)=>{let o=Yi(this.indexSet_,s);if(T(o,"Missing index implementation for "+s),i===da)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(le.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),ep(a,o.getCompare())}else return da;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new le(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ic(this.indexes_,i=>{if(i===da)return i;{let s=n.get(e.name);return s?i.remove(new le(e.name,s)):i}});return new t(r,this.indexSet_)}};var Mu,xe=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&PN(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Mu||(Mu=new t(new ln(HI),null,va.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Mu:r}}getChild(n){let r=ue(n);return r===null?this:this.getImmediateChild(r).getChild(Te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(T(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new le(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Mu:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=ue(n);if(i===null)return r;{T(ue(n)!==".priority"||vi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Et,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+NN(this.getPriority().val())+":"),this.forEachChild(Et,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":cN(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new le(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new le(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new le(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===$u?-1:0}withIndex(n){if(n===ma||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ma||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Et),s=r.getIterator(Et),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ma?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),fI=class extends xe{constructor(){super(new ln(HI),xe.EMPTY_NODE,va.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xe.EMPTY_NODE}isEmpty(){return!1}},$u=new fI;Object.defineProperties(le,{MIN:{value:new le(ga,xe.EMPTY_NODE)},MAX:{value:new le(Ns,$u)}});Xf.__EMPTY_NODE=xe.EMPTY_NODE;_a.__childrenNodeConstructor=xe;cz($u);lz($u);var hz=!0;function wt(t,e=null){if(t===null)return xe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new _a(n,wt(e))}if(!(t instanceof Array)&&hz){let n=[],r=!1;if(dn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=wt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new le(o,c)))}}),n.length===0)return xe.EMPTY_NODE;let s=ep(n,az,o=>o.name,HI);if(r){let o=ep(n,Et.getCompare());return new xe(s,wt(e),new va({".priority":o},{".priority":Et}))}else return new xe(s,wt(e),va.Default)}else{let n=xe.EMPTY_NODE;return dn(t,(r,i)=>{if(zn(t,r)&&r.substring(0,1)!=="."){let s=wt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(wt(e))}}uz(wt);var pI=class extends ya{constructor(e){super(),this.indexPath_=e,T(!oe(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}makePost(e,n){let r=wt(e),i=xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new le(n,i)}maxPost(){let e=xe.EMPTY_NODE.updateChild(this.indexPath_,$u);return new le(Ns,e)}toString(){return AN(this.indexPath_,0).join("/")}};var mI=class extends ya{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ca(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){let r=wt(e);return new le(n,r)}toString(){return".value"}},fz=new mI;function pz(t){return{type:"value",snapshotNode:t}}function mz(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function gz(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function HM(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function yz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var gI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Et}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ns}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Et}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function qM(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Et?n="$priority":t.index_===fz?n="$value":t.index_===ma?n="$key":(T(t.index_ instanceof pI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=nt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+nt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=nt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+nt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function GM(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Et&&(e.i=t.index_.toString()),e}var yI=class t extends Yf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ju("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=qM(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Yi(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=qM(e._queryParams),r=e._path.toString(),i=new Ki;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ji(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Co(a.responseText)}catch{zt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&zt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var _I=class{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function tp(){return{value:null,children:new Map}}function FN(t,e,n){if(oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ue(e);t.children.has(r)||t.children.set(r,tp());let i=t.children.get(r);e=Te(e),FN(i,e,n)}}function vI(t,e,n){t.value!==null?n(e,t.value):_z(t,(r,i)=>{let s=new Ie(e.toString()+"/"+r);vI(i,s,n)})}function _z(t,e){t.children.forEach((n,r)=>{e(r,n)})}var wI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&dn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var WM=10*1e3,vz=30*1e3,wz=5*60*1e3,EI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new wI(e);let r=WM+(vz-WM)*Math.random();Pu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;dn(e,(i,s)=>{s>0&&zn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Pu(this.reportStats_.bind(this),Math.floor(Math.random()*2*wz))}};var Or=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Or||{});function LN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function VN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function UN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var II=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Or.ACK_USER_WRITE,this.source=LN()}operationForChild(e){if(oe(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ie(e));return new t(we(),n,this.revert)}}else return T(ue(this.path)===e,"operationForChild called for unrelated child."),new t(Te(this.path),this.affectedTree,this.revert)}};var wa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Or.OVERWRITE}operationForChild(e){return oe(this.path)?new t(this.source,we(),this.snap.getImmediateChild(e)):new t(this.source,Te(this.path),this.snap)}};var np=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Or.MERGE}operationForChild(e){if(oe(this.path)){let n=this.children.subtree(new Ie(e));return n.isEmpty()?null:n.value?new wa(this.source,we(),n.value):new t(this.source,we(),n)}else return T(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Fu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oe(e))return this.isFullyInitialized()&&!this.filtered_;let n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function Ez(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(yz(o.childName,o.snapshotNode))}),Nu(t,i,"child_removed",e,r,n),Nu(t,i,"child_added",e,r,n),Nu(t,i,"child_moved",s,r,n),Nu(t,i,"child_changed",e,r,n),Nu(t,i,"value",e,r,n),i}function Nu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>Cz(t,a,c)),o.forEach(a=>{let c=Iz(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function Iz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Cz(t,e,n){if(e.childName==null||n.childName==null)throw Qi("Should only compare child_ events.");let r=new le(e.childName,e.snapshotNode),i=new le(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function jN(t,e){return{eventCache:t,serverCache:e}}function Ou(t,e,n,r){return jN(new Fu(e,n,r),t.serverCache)}function BN(t,e,n,r){return jN(t.eventCache,new Fu(e,n,r))}function CI(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ps(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var GE,Dz=()=>(GE||(GE=new ln(DW)),GE),Pt=class t{constructor(e,n=Dz()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return dn(e,(r,i)=>{n=n.set(new Ie(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(oe(e))return null;{let r=ue(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Te(e),n);return s!=null?{path:at(new Ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oe(e))return this;{let n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Te(e)):new t(null)}}set(e,n){if(oe(e))return new t(n,this.children);{let r=ue(e),s=(this.children.get(r)||new t(null)).set(Te(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(oe(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ue(e),r=this.children.get(n);if(r){let i=r.remove(Te(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(oe(e))return this.value;{let n=ue(e),r=this.children.get(n);return r?r.get(Te(e)):null}}setTree(e,n){if(oe(e))return n;{let r=ue(e),s=(this.children.get(r)||new t(null)).setTree(Te(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(we(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(at(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(oe(e))return null;{let s=ue(e),o=this.children.get(s);return o?o.findOnPath_(Te(e),at(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,r){if(oe(e))return this;{this.value&&r(n,this.value);let i=ue(e),s=this.children.get(i);return s?s.foreachOnPath_(Te(e),at(n,i),r):new t(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(at(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var On=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Pt(null))}};function ku(t,e,n){if(oe(e))return new On(new Pt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=un(i,e);return s=s.updateChild(o,n),new On(t.writeTree_.set(i,s))}else{let i=new Pt(n),s=t.writeTree_.setTree(e,i);return new On(s)}}}function zM(t,e,n){let r=t;return dn(n,(i,s)=>{r=ku(r,at(e,i),s)}),r}function KM(t,e){if(oe(e))return On.empty();{let n=t.writeTree_.setTree(e,new Pt(null));return new On(n)}}function DI(t,e){return Os(t,e)!=null}function Os(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(un(n.path,e)):null}function QM(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Et,(r,i)=>{e.push(new le(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new le(r,i.value))}),e}function _i(t,e){if(oe(e))return t;{let n=Os(t,e);return n!=null?new On(new Pt(n)):new On(t.writeTree_.subtree(e))}}function TI(t){return t.writeTree_.isEmpty()}function Ea(t,e){return $N(we(),t.writeTree_,e)}function $N(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(T(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=$N(at(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(at(t,".priority"),r)),n}}function HN(t,e){return KN(e,t)}function Tz(t,e,n,r,i){T(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ku(t.visibleWrites,e,n)),t.lastWriteId=r}function bz(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Sz(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);T(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&Az(a,r.path)?i=!1:Pn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return xz(t),!0;if(r.snap)t.visibleWrites=KM(t.visibleWrites,r.path);else{let a=r.children;dn(a,c=>{t.visibleWrites=KM(t.visibleWrites,at(r.path,c))})}return!0}else return!1}function Az(t,e){if(t.snap)return Pn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Pn(at(t.path,n),e))return!0;return!1}function xz(t){t.visibleWrites=qN(t.allWrites,Rz,we()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rz(t){return t.visible}function qN(t,e,n){let r=On.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Pn(n,o)?(a=un(n,o),r=ku(r,a,s.snap)):Pn(o,n)&&(a=un(o,n),r=ku(r,we(),s.snap.getChild(a)));else if(s.children){if(Pn(n,o))a=un(n,o),r=zM(r,a,s.children);else if(Pn(o,n))if(a=un(o,n),oe(a))r=zM(r,we(),s.children);else{let c=Yi(s.children,ue(a));if(c){let u=c.getChild(Te(a));r=ku(r,we(),u)}}}else throw Qi("WriteRecord should have .snap or .children")}}return r}function GN(t,e,n,r,i){if(!r&&!i){let s=Os(t.visibleWrites,e);if(s!=null)return s;{let o=_i(t.visibleWrites,e);if(TI(o))return n;if(n==null&&!DI(o,we()))return null;{let a=n||xe.EMPTY_NODE;return Ea(o,a)}}}else{let s=_i(t.visibleWrites,e);if(!i&&TI(s))return n;if(!i&&n==null&&!DI(s,we()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Pn(u.path,e)||Pn(e,u.path))},a=qN(t.allWrites,o,e),c=n||xe.EMPTY_NODE;return Ea(a,c)}}}function Mz(t,e,n){let r=xe.EMPTY_NODE,i=Os(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Et,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=_i(t.visibleWrites,e);return n.forEachChild(Et,(o,a)=>{let c=Ea(_i(s,new Ie(o)),a);r=r.updateImmediateChild(o,c)}),QM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=_i(t.visibleWrites,e);return QM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Nz(t,e,n,r,i){T(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=at(e,n);if(DI(t.visibleWrites,s))return null;{let o=_i(t.visibleWrites,s);return TI(o)?i.getChild(n):Ea(o,i.getChild(n))}}function Pz(t,e,n,r){let i=at(e,n),s=Os(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=_i(t.visibleWrites,i);return Ea(o,r.getNode().getImmediateChild(n))}else return null}function Oz(t,e){return Os(t.visibleWrites,e)}function kz(t,e,n,r,i,s,o){let a,c=_i(t.visibleWrites,e),u=Os(c,we());if(u!=null)a=u;else if(n!=null)a=Ea(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function Fz(){return{visibleWrites:On.empty(),allWrites:[],lastWriteId:-1}}function bI(t,e,n,r){return GN(t.writeTree,t.treePath,e,n,r)}function WN(t,e){return Mz(t.writeTree,t.treePath,e)}function YM(t,e,n,r){return Nz(t.writeTree,t.treePath,e,n,r)}function rp(t,e){return Oz(t.writeTree,at(t.treePath,e))}function Lz(t,e,n,r,i,s){return kz(t.writeTree,t.treePath,e,n,r,i,s)}function qI(t,e,n){return Pz(t.writeTree,t.treePath,e,n)}function zN(t,e){return KN(at(t.treePath,e),t.writeTree)}function KN(t,e){return{treePath:t,writeTree:e}}var SI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;T(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,HM(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,gz(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,mz(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,HM(r,e.snapshotNode,i.oldSnap));else throw Qi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var AI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},QN=new AI,Lu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Fu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qI(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ps(this.viewCache_),s=Lz(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Vz(t,e){T(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Uz(t,e,n,r,i){let s=new SI,o,a;if(n.type===Or.OVERWRITE){let u=n;u.source.fromUser?o=xI(t,e,u.path,u.snap,r,i,s):(T(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!oe(u.path),o=ip(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Or.MERGE){let u=n;u.source.fromUser?o=Bz(t,e,u.path,u.children,r,i,s):(T(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=RI(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Or.ACK_USER_WRITE){let u=n;u.revert?o=qz(t,e,u.path,r,i,s):o=$z(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Or.LISTEN_COMPLETE)o=Hz(t,e,n.path,r,s);else throw Qi("Unknown operation type: "+n.type);let c=s.getChanges();return jz(e,o,c),{viewCache:o,changes:c}}function jz(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=CI(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pz(CI(e)))}}function YN(t,e,n,r,i,s){let o=e.eventCache;if(rp(r,n)!=null)return e;{let a,c;if(oe(n))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Ps(e),l=u instanceof xe?u:xe.EMPTY_NODE,d=WN(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=bI(r,Ps(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=ue(n);if(u===".priority"){T(vi(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=YM(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=Te(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=YM(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=qI(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return Ou(e,a,o.isFullyInitialized()||oe(n),t.filter.filtersNodes())}}function ip(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(oe(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=ue(n);if(!c.isCompleteForPath(n)&&vi(n)>1)return e;let _=Te(n),E=c.getNode().getImmediateChild(f).updateChild(_,r);f===".priority"?u=l.updatePriority(c.getNode(),E):u=l.updateChild(c.getNode(),f,E,_,QN,null)}let d=BN(e,u,c.isFullyInitialized()||oe(n),l.filtersNodes()),h=new Lu(i,d,s);return YN(t,d,n,i,h,a)}function xI(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new Lu(i,e,s);if(oe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ou(e,u,!0,t.filter.filtersNodes());else{let d=ue(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ou(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=Te(n),f=a.getNode().getImmediateChild(d),_;if(oe(h))_=r;else{let w=l.getCompleteChild(d);w!=null?SN(h)===".priority"&&w.getChild(xN(h)).isEmpty()?_=w:_=w.updateChild(h,r):_=xe.EMPTY_NODE}if(f.equals(_))c=e;else{let w=t.filter.updateChild(a.getNode(),d,_,h,l,o);c=Ou(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function ZM(t,e){return t.eventCache.isCompleteForChild(e)}function Bz(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=at(n,c);ZM(e,ue(l))&&(a=xI(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=at(n,c);ZM(e,ue(l))||(a=xI(t,a,l,u,i,s,o))}),a}function JM(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function RI(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;oe(n)?u=r:u=new Pt(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),_=JM(t,f,h);c=ip(t,c,new Ie(d),_,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let _=e.serverCache.getNode().getImmediateChild(d),w=JM(t,_,h);c=ip(t,c,new Ie(d),w,i,s,o,a)}}),c}function $z(t,e,n,r,i,s,o){if(rp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(oe(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ip(t,e,n,c.getNode().getChild(n),i,s,a,o);if(oe(n)){let u=new Pt(null);return c.getNode().forEachChild(ma,(l,d)=>{u=u.set(new Ie(l),d)}),RI(t,e,n,u,i,s,a,o)}else return e}else{let u=new Pt(null);return r.foreach((l,d)=>{let h=at(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),RI(t,e,n,u,i,s,a,o)}}function Hz(t,e,n,r,i){let s=e.serverCache,o=BN(e,s.getNode(),s.isFullyInitialized()||oe(n),s.isFiltered());return YN(t,o,n,r,QN,i)}function qz(t,e,n,r,i,s){let o;if(rp(r,n)!=null)return e;{let a=new Lu(r,e,i),c=e.eventCache.getNode(),u;if(oe(n)||ue(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=bI(r,Ps(e));else{let d=e.serverCache.getNode();T(d instanceof xe,"serverChildren would be complete if leaf node"),l=WN(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=ue(n),d=qI(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,Te(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,xe.EMPTY_NODE,Te(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=bI(r,Ps(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||rp(r,we())!=null,Ou(e,u,o,t.filter.filtersNodes())}}function Gz(t,e){let n=Ps(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!oe(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function XM(t,e,n,r){e.type===Or.MERGE&&e.source.queryId!==null&&(T(Ps(t.viewCache_),"We should always have a full cache before handling merges"),T(CI(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=Uz(t.processor_,i,e,n,r);return Vz(t.processor_,s.viewCache),T(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Wz(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Wz(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Ez(t.eventGenerator_,e,n,i)}var eN;function zz(t){T(!eN,"__referenceConstructor has already been defined"),eN=t}function GI(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return T(s!=null,"SyncTree gave us an op for an invalid query."),XM(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(XM(o,e,n,r));return s}}function WI(t,e){let n=null;for(let r of t.views.values())n=n||Gz(r,e);return n}var tN;function Kz(t){T(!tN,"__referenceConstructor has already been defined"),tN=t}var sp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pt(null),this.pendingWriteTree_=Fz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Qz(t,e,n,r,i){return Tz(t.pendingWriteTree_,e,n,r,i),i?ap(t,new wa(LN(),e,n)):[]}function fa(t,e,n=!1){let r=bz(t.pendingWriteTree_,e);if(Sz(t.pendingWriteTree_,e)){let s=new Pt(null);return r.snap!=null?s=s.set(we(),!0):dn(r.children,o=>{s=s.set(new Ie(o),!0)}),ap(t,new II(r.path,s,n))}else return[]}function op(t,e,n){return ap(t,new wa(VN(),e,n))}function Yz(t,e,n){let r=Pt.fromObject(n);return ap(t,new np(VN(),e,r))}function Zz(t,e,n,r){let i=eP(t,r);if(i!=null){let s=tP(i),o=s.path,a=s.queryId,c=un(o,e),u=new wa(UN(a),c,n);return nP(t,o,u)}else return[]}function Jz(t,e,n,r){let i=eP(t,r);if(i){let s=tP(i),o=s.path,a=s.queryId,c=un(o,e),u=Pt.fromObject(n),l=new np(UN(a),c,u);return nP(t,o,l)}else return[]}function ZN(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=un(o,e),u=WI(a,c);if(u)return u});return GN(i,e,s,n,!0)}function ap(t,e){return JN(e,t.syncPointTree_,null,HN(t.pendingWriteTree_,we()))}function JN(t,e,n,r){if(oe(t.path))return XN(t,e,n,r);{let i=e.get(we());n==null&&i!=null&&(n=WI(i,we()));let s=[],o=ue(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=zN(r,o);s=s.concat(JN(a,c,u,l))}return i&&(s=s.concat(GI(i,t,r,n))),s}}function XN(t,e,n,r){let i=e.get(we());n==null&&i!=null&&(n=WI(i,we()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=zN(r,o),l=t.operationForChild(o);l&&(s=s.concat(XN(l,a,c,u)))}),i&&(s=s.concat(GI(i,t,r,n))),s}function eP(t,e){return t.tagToQueryMap.get(e)}function tP(t){let e=t.indexOf("$");return T(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ie(t.substr(0,e))}}function nP(t,e,n){let r=t.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");let i=HN(t.pendingWriteTree_,e);return GI(r,n,i,null)}var MI=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},NI=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=at(this.path_,e);return new t(this.syncTree_,n)}node(){return ZN(this.syncTree_,this.path_)}},Xz=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},nN=function(t,e,n){if(!t||typeof t!="object")return t;if(T(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return e3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return t3(t[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},e3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:T(!1,"Unexpected server value: "+t)}},t3=function(t,e,n){t.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);let i=e.node();if(T(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},n3=function(t,e,n,r){return zI(e,new NI(n,t),r)},r3=function(t,e,n){return zI(t,new MI(e),n)};function zI(t,e,n){let r=t.getPriority().val(),i=nN(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=nN(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new _a(a,wt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new _a(i))),o.forEachChild(Et,(a,c)=>{let u=zI(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var Vu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function KI(t,e){let n=e instanceof Ie?e:new Ie(e),r=t,i=ue(n);for(;i!==null;){let s=Yi(r.node.children,i)||{children:{},childCount:0};r=new Vu(i,r,s),n=Te(n),i=ue(n)}return r}function Da(t){return t.node.value}function rP(t,e){t.node.value=e,PI(t)}function iP(t){return t.node.childCount>0}function i3(t){return Da(t)===void 0&&!iP(t)}function cp(t,e){dn(t.node.children,(n,r)=>{e(new Vu(n,t,r))})}function sP(t,e,n,r){n&&!r&&e(t),cp(t,i=>{sP(i,e,!0,r)}),n&&r&&e(t)}function s3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Hu(t){return new Ie(t.parent===null?t.name:Hu(t.parent)+"/"+t.name)}function PI(t){t.parent!==null&&o3(t.parent,t.name,t)}function o3(t,e,n){let r=i3(n),i=zn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,PI(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,PI(t))}var a3=/[\[\].#$\/\u0000-\u001F\u007F]/,c3=/[\[\].#$\u0000-\u001F\u007F]/,WE=10*1024*1024,oP=function(t){return typeof t=="string"&&t.length!==0&&!a3.test(t)},u3=function(t){return typeof t=="string"&&t.length!==0&&!c3.test(t)},l3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),u3(t)};var aP=function(t,e,n){let r=n instanceof Ie?new aI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+As(r));if(typeof e=="function")throw new Error(t+"contains a function "+As(r)+" with contents = "+e.toString());if(uN(e))throw new Error(t+"contains "+e.toString()+" "+As(r));if(typeof e=="string"&&e.length>WE/3&&Cc(e)>WE)throw new Error(t+"contains a string greater than "+WE+" utf8 bytes "+As(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(dn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!oP(o)))throw new Error(t+" contains an invalid key ("+o+") "+As(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tz(r,o),aP(t,a,r),nz(r)}),i&&s)throw new Error(t+' contains ".value" child '+As(r)+" in addition to actual children.")}};var d3=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!oP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!l3(n))throw new Error(Db(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var OI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function h3(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!RN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ks(t,e,n){h3(t,n),f3(t,r=>Pn(r,e)||Pn(e,r))}function f3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(p3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function p3(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Rs&&vt("event: "+n.toString()),Bu(r)}}}var m3="repo_interrupt",g3=25,kI=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tp(),this.transactionQueueTree_=new Vu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function y3(t,e,n){if(t.stats_=BI(t.repoInfo_),t.forceRestClient_||RW())t.server_=new yI(t.repoInfo_,(r,i,s,o)=>{rN(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>iN(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $I(t.repoInfo_,e,(r,i,s,o)=>{rN(t,r,i,s,o)},r=>{iN(t,r)},r=>{v3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=NW(t.repoInfo_,()=>new EI(t.stats_,t.server_)),t.infoData_=new _I,t.infoSyncTree_=new sp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=op(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),QI(t,"connected",!1),t.serverSyncTree_=new sp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);ks(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function _3(t){let n=t.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function cP(t){return Xz({timestamp:_3(t)})}function rN(t,e,n,r,i){t.dataUpdateCount++;let s=new Ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Ic(n,u=>wt(u));o=Jz(t.serverSyncTree_,s,c,i)}else{let c=wt(n);o=Zz(t.serverSyncTree_,s,c,i)}else if(r){let c=Ic(n,u=>wt(u));o=Yz(t.serverSyncTree_,s,c)}else{let c=wt(n);o=op(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=ZI(t,s)),ks(t.eventQueue_,a,o)}function iN(t,e){QI(t,"connected",e),e===!1&&E3(t)}function v3(t,e){dn(e,(n,r)=>{QI(t,n,r)})}function QI(t,e,n){let r=new Ie("/.info/"+e),i=wt(n);t.infoData_.updateSnapshot(r,i);let s=op(t.infoSyncTree_,r,i);ks(t.eventQueue_,r,s)}function w3(t){return t.nextWriteId_++}function E3(t){uP(t,"onDisconnectEvents");let e=cP(t),n=tp();vI(t.onDisconnect_,we(),(i,s)=>{let o=n3(i,s,t.serverSyncTree_,e);FN(n,i,o)});let r=[];vI(n,we(),(i,s)=>{r=r.concat(op(t.serverSyncTree_,i,s));let o=T3(t,i);ZI(t,o)}),t.onDisconnect_=tp(),ks(t.eventQueue_,we(),r)}function I3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(m3)}function uP(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vt(n,...e)}function lP(t,e,n){return ZN(t.serverSyncTree_,e,n)||xe.EMPTY_NODE}function YI(t,e=t.transactionQueueTree_){if(e||up(t,e),Da(e)){let n=hP(t,e);T(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&C3(t,Hu(e),n)}else iP(e)&&cp(e,n=>{YI(t,n)})}function C3(t,e,n){let r=n.map(u=>u.currentWriteId),i=lP(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];T(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=un(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{uP(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(fa(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();up(t,KI(t.transactionQueueTree_,e)),YI(t,t.transactionQueueTree_),ks(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Bu(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{zt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}ZI(t,e)}},o)}function ZI(t,e){let n=dP(t,e),r=Hu(n),i=hP(t,n);return D3(t,i,r),r}function D3(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=un(n,c.path),l=!1,d;if(T(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(fa(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=g3)l=!0,d="maxretry",i=i.concat(fa(t.serverSyncTree_,c.currentWriteId,!0));else{let h=lP(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){aP("transaction failed: Data returned ",f,c.path);let _=wt(f);typeof f=="object"&&f!=null&&zn(f,".priority")||(_=_.updatePriority(h.getPriority()));let E=c.currentWriteId,A=cP(t),$=r3(_,h,A);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=$,c.currentWriteId=w3(t),o.splice(o.indexOf(E),1),i=i.concat(Qz(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(fa(t.serverSyncTree_,E,!0))}else l=!0,d="nodata",i=i.concat(fa(t.serverSyncTree_,c.currentWriteId,!0))}ks(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}up(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Bu(r[a]);YI(t,t.transactionQueueTree_)}function dP(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&Da(r)===void 0;)r=KI(r,n),e=Te(e),n=ue(e);return r}function hP(t,e){let n=[];return fP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function fP(t,e,n){let r=Da(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);cp(e,i=>{fP(t,i,n)})}function up(t,e){let n=Da(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,rP(e,n.length>0?n:void 0)}cp(e,r=>{up(t,r)})}function T3(t,e){let n=Hu(dP(t,e)),r=KI(t.transactionQueueTree_,e);return s3(r,i=>{zE(t,i)}),zE(t,r),sP(r,i=>{zE(t,i)}),n}function zE(t,e){let n=Da(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(T(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(T(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(fa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?rP(e,void 0):n.length=s+1,ks(t.eventQueue_,Hu(e),i);for(let o=0;o<r.length;o++)Bu(r[o])}}function b3(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function S3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zt(`Invalid query segment '${n}' in query '${t}'`)}return e}var sN=function(t,e){let n=A3(t),r=n.namespace;n.domain==="firebase.com"&&Ms(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ms("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||IW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new tI(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ie(n.pathString)}},A3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=b3(t.substring(l,d)));let h=S3(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var oN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ate=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=oN.charAt(n%64),n=Math.floor(n/64);T(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=oN.charAt(e[i]);return T(o.length===20,"nextPushId: Length should be 20."),o}}();var FI=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return oe(this._path)?null:SN(this._path)}get ref(){return new Ia(this._repo,this._path)}get _queryIdentifier(){let e=GM(this._queryParams),n=jI(e);return n==="{}"?"default":n}get _queryObject(){return GM(this._queryParams)}isEqual(e){if(e=$e(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=RN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ez(this._path)}};var Ia=class t extends FI{constructor(e,n){super(e,n,new gI,!1)}get parent(){let e=xN(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};zz(Ia);Kz(Ia);var x3="FIREBASE_DATABASE_EMULATOR_HOST",LI={},R3=!1;function M3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ms("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=sN(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[x3]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=sN(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new RM(RM.OWNER):new XE(t.name,t.options,e);d3("Invalid Firebase Database URL",o),oe(o.path)||Ms("Database URL must point to the root of a Firebase Database (not including a child path).");let d=P3(a,t,l,new JE(t.name,n));return new VI(d,t)}function N3(t,e){let n=LI[e];(!n||n[t.key]!==t)&&Ms(`Database ${e}(${t.repoInfo_}) has already been deleted.`),I3(t),delete n[t.key]}function P3(t,e,n,r){let i=LI[e.name];i||(i={},LI[e.name]=i);let s=i[t.toURLString()];return s&&Ms("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new kI(t,R3,n,r),i[t.toURLString()]=s,s}var VI=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(y3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ia(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(N3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ms("Cannot call "+e+" on a deleted database.")}};function O3(t){vW(Zn),Yn(new Mt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return M3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Se(bM,SM,t),Se(bM,SM,"esm2017")}$I.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$I.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};O3();var lp=class{constructor(e){return e}},pP="database",JI=class{constructor(){return is(pP)}};var mP=new k("angularfire2.database-instances");function k3(t,e){let n=Ao(pP,t,e);return n&&new lp(n)}var F3={provide:JI,deps:[[new Ke,mP]]},L3={provide:lp,useFactory:k3,deps:[[new Ke,mP],Tn]},gP=(()=>{class t{constructor(){Se("angularfire",Ir.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=et({type:t});static \u0275inj=Xe({providers:[L3,F3]})}return t})();var yP=(()=>{let e=class e{constructor(){this.title="shiftbuilder"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ue({type:e,selectors:[["app-root"]],standalone:!0,features:[je],decls:3,vars:0,template:function(i,s){i&1&&(m(0,"div"),z(1,"app-navbar")(2,"router-outlet"),g())},dependencies:[Ye,gy,EM,Zy,gP,F_]});let t=e;return t})();MT(yP,TM).catch(t=>console.error(t));
