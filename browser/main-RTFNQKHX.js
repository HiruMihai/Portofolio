var eN=Object.defineProperty,tN=Object.defineProperties;var nN=Object.getOwnPropertyDescriptors;var uw=Object.getOwnPropertySymbols,rN=Object.getPrototypeOf,iN=Object.prototype.hasOwnProperty,sN=Object.prototype.propertyIsEnumerable,oN=Reflect.get;var dw=(t,e,n)=>e in t?eN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})iN.call(e,n)&&dw(t,n,e[n]);if(uw)for(var n of uw(e))sN.call(e,n)&&dw(t,n,e[n]);return t},ie=(t,e)=>tN(t,nN(e));var Er=(t,e,n)=>oN(rN(t),n,e);var R=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var hw=null;var Uh=1,fw=Symbol("SIGNAL");function we(t){let e=hw;return hw=t,e}var pw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function aN(t){if(!($h(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Uh)){if(!t.producerMustRecompute(t)&&!jh(t)){t.dirty=!1,t.lastCleanEpoch=Uh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Uh}}function mw(t){return t&&(t.nextProducerIndex=0),we(t)}function gw(t,e){if(we(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if($h(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jh(t){il(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(aN(n),r!==n.version))return!0}return!1}function yw(t){if(il(t),$h(t))for(let e=0;e<t.producerNode.length;e++)Bh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Bh(t,e){if(cN(t),il(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Bh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];il(i),i.producerIndexOfThis[r]=e}}function $h(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function il(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function cN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function lN(){throw new Error}var uN=lN;function vw(t){uN=t}function Y(t){return typeof t=="function"}function cs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var sl=cs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function si(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(s){e=s instanceof sl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_w(s)}catch(o){e=e??[],o instanceof sl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new sl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_w(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&si(n,e)}remove(e){let{_finalizers:n}=this;n&&si(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var Hh=Fe.EMPTY;function ol(t){return t instanceof Fe||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function _w(t){Y(t)?t():t.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ls={setTimeout(t,e,...n){let{delegate:r}=ls;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ls;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function al(t){ls.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(t);else throw t})}function na(){}var ww=qh("C",void 0,void 0);function Ew(t){return qh("E",void 0,t)}function Iw(t){return qh("N",t,void 0)}function qh(t,e,n){return{kind:t,value:e,error:n}}var oi=null;function us(t){if(an.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}function Cw(t){an.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}var ai=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ol(e)&&e.add(this)):this.destination=fN}static create(e,n,r){return new ds(e,n,r)}next(e){this.isStopped?Gh(Iw(e),this):this._next(e)}error(e){this.isStopped?Gh(Ew(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Gh(ww,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dN=Function.prototype.bind;function zh(t,e){return dN.call(t,e)}var Wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){cl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){cl(r)}else cl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){cl(n)}}},ds=class extends ai{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&an.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&zh(e.next,s),error:e.error&&zh(e.error,s),complete:e.complete&&zh(e.complete,s)}):i=e}this.destination=new Wh(i)}};function cl(t){an.useDeprecatedSynchronousErrorHandling?Cw(t):al(t)}function hN(t){throw t}function Gh(t,e){let{onStoppedNotification:n}=an;n&&ls.setTimeout(()=>n(t,e))}var fN={closed:!0,next:na,error:hN,complete:na};var hs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mt(t){return t}function Kh(...t){return Qh(t)}function Qh(t){return t.length===0?Mt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=mN(n)?n:new ds(n,r,i);return us(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bw(r),new r((i,s)=>{let o=new ds({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[hs](){return this}pipe(...n){return Qh(n)(this)}toPromise(n){return n=bw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function bw(t){var e;return(e=t??an.Promise)!==null&&e!==void 0?e:Promise}function pN(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function mN(t){return t&&t instanceof ai||pN(t)&&ol(t)}function Yh(t){return Y(t?.lift)}function he(t){return e=>{if(Yh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,r,i){return new Jh(t,e,n,r,i)}var Jh=class extends ai{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fs(){return he((t,e)=>{let n=null;t._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ps=class extends te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Yh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return fs()(this)}};var Tw=cs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class t extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ll(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Tw}next(n){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Hh:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,si(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return t.create=(e,n)=>new ll(e,n),t})(),ll=class extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Hh}};var rt=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Zh={now(){return(Zh.delegate||Date).now()},delegate:void 0};var ul=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var ra={setInterval(t,e,...n){let{delegate:r}=ra;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ra;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ms=class extends ul{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ra.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var gs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};gs.now=Zh.now;var ys=class extends gs{constructor(e,n=gs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xh=new ys(ms);var dl=class extends ms{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var hl=class extends ys{};var ef=new hl(dl);var Pt=new te(t=>t.complete());function Dw(t){return t&&Y(t.schedule)}function Sw(t){return t[t.length-1]}function fl(t){return Y(Sw(t))?t.pop():void 0}function Ir(t){return Dw(Sw(t))?t.pop():void 0}function tf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Nw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{u(r.next(f))}catch(p){o(p)}}function l(f){try{u(r.throw(f))}catch(p){o(p)}}function u(f){f.done?s(f.value):i(f.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function Aw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(t){return this instanceof ci?(this.v=t,this):new ci(t)}function Rw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){r[g]&&(i[g]=function(S){return new Promise(function(N,P){s.push([g,S,N,P])>1||a(g,S)})})}function a(g,S){try{l(r[g](S))}catch(N){p(s[0][3],N)}}function l(g){g.value instanceof ci?Promise.resolve(g.value.v).then(u,f):p(s[0][2],g)}function u(g){a("next",g)}function f(g){a("throw",g)}function p(g,S){g(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function xw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Aw=="function"?Aw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var pl=t=>t&&typeof t.length=="number"&&typeof t!="function";function ml(t){return Y(t?.then)}function gl(t){return Y(t[hs])}function yl(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function vl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _l=gN();function wl(t){return Y(t?.[_l])}function El(t){return Rw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ci(n.read());if(i)return yield ci(void 0);yield yield ci(r)}}finally{n.releaseLock()}})}function Il(t){return Y(t?.getReader)}function Ue(t){if(t instanceof te)return t;if(t!=null){if(gl(t))return yN(t);if(pl(t))return vN(t);if(ml(t))return _N(t);if(yl(t))return Mw(t);if(wl(t))return wN(t);if(Il(t))return EN(t)}throw vl(t)}function yN(t){return new te(e=>{let n=t[hs]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vN(t){return new te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _N(t){return new te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,al)})}function wN(t){return new te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Mw(t){return new te(e=>{IN(t,e).catch(n=>e.error(n))})}function EN(t){return Mw(El(t))}function IN(t,e){var n,r,i,s;return Nw(this,void 0,void 0,function*(){try{for(n=xw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ct(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Cr(t,e=0){return he((n,r)=>{n.subscribe(oe(r,i=>Ct(r,t,()=>r.next(i),e),()=>Ct(r,t,()=>r.complete(),e),i=>Ct(r,t,()=>r.error(i),e)))})}function br(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Pw(t,e){return Ue(t).pipe(br(e),Cr(e))}function kw(t,e){return Ue(t).pipe(br(e),Cr(e))}function Ow(t,e){return new te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Fw(t,e){return new te(n=>{let r;return Ct(n,e,()=>{r=t[_l](),Ct(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function Cl(t,e){if(!t)throw new Error("Iterable cannot be null");return new te(n=>{Ct(n,e,()=>{let r=t[Symbol.asyncIterator]();Ct(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Lw(t,e){return Cl(El(t),e)}function Vw(t,e){if(t!=null){if(gl(t))return Pw(t,e);if(pl(t))return Ow(t,e);if(ml(t))return kw(t,e);if(yl(t))return Cl(t,e);if(wl(t))return Fw(t,e);if(Il(t))return Lw(t,e)}throw vl(t)}function xe(t,e){return e?Vw(t,e):Ue(t)}function z(...t){let e=Ir(t);return xe(t,e)}function vs(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new te(e?i=>e.schedule(r,0,i):r)}function nf(t){return!!t&&(t instanceof te||Y(t.lift)&&Y(t.subscribe))}var Yn=cs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function J(t,e){return he((n,r)=>{let i=0;n.subscribe(oe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:CN}=Array;function bN(t,e){return CN(e)?t(...e):t(e)}function bl(t){return J(e=>bN(t,e))}var{isArray:TN}=Array,{getPrototypeOf:DN,prototype:SN,keys:AN}=Object;function Tl(t){if(t.length===1){let e=t[0];if(TN(e))return{args:e,keys:null};if(NN(e)){let n=AN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function NN(t){return t&&typeof t=="object"&&DN(t)===SN}function Dl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Sl(...t){let e=Ir(t),n=fl(t),{args:r,keys:i}=Tl(t);if(r.length===0)return xe([],e);let s=new te(RN(r,e,i?o=>Dl(i,o):Mt));return n?s.pipe(bl(n)):s}function RN(t,e,n=Mt){return r=>{Uw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)Uw(e,()=>{let u=xe(t[l],e),f=!1;u.subscribe(oe(r,p=>{s[l]=p,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Uw(t,e,n){t?Ct(n,t,e):e()}function jw(t,e,n,r,i,s,o,a){let l=[],u=0,f=0,p=!1,g=()=>{p&&!l.length&&!u&&e.complete()},S=P=>u<r?N(P):l.push(P),N=P=>{s&&e.next(P),u++;let M=!1;Ue(n(P,f++)).subscribe(oe(e,j=>{i?.(j),s?S(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(u--;l.length&&u<r;){let j=l.shift();o?Ct(e,o,()=>N(j)):N(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(oe(e,S,()=>{p=!0,g()})),()=>{a?.()}}function ze(t,e,n=1/0){return Y(e)?ze((r,i)=>J((s,o)=>e(r,s,i,o))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>jw(r,i,t,n)))}function rf(t=1/0){return ze(Mt,t)}function Bw(){return rf(1)}function _s(...t){return Bw()(xe(t,Ir(t)))}function Al(t){return new te(e=>{Ue(t()).subscribe(e)})}function sf(...t){let e=fl(t),{args:n,keys:r}=Tl(t),i=new te(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let f=0;f<o;f++){let p=!1;Ue(n[f]).subscribe(oe(s,g=>{p||(p=!0,u--),a[f]=g},()=>l--,void 0,()=>{(!l||!p)&&(u||s.next(r?Dl(r,a):a),s.complete())}))}});return e?i.pipe(bl(e)):i}function kt(t,e){return he((n,r)=>{let i=0;n.subscribe(oe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function cn(t){return he((e,n)=>{let r=null,i=!1,s;r=e.subscribe(oe(n,void 0,void 0,o=>{s=Ue(t(o,cn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function $w(t,e,n,r,i){return(s,o)=>{let a=n,l=e,u=0;s.subscribe(oe(o,f=>{let p=u++;l=a?t(l,f,p):(a=!0,f),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Tr(t,e){return Y(e)?ze(t,e,1):ze(t,1)}function Dr(t){return he((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Jn(t){return t<=0?()=>Pt:he((e,n)=>{let r=0;e.subscribe(oe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function of(t){return J(()=>t)}function Nl(t=xN){return he((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xN(){return new Yn}function li(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Cn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,s)=>t(i,s,r)):Mt,Jn(1),n?Dr(e):Nl(()=>new Yn))}function ws(t){return t<=0?()=>Pt:he((e,n)=>{let r=[];e.subscribe(oe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function af(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,s)=>t(i,s,r)):Mt,ws(1),n?Dr(e):Nl(()=>new Yn))}function cf(t,e){return he($w(t,e,arguments.length>=2,!0))}function lf(...t){let e=Ir(t);return he((n,r)=>{(e?_s(t,n,e):_s(t,n)).subscribe(r)})}function Ot(t,e){return he((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(oe(r,l=>{i?.unsubscribe();let u=0,f=s++;Ue(t(l,f)).subscribe(i=oe(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function uf(t){return he((e,n)=>{Ue(t).subscribe(oe(n,()=>n.complete(),na)),!n.closed&&e.subscribe(n)})}function Me(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(oe(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Mt}var NE="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(ou(e,n)),this.code=e}};function ou(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ya(t){return{toString:t}.toString()}var Rl="__parameters__";function MN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function RE(t,e,n){return ya(()=>{let r=MN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,f){let p=l.hasOwnProperty(Rl)?l[Rl]:Object.defineProperty(l,Rl,{value:[]})[Rl];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var sa=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function PN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function yt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Hw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var kN=Te({__forward_ref__:Te});function xn(t){return t.__forward_ref__=xn,t.toString=function(){return yt(this())},t}function gt(t){return xE(t)?t():t}function xE(t){return typeof t=="function"&&t.hasOwnProperty(kN)&&t.__forward_ref__===xn}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qe(t){return{providers:t.providers||[],imports:t.imports||[]}}function au(t){return qw(t,PE)||qw(t,kE)}function ME(t){return au(t)!==null}function qw(t,e){return t.hasOwnProperty(e)?t[e]:null}function ON(t){let e=t&&(t[PE]||t[kE]);return e||null}function zw(t){return t&&(t.hasOwnProperty(Gw)||t.hasOwnProperty(FN))?t[Gw]:null}var PE=Te({\u0275prov:Te}),Gw=Te({\u0275inj:Te}),kE=Te({ngInjectableDef:Te}),FN=Te({ngInjectorDef:Te}),B=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function OE(t){return t&&!!t.\u0275providers}var LN=Te({\u0275cmp:Te}),VN=Te({\u0275dir:Te}),UN=Te({\u0275pipe:Te}),jN=Te({\u0275mod:Te}),Ul=Te({\u0275fac:Te}),ia=Te({__NG_ELEMENT_ID__:Te}),Ww=Te({__NG_ENV_ID__:Te});function cu(t){return typeof t=="string"?t:t==null?"":String(t)}function BN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():cu(t)}function $N(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function dp(t,e){throw new $(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),Df;function FE(){return Df}function qt(t){let e=Df;return Df=t,e}function LE(t,e,n){let r=au(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;dp(t,"Injector")}var HN={},oa=HN,Sf="__NG_DI_FLAG__",jl="ngTempTokenPath",qN="ngTokenPath",zN=/\n/gm,GN="\u0275",Kw="__source",bs;function WN(){return bs}function Sr(t){let e=bs;return bs=t,e}function KN(t,e=ne.Default){if(bs===void 0)throw new $(-203,!1);return bs===null?LE(t,void 0,e):bs.get(t,e&ne.Optional?null:void 0,e)}function q(t,e=ne.Default){return(FE()||KN)(gt(t),e)}function L(t,e=ne.Default){return q(t,lu(e))}function lu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Af(t){let e=[];for(let n=0;n<t.length;n++){let r=gt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=ne.Default;for(let o=0;o<r.length;o++){let a=r[o],l=QN(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function VE(t,e){return t[Sf]=e,t.prototype[Sf]=e,t}function QN(t){return t[Sf]}function YN(t,e,n,r){let i=t[jl];throw e[Kw]&&i.unshift(e[Kw]),t.message=JN(`
`+t.message,i,n,r),t[qN]=i,t[jl]=null,t}function JN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==GN?t.slice(2):t;let i=yt(e);if(Array.isArray(e))i=e.map(yt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zN,`
  `)}`}var Ye=VE(RE("Optional"),8);var UE=VE(RE("SkipSelf"),4);function Ds(t,e){let n=t.hasOwnProperty(Ul);return n?t[Ul]:null}function hp(t,e){t.forEach(n=>Array.isArray(n)?hp(n,e):e(n))}function jE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ZN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function XN(t,e,n){let r=va(t,e);return r>=0?t[r|1]=n:(r=~r,ZN(t,r,e,n)),r}function df(t,e){let n=va(t,e);if(n>=0)return t[n|1]}function va(t,e){return eR(t,e,1)}function eR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ss={},zt=[],As=new B(""),BE=new B("",-1),$E=new B(""),$l=class{get(e,n=oa){if(n===oa){let r=new Error(`NullInjectorError: No provider for ${yt(e)}!`);throw r.name="NullInjectorError",r}return n}},HE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(HE||{}),Dn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Dn||{}),Ns=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ns||{});function tR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Nf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];nR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function qE(t){return t===3||t===4||t===6}function nR(t){return t.charCodeAt(0)===64}function aa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Qw(t,n,i,null,e[++r]):Qw(t,n,i,null,null))}}return t}function Qw(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var zE="ng-template";function rR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&tR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(fp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function fp(t){return t.type===4&&t.value!==zE}function iR(t,e,n){let r=t.type===4&&!n?zE:t.value;return e===r}function sR(t,e,n){let r=4,i=t.attrs,s=i!==null?cR(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!ln(r)&&!ln(l))return!1;if(o&&ln(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!iR(t,l,n)||l===""&&e.length===1){if(ln(r))return!1;o=!0}}else if(r&8){if(i===null||!rR(t,i,l,n)){if(ln(r))return!1;o=!0}}else{let u=e[++a],f=oR(l,i,fp(t),n);if(f===-1){if(ln(r))return!1;o=!0;continue}if(u!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(ln(r))return!1;o=!0}}}}return ln(r)||o}function ln(t){return(t&1)===0}function oR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return lR(e,t)}function aR(t,e,n=!1){for(let r=0;r<e.length;r++)if(sR(t,e[r],n))return!0;return!1}function cR(t){for(let e=0;e<t.length;e++){let n=t[e];if(qE(n))return e}return t.length}function lR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Yw(t,e){return t?":not("+e.trim()+")":e}function uR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!ln(o)&&(e+=Yw(s,i),i=""),r=o,s=s||!ln(r);n++}return i!==""&&(e+=Yw(s,i)),e}function dR(t){return t.map(uR).join(",")}function hR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!ln(i))break;i=s}r++}return{attrs:e,classes:n}}function Be(t){return ya(()=>{let e=YE(t),n=ie(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Dn.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""});JE(n);let r=t.dependencies;return n.directiveDefs=Zw(r,!1),n.pipeDefs=Zw(r,!0),n.id=mR(n),n})}function fR(t){return hi(t)||GE(t)}function pR(t){return t!==null}function Je(t){return ya(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jw(t,e){if(t==null)return Ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ns.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ns.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Pe(t){return ya(()=>{let e=YE(t);return JE(e),e})}function hi(t){return t[LN]||null}function GE(t){return t[VN]||null}function WE(t){return t[UN]||null}function KE(t){let e=hi(t)||GE(t)||WE(t);return e!==null?e.standalone:!1}function QE(t,e){let n=t[jN]||null;if(!n&&e===!0)throw new Error(`Type ${yt(t)} does not have '\u0275mod' property.`);return n}function YE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jw(t.inputs,e),outputs:Jw(t.outputs),debugInfo:null}}function JE(t){t.features?.forEach(e=>e(t))}function Zw(t,e){if(!t)return null;let n=e?WE:fR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(pR)}function mR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _a(t){return{\u0275providers:t}}function wa(...t){return{\u0275providers:ZE(!0,t),\u0275fromNgModule:!0}}function ZE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return hp(e,o=>{let a=o;Rf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&XE(i,s),n}function XE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];pp(i,s=>{e(s,r)})}}function Rf(t,e,n,r){if(t=gt(t),!t)return!1;let i=null,s=zw(t),o=!s&&hi(t);if(!s&&!o){let l=t.ngModule;if(s=zw(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)Rf(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{hp(s.imports,f=>{Rf(f,e,n,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&XE(u,e)}if(!a){let u=Ds(i)||(()=>new i);e({provide:i,useFactory:u,deps:zt},i),e({provide:$E,useValue:i,multi:!0},i),e({provide:As,useValue:()=>q(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=t;pp(l,f=>{e(f,u)})}}else return!1;return i!==t&&t.providers!==void 0}function pp(t,e){for(let n of t)OE(n)&&(n=n.\u0275providers),Array.isArray(n)?pp(n,e):e(n)}var gR=Te({provide:String,useValue:Te});function eI(t){return t!==null&&typeof t=="object"&&gR in t}function yR(t){return!!(t&&t.useExisting)}function vR(t){return!!(t&&t.useFactory)}function Rs(t){return typeof t=="function"}function _R(t){return!!t.useClass}var uu=new B(""),kl={},wR={},hf;function mp(){return hf===void 0&&(hf=new $l),hf}var bt=class{},ca=class extends bt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mf(e,o=>this.processProvider(o)),this.records.set(BE,Es(void 0,this)),i.has("environment")&&this.records.set(bt,Es(void 0,this));let s=this.records.get(uu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($E,zt,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Sr(this),r=qt(void 0),i;try{return e()}finally{Sr(n),qt(r)}}get(e,n=oa,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ww))return e[Ww](this);r=lu(r);let i,s=Sr(this),o=qt(void 0);try{if(!(r&ne.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=TR(e)&&au(e);u&&this.injectableDefInScope(u)?l=Es(xf(e),kl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&ne.Self?mp():this.parent;return n=r&ne.Optional&&n===oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[jl]=a[jl]||[]).unshift(yt(e)),s)throw a;return YN(a,e,"R3InjectorError",this.source)}else throw a}finally{qt(o),Sr(s)}}resolveInjectorInitializers(){let e=we(null),n=Sr(this),r=qt(void 0),i;try{let s=this.get(As,zt,ne.Self);for(let o of s)o()}finally{Sr(n),qt(r),we(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=gt(e);let n=Rs(e)?e:gt(e&&e.provide),r=IR(e);if(!Rs(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Es(void 0,kl,!0),i.factory=()=>Af(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=we(null);try{return n.value===kl&&(n.value=wR,n.value=n.factory()),typeof n.value=="object"&&n.value&&bR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=gt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xf(t){let e=au(t),n=e!==null?e.factory:Ds(t);if(n!==null)return n;if(t instanceof B)throw new $(204,!1);if(t instanceof Function)return ER(t);throw new $(204,!1)}function ER(t){if(t.length>0)throw new $(204,!1);let n=ON(t);return n!==null?()=>n.factory(t):()=>new t}function IR(t){if(eI(t))return Es(void 0,t.useValue);{let e=tI(t);return Es(e,kl)}}function tI(t,e,n){let r;if(Rs(t)){let i=gt(t);return Ds(i)||xf(i)}else if(eI(t))r=()=>gt(t.useValue);else if(vR(t))r=()=>t.useFactory(...Af(t.deps||[]));else if(yR(t))r=()=>q(gt(t.useExisting));else{let i=gt(t&&(t.useClass||t.provide));if(CR(t))r=()=>new i(...Af(t.deps));else return Ds(i)||xf(i)}return r}function Es(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function CR(t){return!!t.deps}function bR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function TR(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function Mf(t,e){for(let n of t)Array.isArray(n)?Mf(n,e):n&&OE(n)?Mf(n.\u0275providers,e):e(n)}function hn(t,e){t instanceof ca&&t.assertNotDestroyed();let n,r=Sr(t),i=qt(void 0);try{return e()}finally{Sr(r),qt(i)}}function DR(){return FE()!==void 0||WN()!=null}function SR(t){return typeof t=="function"}var tr=0,le=1,Q=2,vt=3,un=4,fn=5,Hl=6,la=7,dn=8,xs=9,Sn=10,Ke=11,ua=12,Xw=13,Us=14,An=15,Ms=16,Is=17,Ps=18,du=19,nI=20,Ar=21,ff=22,fi=23,Nn=25,rI=1;var pi=7,ql=8,zl=9,Gt=10,Gl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gl||{});function Nr(t){return Array.isArray(t)&&typeof t[rI]=="object"}function nr(t){return Array.isArray(t)&&t[rI]===!0}function gp(t){return(t.flags&4)!==0}function hu(t){return t.componentOffset>-1}function fu(t){return(t.flags&1)===1}function Rr(t){return!!t.template}function Pf(t){return(t[Q]&512)!==0}var kf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function iI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function rr(){return sI}function sI(t){return t.type.prototype.ngOnChanges&&(t.setInput=NR),AR}rr.ngInherit=!0;function AR(){let t=aI(this),e=t?.current;if(e){let n=t.previous;if(n===Ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function NR(t,e,n,r,i){let s=this.declaredInputs[r],o=aI(t)||RR(t,{previous:Ss,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new kf(u&&u.currentValue,n,l===Ss),iI(t,e,i,n)}var oI="__ngSimpleChanges__";function aI(t){return t[oI]||null}function RR(t,e){return t[oI]=e}var eE=null;var bn=function(t,e,n){eE?.(t,e,n)},xR="svg",MR="math";function Rn(t){for(;Array.isArray(t);)t=t[tr];return t}function cI(t,e){return Rn(e[t])}function Wt(t,e){return Rn(e[t.index])}function lI(t,e){return t.data[e]}function PR(t,e){return t[e]}function Pr(t,e){let n=e[t];return Nr(n)?n:n[tr]}function yp(t){return(t[Q]&128)===128}function kR(t){return nr(t[vt])}function ks(t,e){return e==null?null:t[e]}function uI(t){t[Is]=0}function OR(t){t[Q]&1024||(t[Q]|=1024,yp(t)&&pu(t))}function FR(t,e){for(;t>0;)e=e[Us],t--;return e}function da(t){return!!(t[Q]&9216||t[fi]?.dirty)}function Of(t){t[Sn].changeDetectionScheduler?.notify(7),t[Q]&64&&(t[Q]|=1024),da(t)&&pu(t)}function pu(t){t[Sn].changeDetectionScheduler?.notify(0);let e=ha(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!yp(e)));)e=ha(e)}function dI(t,e){if((t[Q]&256)===256)throw new $(911,!1);t[Ar]===null&&(t[Ar]=[]),t[Ar].push(e)}function LR(t,e){if(t[Ar]===null)return;let n=t[Ar].indexOf(e);n!==-1&&t[Ar].splice(n,1)}function ha(t){let e=t[vt];return nr(e)?e[vt]:e}var se={lFrame:wI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hI=!1;function VR(){return se.lFrame.elementDepthCount}function UR(){se.lFrame.elementDepthCount++}function jR(){se.lFrame.elementDepthCount--}function fI(){return se.bindingsEnabled}function BR(){return se.skipHydrationRootTNode!==null}function $R(t){return se.skipHydrationRootTNode===t}function HR(){se.skipHydrationRootTNode=null}function Ae(){return se.lFrame.lView}function Ft(){return se.lFrame.tView}function pn(t){return se.lFrame.contextLView=t,t[dn]}function mn(t){return se.lFrame.contextLView=null,t}function wt(){let t=pI();for(;t!==null&&t.type===64;)t=t.parent;return t}function pI(){return se.lFrame.currentTNode}function qR(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _i(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function vp(){return se.lFrame.isParent}function mI(){se.lFrame.isParent=!1}function zR(){return se.lFrame.contextLView}function gI(){return hI}function tE(t){hI=t}function GR(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function WR(t){return se.lFrame.bindingIndex=t}function _p(){return se.lFrame.bindingIndex++}function KR(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function QR(){return se.lFrame.inI18n}function YR(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ff(e)}function JR(){return se.lFrame.currentDirectiveIndex}function Ff(t){se.lFrame.currentDirectiveIndex=t}function ZR(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yI(t){se.lFrame.currentQueryIndex=t}function XR(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[fn]:null}function vI(t,e,n){if(n&ne.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=XR(s),i===null||(s=s[Us],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=se.lFrame=_I();return r.currentTNode=e,r.lView=t,!0}function wp(t){let e=_I(),n=t[le];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _I(){let t=se.lFrame,e=t===null?null:t.child;return e===null?wI(t):e}function wI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function EI(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var II=EI;function Ep(){let t=EI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ex(t){return(se.lFrame.contextLView=FR(t,se.lFrame.contextLView))[dn]}function js(){return se.lFrame.selectedIndex}function mi(t){se.lFrame.selectedIndex=t}function CI(){let t=se.lFrame;return lI(t.tView,t.selectedIndex)}function tx(){return se.lFrame.currentNamespace}var bI=!0;function mu(){return bI}function gu(t){bI=t}function nx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=sI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function yu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Ol(t,e,n){TI(t,e,3,n)}function Fl(t,e,n,r){(t[Q]&3)===n&&TI(t,e,n,r)}function pf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function TI(t,e,n,r){let i=r!==void 0?t[Is]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Is]+=65536),(a<s||s==-1)&&(rx(t,n,e,l),t[Is]=(t[Is]&4294901760)+l+2),l++}function nE(t,e){bn(4,t,e);let n=we(null);try{e.call(t)}finally{we(n),bn(5,t,e)}}function rx(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[Is]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,nE(a,s)):nE(a,s)}var Ts=-1,gi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ix(t){return t instanceof gi}function sx(t){return(t.flags&8)!==0}function ox(t){return(t.flags&16)!==0}function DI(t){return t!==Ts}function Wl(t){return t&32767}function ax(t){return t>>16}function Kl(t,e){let n=ax(t),r=e;for(;n>0;)r=r[Us],n--;return r}var Lf=!0;function rE(t){let e=Lf;return Lf=t,e}var cx=256,SI=cx-1,AI=5,lx=0,Tn={};function ux(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ia)&&(r=n[ia]),r==null&&(r=n[ia]=lx++);let i=r&SI,s=1<<i;e.data[t+(i>>AI)]|=s}function Ql(t,e){let n=NI(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,mf(r.data,t),mf(e,null),mf(r.blueprint,null));let i=Ip(t,e),s=t.injectorIndex;if(DI(i)){let o=Wl(i),a=Kl(i,e),l=a[le].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function mf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function NI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ip(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kI(i),r===null)return Ts;if(n++,i=i[Us],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ts}function Vf(t,e,n){ux(t,e,n)}function dx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(qE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function RI(t,e,n){if(n&ne.Optional||t!==void 0)return t;dp(e,"NodeInjector")}function xI(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[xs],s=qt(void 0);try{return i?i.get(e,r,n&ne.Optional):LE(e,r,n&ne.Optional)}finally{qt(s)}}return RI(r,e,n)}function MI(t,e,n,r=ne.Default,i){if(t!==null){if(e[Q]&2048&&!(r&ne.Self)){let o=gx(t,e,n,r,Tn);if(o!==Tn)return o}let s=PI(t,e,n,r,Tn);if(s!==Tn)return s}return xI(e,n,r,i)}function PI(t,e,n,r,i){let s=px(n);if(typeof s=="function"){if(!vI(e,t,r))return r&ne.Host?RI(i,n,r):xI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ne.Optional))dp(n);else return o}finally{II()}}else if(typeof s=="number"){let o=null,a=NI(t,e),l=Ts,u=r&ne.Host?e[An][fn]:null;for((a===-1||r&ne.SkipSelf)&&(l=a===-1?Ip(t,e):e[a+8],l===Ts||!sE(r,!1)?a=-1:(o=e[le],a=Wl(l),e=Kl(l,e)));a!==-1;){let f=e[le];if(iE(s,a,f.data)){let p=hx(a,e,n,o,r,u);if(p!==Tn)return p}l=e[a+8],l!==Ts&&sE(r,e[le].data[a+8]===u)&&iE(s,a,e)?(o=f,a=Wl(l),e=Kl(l,e)):a=-1}}return i}function hx(t,e,n,r,i,s){let o=e[le],a=o.data[t+8],l=r==null?hu(a)&&Lf:r!=o&&(a.type&3)!==0,u=i&ne.Host&&s===a,f=fx(a,o,n,l,u);return f!==null?Os(e,o,f,a):Tn}function fx(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,u=t.directiveEnd,f=s>>20,p=r?a:a+f,g=i?a+f:u;for(let S=p;S<g;S++){let N=o[S];if(S<l&&n===N||S>=l&&N.type===n)return S}if(i){let S=o[l];if(S&&Rr(S)&&S.type===n)return l}return null}function Os(t,e,n,r){let i=t[n],s=e.data;if(ix(i)){let o=i;o.resolving&&$N(BN(s[n]));let a=rE(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?qt(o.injectImpl):null,f=vI(t,r,ne.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&nx(n,s[n],e)}finally{u!==null&&qt(u),rE(a),o.resolving=!1,II()}}return i}function px(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ia)?t[ia]:void 0;return typeof e=="number"?e>=0?e&SI:mx:e}function iE(t,e,n){let r=1<<t;return!!(n[e+(t>>AI)]&r)}function sE(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var di=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return MI(this._tNode,this._lView,e,lu(r),n)}};function mx(){return new di(wt(),Ae())}function ir(t){return ya(()=>{let e=t.prototype.constructor,n=e[Ul]||Uf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ul]||Uf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Uf(t){return xE(t)?()=>{let e=Uf(gt(t));return e&&e()}:Ds(t)}function gx(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=PI(s,o,n,r|ne.Self,Tn);if(a!==Tn)return a;let l=s.parent;if(!l){let u=o[nI];if(u){let f=u.get(n,Tn,r);if(f!==Tn)return f}l=kI(o),o=o[Us]}s=l}return i}function kI(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[fn]:null}function Cp(t){return dx(wt(),t)}function oE(t,e=null,n=null,r){let i=OI(t,e,n,r);return i.resolveInjectorInitializers(),i}function OI(t,e=null,n=null,r,i=new Set){let s=[n||zt,wa(t)];return r=r||(typeof t=="object"?void 0:yt(t)),new ca(s,e||mp(),r||null,i)}var ui=class ui{static create(e,n){if(Array.isArray(e))return oE({name:""},n,e,"");{let r=e.name??"";return oE({name:r},e.parent,e.providers,r)}}};ui.THROW_IF_NOT_FOUND=oa,ui.NULL=new $l,ui.\u0275prov=H({token:ui,providedIn:"any",factory:()=>q(BE)}),ui.__NG_ELEMENT_ID__=-1;var _t=ui;var yx=new B("");yx.__NG_ELEMENT_ID__=t=>{let e=wt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&ne.Optional)return null;throw new $(204,!1)};var vx="ngOriginalError";function gf(t){return t[vx]}var Zn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&gf(e);for(;n&&gf(n);)n=gf(n);return n||null}},FI=new B("",{providedIn:"root",factory:()=>L(Zn).handleError.bind(void 0)}),LI=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=_x,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),jf=class extends LI{constructor(e){super(),this._lView=e}onDestroy(e){return dI(this._lView,e),()=>LR(this._lView,e)}};function _x(){return new jf(Ae())}function wx(){return vu(wt(),Ae())}function vu(t,e){return new gn(Wt(t,e))}var gn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=wx;let t=e;return t})();var Bf=class extends Ve{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,DR()&&(this.destroyRef=L(LI,{optional:!0})??void 0)}emit(e){let n=we(null);try{super.next(e)}finally{we(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=yf(s),i&&(i=yf(i)),o&&(o=yf(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function yf(t){return e=>{setTimeout(t,void 0,e)}}var je=Bf;function VI(t){return(t.flags&128)===128}var UI=new Map,Ex=0;function Ix(){return Ex++}function Cx(t){UI.set(t[du],t)}function bx(t){UI.delete(t[du])}var aE="__ngContext__";function xr(t,e){Nr(e)?(t[aE]=e[du],Cx(e)):t[aE]=e}function jI(t){return $I(t[ua])}function BI(t){return $I(t[un])}function $I(t){for(;t!==null&&!nr(t);)t=t[un];return t}var $f;function HI(t){$f=t}function Tx(){if($f!==void 0)return $f;if(typeof document<"u")return document;throw new $(210,!1)}var bp=new B("",{providedIn:"root",factory:()=>Dx}),Dx="ng",Tp=new B(""),Mn=new B("",{providedIn:"platform",factory:()=>"unknown"});var Dp=new B("",{providedIn:"root",factory:()=>Tx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Sx="h",Ax="b";var Nx=()=>null;function Sp(t,e,n=!1){return Nx(t,e,n)}var qI=!1,Rx=new B("",{providedIn:"root",factory:()=>qI});var xl;function xx(){if(xl===void 0&&(xl=null,sa.trustedTypes))try{xl=sa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return xl}function cE(t){return xx()?.createScriptURL(t)||t}var Yl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${NE})`}};function Ea(t){return t instanceof Yl?t.changingThisBreaksApplicationSecurity:t}function Ap(t,e){let n=Mx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${NE})`)}return n===e}function Mx(t){return t instanceof Yl&&t.getTypeName()||null}var Px=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zI(t){return t=String(t),t.match(Px)?t:"unsafe:"+t}var _u=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(_u||{});function kx(t){let e=WI();return e?e.sanitize(_u.URL,t)||"":Ap(t,"URL")?Ea(t):zI(cu(t))}function Ox(t){let e=WI();if(e)return cE(e.sanitize(_u.RESOURCE_URL,t)||"");if(Ap(t,"ResourceURL"))return cE(Ea(t));throw new $(904,!1)}function Fx(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Ox:kx}function GI(t,e,n){return Fx(e,n)(t)}function WI(){let t=Ae();return t&&t[Sn].sanitizer}var Lx=/^>|^->|<!--|-->|--!>|<!-$/g,Vx=/(<|>)/g,Ux="\u200B$1\u200B";function jx(t){return t.replace(Lx,e=>e.replace(Vx,Ux))}function KI(t){return t instanceof Function?t():t}var Xn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xn||{}),Bx;function Np(t,e){return Bx(t,e)}function Cs(t,e,n,r,i){if(r!=null){let s,o=!1;nr(r)?s=r:Nr(r)&&(o=!0,r=r[tr]);let a=Rn(r);t===0&&n!==null?i==null?XI(e,n,a):Jl(e,n,a,i||null,!0):t===1&&n!==null?Jl(e,n,a,i||null,!0):t===2?iM(e,a,o):t===3&&e.destroyNode(a),s!=null&&oM(e,t,s,n,i)}}function $x(t,e){return t.createText(e)}function Hx(t,e,n){t.setValue(e,n)}function qx(t,e){return t.createComment(jx(e))}function QI(t,e,n){return t.createElement(e,n)}function zx(t,e){YI(t,e),e[tr]=null,e[fn]=null}function Gx(t,e,n,r,i,s){r[tr]=i,r[fn]=e,Eu(t,r,n,1,i,s)}function YI(t,e){e[Sn].changeDetectionScheduler?.notify(8),Eu(t,e,e[Ke],2,null,null)}function Wx(t){let e=t[ua];if(!e)return vf(t[le],t);for(;e;){let n=null;if(Nr(e))n=e[ua];else{let r=e[Gt];r&&(n=r)}if(!n){for(;e&&!e[un]&&e!==t;)Nr(e)&&vf(e[le],e),e=e[vt];e===null&&(e=t),Nr(e)&&vf(e[le],e),n=e&&e[un]}e=n}}function Kx(t,e,n,r){let i=Gt+r,s=n.length;r>0&&(n[i-1][un]=e),r<s-Gt?(e[un]=n[i],jE(n,Gt+r,e)):(n.push(e),e[un]=null),e[vt]=n;let o=e[Ms];o!==null&&n!==o&&JI(o,e);let a=e[Ps];a!==null&&a.insertView(t),Of(e),e[Q]|=128}function JI(t,e){let n=t[zl],r=e[vt];if(Nr(r))t[Q]|=Gl.HasTransplantedViews;else{let i=r[vt][An];e[An]!==i&&(t[Q]|=Gl.HasTransplantedViews)}n===null?t[zl]=[e]:n.push(e)}function Rp(t,e){let n=t[zl],r=n.indexOf(e);n.splice(r,1)}function Hf(t,e){if(t.length<=Gt)return;let n=Gt+e,r=t[n];if(r){let i=r[Ms];i!==null&&i!==t&&Rp(i,r),e>0&&(t[n-1][un]=r[un]);let s=Bl(t,Gt+e);zx(r[le],r);let o=s[Ps];o!==null&&o.detachView(s[le]),r[vt]=null,r[un]=null,r[Q]&=-129}return r}function ZI(t,e){if(!(e[Q]&256)){let n=e[Ke];n.destroyNode&&Eu(t,e,n,3,null,null),Wx(e)}}function vf(t,e){if(e[Q]&256)return;let n=we(null);try{e[Q]&=-129,e[Q]|=256,e[fi]&&yw(e[fi]),Yx(t,e),Qx(t,e),e[le].type===1&&e[Ke].destroy();let r=e[Ms];if(r!==null&&nr(e[vt])){r!==e[vt]&&Rp(r,e);let i=e[Ps];i!==null&&i.detachView(t)}bx(e)}finally{we(n)}}function Qx(t,e){let n=t.cleanup,r=e[la];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[la]=null);let i=e[Ar];if(i!==null){e[Ar]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Yx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof gi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];bn(4,a,l);try{l.call(a)}finally{bn(5,a,l)}}else{bn(4,i,s);try{s.call(i)}finally{bn(5,i,s)}}}}}function Jx(t,e,n){return Zx(t,e.parent,n)}function Zx(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[tr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Dn.None||s===Dn.Emulated)return null}return Wt(r,n)}}function Jl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XI(t,e,n){t.appendChild(e,n)}function lE(t,e,n,r,i){r!==null?Jl(t,e,n,r,i):XI(t,e,n)}function Xx(t,e,n,r){t.removeChild(e,n,r)}function xp(t,e){return t.parentNode(e)}function eM(t,e){return t.nextSibling(e)}function tM(t,e,n){return rM(t,e,n)}function nM(t,e,n){return t.type&40?Wt(t,n):null}var rM=nM,uE;function wu(t,e,n,r){let i=Jx(t,r,e),s=e[Ke],o=r.parent||e[fn],a=tM(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)lE(s,i,n[l],a,!1);else lE(s,i,n,a,!1);uE!==void 0&&uE(s,r,e,n,i)}function Ll(t,e){if(e!==null){let n=e.type;if(n&3)return Wt(e,t);if(n&4)return qf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ll(t,r);{let i=t[e.index];return nr(i)?qf(-1,i):Rn(i)}}else{if(n&32)return Np(e,t)()||Rn(t[e.index]);{let r=e0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ha(t[An]);return Ll(i,r)}else return Ll(t,e.next)}}}return null}function e0(t,e){if(e!==null){let r=t[An][fn],i=e.projection;return r.projection[i]}return null}function qf(t,e){let n=Gt+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return Ll(r,i)}return e[pi]}function iM(t,e,n){let r=xp(t,e);r&&Xx(t,r,e,n)}function Mp(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],l=n.type;if(o&&e===0&&(a&&xr(Rn(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Mp(t,e,n.child,r,i,s,!1),Cs(e,t,i,a,s);else if(l&32){let u=Np(n,r),f;for(;f=u();)Cs(e,t,i,f,s);Cs(e,t,i,a,s)}else l&16?sM(t,e,r,n,i,s):Cs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Eu(t,e,n,r,i,s){Mp(n,r,t.firstChild,e,i,s,!1)}function sM(t,e,n,r,i,s){let o=n[An],l=o[fn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Cs(e,t,i,f,s)}else{let u=l,f=o[vt];VI(r)&&(u.flags|=128),Mp(t,e,u,f,i,s,!0)}}function oM(t,e,n,r,i){let s=n[pi],o=Rn(n);s!==o&&Cs(e,t,r,s,i);for(let a=Gt;a<n.length;a++){let l=n[a];Eu(l[le],l,t,e,r,s)}}function aM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Xn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xn.Important),t.setStyle(n,r,i,s))}}function cM(t,e,n){t.setAttribute(e,"style",n)}function t0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function n0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Nf(t,e,r),i!==null&&t0(t,e,i),s!==null&&cM(t,e,s)}var wi={};function O(t=1){r0(Ft(),Ae(),js()+t,!1)}function r0(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ol(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Fl(e,s,0,n)}mi(n)}function U(t,e=ne.Default){let n=Ae();if(n===null)return q(t,e);let r=wt();return MI(r,n,gt(t),e)}function i0(t,e,n,r,i,s){let o=we(null);try{let a=null;i&Ns.SignalBased&&(a=e[r][fw]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ns.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):iI(e,a,r,s)}finally{we(o)}}function lM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mi(~i);else{let s=i,o=n[++r],a=n[++r];YR(o,s);let l=e[s];a(2,l)}}}finally{mi(-1)}}function Iu(t,e,n,r,i,s,o,a,l,u,f){let p=e.blueprint.slice();return p[tr]=i,p[Q]=r|4|128|8|64,(u!==null||t&&t[Q]&2048)&&(p[Q]|=2048),uI(p),p[vt]=p[Us]=t,p[dn]=n,p[Sn]=o||t&&t[Sn],p[Ke]=a||t&&t[Ke],p[xs]=l||t&&t[xs]||null,p[fn]=s,p[du]=Ix(),p[Hl]=f,p[nI]=u,p[An]=e.type==2?t[An]:p,p}function Ia(t,e,n,r,i){let s=t.data[e];if(s===null)s=uM(t,e,n,r,i),QR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=qR();s.injectorIndex=o===null?-1:o.injectorIndex}return _i(s,!0),s}function uM(t,e,n,r,i){let s=pI(),o=vp(),a=o?s:s&&s.parent,l=t.data[e]=mM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function s0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function o0(t,e,n,r,i){let s=js(),o=r&2;try{mi(-1),o&&e.length>Nn&&r0(t,e,Nn,!1),bn(o?2:0,i),n(r,i)}finally{mi(s),bn(o?3:1,i)}}function Pp(t,e,n){if(gp(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{we(r)}}}function kp(t,e,n){fI()&&(IM(t,e,n,Wt(n,e)),(n.flags&64)===64&&l0(t,e,n))}function Op(t,e,n=Wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function a0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Fp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Fp(t,e,n,r,i,s,o,a,l,u,f){let p=Nn+r,g=p+i,S=dM(p,g),N=typeof u=="function"?u():u;return S[le]={type:t,blueprint:S,template:n,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:f}}function dM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:wi);return n}function hM(t,e,n,r){let s=r.get(Rx,qI)||n===Dn.ShadowDom,o=t.selectRootElement(e,s);return fM(o),o}function fM(t){pM(t)}var pM=()=>null;function mM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return BR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=Ns.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?hE(r,n,u,a,l):hE(r,n,u,a)}return r}function hE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function gM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,u=null;for(let f=r;f<i;f++){let p=s[f],g=n?n.get(p):null,S=g?g.inputs:null,N=g?g.outputs:null;l=dE(0,p.inputs,f,l,S),u=dE(1,p.outputs,f,u,N);let P=l!==null&&o!==null&&!fp(e)?PM(l,f,o):null;a.push(P)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function yM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vM(t,e,n,r,i,s,o,a){let l=Wt(e,n),u=e.inputs,f;!a&&u!=null&&(f=u[r])?(Vp(t,n,f,r,i),hu(e)&&_M(n,e.index)):e.type&3?(r=yM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function _M(t,e){let n=Pr(e,t);n[Q]&16||(n[Q]|=64)}function Lp(t,e,n,r){if(fI()){let i=r===null?null:{"":-1},s=bM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&c0(t,e,n,o,i,a),i&&TM(n,r,i)}n.mergedAttrs=aa(n.mergedAttrs,n.attrs)}function c0(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Vf(Ql(n,e),t,r[u].type);SM(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,l=s0(t,e,r.length,null);for(let u=0;u<r.length;u++){let f=r[u];n.mergedAttrs=aa(n.mergedAttrs,f.hostAttrs),AM(t,n,e,l,f),DM(l,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}gM(t,n,s)}function wM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;EM(o)!=a&&o.push(a),o.push(n,r,s)}}function EM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;hu(n)&&NM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ql(n,e),xr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],u=Os(e,t,a,n);if(xr(u,e),o!==null&&MM(e,a-i,u,l,n,o),Rr(l)){let f=Pr(n.index,e);f[dn]=Os(e,t,a,n)}}}function l0(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=JR();try{mi(s);for(let a=r;a<i;a++){let l=t.data[a],u=e[a];Ff(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&CM(l,u)}}finally{mi(-1),Ff(o)}}function CM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function bM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(aR(e,o.selectors,!1))if(r||(r=[]),Rr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;zf(t,e,l)}else r.unshift(o),zf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function zf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function DM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Rr(e)&&(n[""]=t)}}function SM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function AM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ds(i.type,!0)),o=new gi(s,Rr(i),U);t.blueprint[r]=o,n[r]=o,wM(t,e,r,s0(t,n,i.hostVars,wi),i)}function NM(t,e,n){let r=Wt(e,t),i=a0(n),s=t[Sn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Cu(t,Iu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function RM(t,e,n,r,i,s){let o=Wt(t,e);xM(e[Ke],o,s,t.value,n,r,i)}function xM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?cu(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function MM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],f=o[a++],p=o[a++];i0(r,n,l,u,f,p)}}function PM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function u0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function d0(t,e){let n=t.contentQueries;if(n!==null){let r=we(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];yI(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function Cu(t,e){return t[ua]?t[Xw][un]=e:t[ua]=e,t[Xw]=e,e}function Gf(t,e,n){yI(0);let r=we(null);try{e(t,n)}finally{we(r)}}function kM(t){return t[la]||(t[la]=[])}function OM(t){return t.cleanup||(t.cleanup=[])}function h0(t,e){let n=t[xs],r=n?n.get(Zn,null):null;r&&r.handleError(e)}function Vp(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],u=e[o],f=t.data[o];i0(f,u,r,a,l,i)}}function FM(t,e,n){let r=cI(e,t);Hx(t[Ke],r,n)}function LM(t,e){let n=Pr(e,t),r=n[le];VM(r,n);let i=n[tr];i!==null&&n[Hl]===null&&(n[Hl]=Sp(i,n[xs])),Up(r,n,n[dn])}function VM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Up(t,e,n){wp(e);try{let r=t.viewQuery;r!==null&&Gf(1,r,n);let i=t.template;i!==null&&o0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ps]?.finishViewCreation(t),t.staticContentQueries&&d0(t,e),t.staticViewQueries&&Gf(2,t.viewQuery,n);let s=t.components;s!==null&&UM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Ep()}}function UM(t,e){for(let n=0;n<e.length;n++)LM(t,e[n])}function jM(t,e,n,r){let i=we(null);try{let s=e.tView,a=t[Q]&4096?4096:16,l=Iu(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];l[Ms]=u;let f=t[Ps];return f!==null&&(l[Ps]=f.createEmbeddedView(s)),Up(s,l,n),l}finally{we(i)}}function fE(t,e){return!e||e.firstChild===null||VI(t)}function BM(t,e,n,r=!0){let i=e[le];if(Kx(i,e,t,n),r){let o=qf(n,t),a=e[Ke],l=xp(a,t[pi]);l!==null&&Gx(i,t[fn],a,e,l,o)}let s=e[Hl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Rn(s)),nr(s)&&$M(s,r);let o=n.type;if(o&8)Zl(t,e,n.child,r);else if(o&32){let a=Np(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=e0(e,n);if(Array.isArray(a))r.push(...a);else{let l=ha(e[An]);Zl(l[le],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function $M(t,e){for(let n=Gt;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&Zl(r[le],r,i,e)}t[pi]!==t[tr]&&e.push(t[pi])}var f0=[];function HM(t){return t[fi]??qM(t)}function qM(t){let e=f0.pop()??Object.create(GM);return e.lView=t,e}function zM(t){t.lView[fi]!==t&&(t.lView=null,f0.push(t))}var GM=ie(F({},pw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{pu(t.lView)},consumerOnSignalRead(){this.lView[fi]=this}}),WM=100;function p0(t,e=!0,n=0){let r=t[Sn],i=r.rendererFactory,s=!1;s||i.begin?.();try{KM(t,n)}catch(o){throw e&&h0(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function KM(t,e){let n=gI();try{tE(!0),Wf(t,e);let r=0;for(;da(t);){if(r===WM)throw new $(103,!1);r++,Wf(t,1)}}finally{tE(n)}}function QM(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Sn].inlineEffectRunner?.flush(),wp(e);let a=null,l=null;!s&&YM(t)&&(l=HM(e),a=mw(l));try{uI(e),WR(t.bindingStartIndex),n!==null&&o0(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let g=t.preOrderCheckHooks;g!==null&&Ol(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Fl(e,g,0,null),pf(e,0)}if(o||JM(e),m0(e,0),t.contentQueries!==null&&d0(t,e),!s)if(u){let g=t.contentCheckHooks;g!==null&&Ol(e,g)}else{let g=t.contentHooks;g!==null&&Fl(e,g,1),pf(e,1)}lM(t,e);let f=t.components;f!==null&&y0(e,f,0);let p=t.viewQuery;if(p!==null&&Gf(2,p,r),!s)if(u){let g=t.viewCheckHooks;g!==null&&Ol(e,g)}else{let g=t.viewHooks;g!==null&&Fl(e,g,2),pf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ff]){for(let g of e[ff])g();e[ff]=null}s||(e[Q]&=-73)}catch(u){throw s||pu(e),u}finally{l!==null&&(gw(l,a),zM(l)),Ep()}}function YM(t){return t.type!==2}function m0(t,e){for(let n=jI(t);n!==null;n=BI(n))for(let r=Gt;r<n.length;r++){let i=n[r];g0(i,e)}}function JM(t){for(let e=jI(t);e!==null;e=BI(e)){if(!(e[Q]&Gl.HasTransplantedViews))continue;let n=e[zl];for(let r=0;r<n.length;r++){let i=n[r];OR(i)}}}function ZM(t,e,n){let r=Pr(e,t);g0(r,n)}function g0(t,e){yp(t)&&Wf(t,e)}function Wf(t,e){let r=t[le],i=t[Q],s=t[fi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&jh(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)QM(r,t,r.template,t[dn]);else if(i&8192){m0(t,1);let a=r.components;a!==null&&y0(t,a,1)}}function y0(t,e,n){for(let r=0;r<e.length;r++)ZM(t,e[r],n)}function jp(t,e){let n=gI()?64:1088;for(t[Sn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=ha(t);if(Pf(t)&&!r)return t;t=r}return null}var yi=class{get rootNodes(){let e=this._lView,n=e[le];return Zl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dn]}set context(e){this._lView[dn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(nr(e)){let n=e[ql],r=n?n.indexOf(this):-1;r>-1&&(Hf(e,r),Bl(n,r))}this._attachedToViewContainer=!1}ZI(this._lView[le],this._lView)}onDestroy(e){dI(this._lView,e)}markForCheck(){jp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Of(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,p0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pf(this._lView),n=this._lView[Ms];n!==null&&!e&&Rp(n,this._lView),YI(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=Pf(this._lView),r=this._lView[Ms];r!==null&&!n&&JI(r,this._lView),Of(this._lView)}},bu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tP;let t=e;return t})(),XM=bu,eP=class extends XM{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=jM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new yi(i)}};function tP(){return v0(wt(),Ae())}function v0(t,e){return t.type&4?new eP(e,t,vu(t,e)):null}var XW=new RegExp(`^(\\d+)*(${Ax}|${Sx})*(.*)`);var nP=()=>null;function pE(t,e){return nP(t,e)}var fa=class{},_0=new B("",{providedIn:"root",factory:()=>!1});var w0=new B(""),Kf=class{},Xl=class{};function rP(t){let e=Error(`No component factory found for ${yt(t)}.`);return e[iP]=t,e}var iP="ngComponent";var Qf=class{resolveComponentFactory(e){throw rP(e)}},Yp=class Yp{};Yp.NULL=new Qf;var Fs=Yp,Ls=class{},Pn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>sP();let t=e;return t})();function sP(){let t=Ae(),e=wt(),n=Pr(e.index,t);return(Nr(n)?n:t)[Ke]}var oP=(()=>{let e=class e{};e.\u0275prov=H({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),_f={};var mE=new Set;function Bp(t){mE.has(t)||(mE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function E0(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof sa.requestAnimationFrame=="function"&&sa.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function gE(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function yE(...t){}var Ee=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new je(!1),this.onMicrotaskEmpty=new je(!1),this.onStable=new je(!1),this.onError=new je(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,lP(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,aP,yE,yE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},aP={};function $p(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cP(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{E0(()=>{t.callbackScheduled=!1,Yf(t),t.isCheckStableRunning=!0,$p(t),t.isCheckStableRunning=!1})}),Yf(t))}function lP(t){let e=()=>{cP(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(uP(a))return n.invokeTask(i,s,o,a);try{return vE(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_E(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return vE(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!dP(a)&&e(),_E(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Yf(t),$p(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Yf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _E(t){t._nesting--,$p(t)}var Jf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new je,this.onMicrotaskEmpty=new je,this.onStable=new je,this.onError=new je}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function uP(t){return I0(t,"__ignore_ng_zone__")}function dP(t){return I0(t,"__scheduler_tick__")}function I0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var C0=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=H({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function eu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Hw(i,a);else if(s==2){let l=a,u=e[++o];r=Hw(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var tu=class extends Fs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=hi(e);return new pa(n,this.ngModule)}};function wE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function hP(t){let e=t.toLowerCase();return e==="svg"?xR:e==="math"?MR:null}var Zf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=lu(r);let i=this.injector.get(e,_f,r);return i!==_f||n===_f?i:this.parentInjector.get(e,n,r)}},pa=class extends Xl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=wE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return wE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=dR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof bt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Zf(e,o):e,l=a.get(Ls,null);if(l===null)throw new $(407,!1);let u=a.get(oP,null),f=a.get(C0,null),p=a.get(fa,null),g={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},S=l.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",P=r?hM(S,r,this.componentDef.encapsulation,a):QI(S,N,hP(N)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let j=null;P!==null&&(j=Sp(P,a,!0));let ee=Fp(0,null,null,1,0,null,null,null,null,null,null),G=Iu(null,ee,null,M,null,null,g,S,a,null,j);wp(G);let Z,Le;try{let de=this.componentDef,C,y=null;de.findHostDirectiveDefs?(C=[],y=new Map,de.findHostDirectiveDefs(de,C,y),C.push(de)):C=[de];let _=fP(G,P),I=pP(_,P,de,C,G,g,S);Le=lI(ee,Nn),P&&yP(S,de,P,r),n!==void 0&&vP(Le,this.ngContentSelectors,n),Z=gP(I,de,C,y,G,[_P]),Up(ee,G,null)}finally{Ep()}return new Xf(this.componentType,Z,vu(Le,G),G,Le)}finally{we(s)}}},Xf=class extends Kf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Vp(s[le],s,i,e,n),this.previousInputValues.set(e,n);let o=Pr(this._tNode.index,s);jp(o,1)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fP(t,e){let n=t[le],r=Nn;return t[r]=e,Ia(n,r,2,"#host",null)}function pP(t,e,n,r,i,s,o){let a=i[le];mP(r,t,e,o);let l=null;e!==null&&(l=Sp(e,i[xs]));let u=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Iu(i,a0(n),null,f,i[t.index],t,s,u,null,null,l);return a.firstCreatePass&&zf(a,t,r.length-1),Cu(i,p),i[t.index]=p}function mP(t,e,n,r){for(let i of t)e.mergedAttrs=aa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(eu(e,e.mergedAttrs,!0),n!==null&&n0(r,n,e))}function gP(t,e,n,r,i,s){let o=wt(),a=i[le],l=Wt(o,i);c0(a,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,g=Os(i,a,p,o);xr(g,i)}l0(a,i,o),l&&xr(l,i);let u=Os(i,a,o.directiveStart+o.componentOffset,o);if(t[dn]=i[dn]=u,s!==null)for(let f of s)f(u,e);return Pp(a,o,i),u}function yP(t,e,n,r){if(r)Nf(t,n,["ng-version","18.0.1"]);else{let{attrs:i,classes:s}=hR(e.selectors[0]);i&&Nf(t,n,i),s&&s.length>0&&t0(t,n,s.join(" "))}}function vP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function _P(){let t=wt();yu(Ae()[le],t)}var Bs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wP;let t=e;return t})();function wP(){let t=wt();return IP(t,Ae())}var EP=Bs,b0=class extends EP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vu(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ip(this._hostTNode,this._hostLView);if(DI(e)){let n=Kl(e,this._hostLView),r=Wl(e),i=n[le].data[r+8];return new di(i,n)}else return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=EE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=pE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,fE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!SR(e),a;if(o)a=n;else{let N=n||{};a=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}let l=o?e:new pa(hi(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let P=(o?u:this.parentInjector).get(bt,null);P&&(s=P)}let f=hi(l.componentType??{}),p=pE(this._lContainer,f?.id??null),g=p?.firstChild??null,S=l.create(u,i,g,s);return this.insertImpl(S.hostView,a,fE(this._hostTNode,p)),S}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(kR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[vt],u=new b0(l,l[fn],l[vt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return BM(o,i,s,r),e.attachToViewContainerRef(),jE(wf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=EE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Hf(this._lContainer,n);r&&(Bl(wf(this._lContainer),n),ZI(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=Hf(this._lContainer,n);return r&&Bl(wf(this._lContainer),n)!=null?new yi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function EE(t){return t[ql]}function wf(t){return t[ql]||(t[ql]=[])}function IP(t,e){let n,r=e[t.index];return nr(r)?n=r:(n=u0(r,e,null,t),e[t.index]=n,Cu(e,n)),bP(n,e,t,r),new b0(n,t,e)}function CP(t,e){let n=t[Ke],r=n.createComment(""),i=Wt(e,t),s=xp(n,i);return Jl(n,s,r,eM(n,i),!1),r}var bP=SP,TP=()=>!1;function DP(t,e,n){return TP(t,e,n)}function SP(t,e,n,r){if(t[pi])return;let i;n.type&8?i=Rn(r):i=CP(e,n),t[pi]=i}function AP(t){return Object.getPrototypeOf(t.prototype).constructor}function Kt(t){let e=AP(t.type),n=!0,r=[t];for(;e;){let i;if(Rr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ml(t.inputs),o.inputTransforms=Ml(t.inputTransforms),o.declaredInputs=Ml(t.declaredInputs),o.outputs=Ml(t.outputs);let a=i.hostBindings;a&&PP(t,a);let l=i.viewQuery,u=i.contentQueries;if(l&&xP(t,l),u&&MP(t,u),NP(t,i),PN(t.outputs,i.outputs),Rr(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Kt&&(n=!1)}}e=Object.getPrototypeOf(e)}RP(r)}function NP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function RP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=aa(i.hostAttrs,n=aa(n,i.hostAttrs))}}function Ml(t){return t===Ss?{}:t===zt?[]:t}function xP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function MP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function PP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Hp(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Mr=class{},ma=class{};var ep=class extends Mr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tu(this);let i=QE(e);this._bootstrapComponents=KI(i.bootstrap),this._r3Injector=OI(e,n,[{provide:Mr,useValue:this},{provide:Fs,useValue:this.componentFactoryResolver},...r],yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},tp=class extends ma{constructor(e){super(),this.moduleType=e}create(e){return new ep(this.moduleType,e,[])}};var nu=class extends Mr{constructor(e){super(),this.componentFactoryResolver=new tu(this),this.instance=null;let n=new ca([...e.providers,{provide:Mr,useValue:this},{provide:Fs,useValue:this.componentFactoryResolver}],e.parent||mp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qp(t,e,n=null){return new nu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ei=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function T0(t){return OP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function kP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function OP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function FP(t,e,n){return t[e]=n}function Ca(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function LP(t){return(t.flags&32)===32}function VP(t,e,n,r,i,s,o,a,l){let u=e.consts,f=Ia(e,t,4,o||null,a||null);Lp(e,n,f,ks(u,l)),yu(e,f);let p=f.tView=Fp(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function UP(t,e,n,r,i,s,o,a,l,u){let f=n+Nn,p=e.firstCreatePass?VP(f,e,t,r,i,s,o,a,l):e.data[f];_i(p,!1);let g=jP(e,t,p,n);mu()&&wu(e,t,g,p),xr(g,t);let S=u0(g,t,g,p);return t[f]=S,Cu(t,S),DP(S,p,t),fu(p)&&kp(e,t,p),l!=null&&Op(t,p,u),p}function _e(t,e,n,r,i,s,o,a){let l=Ae(),u=Ft(),f=ks(u.consts,s);return UP(l,u,t,e,n,r,i,f,o,a),_e}var jP=BP;function BP(t,e,n,r){return gu(!0),e[Ke].createComment("")}function ba(t,e,n,r){let i=Ae(),s=_p();if(Ca(i,s,e)){let o=Ft(),a=CI();RM(a,i,t,e,n,r)}return ba}function $P(t,e,n,r){return Ca(t,_p(),n)?e+cu(n)+r:wi}function Pl(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function HP(t){return(t&2)==2}function qP(t,e){return t&131071|e<<17}function np(t){return t|2}function Vs(t){return(t&131068)>>2}function Ef(t,e){return t&-131069|e<<2}function zP(t){return(t&1)===1}function rp(t){return t|1}function GP(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=vi(o),l=Vs(o);t[r]=n;let u=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||va(p,f)>0)&&(u=!0)}else f=n;if(i)if(l!==0){let g=vi(t[a+1]);t[r+1]=Pl(g,a),g!==0&&(t[g+1]=Ef(t[g+1],r)),t[a+1]=qP(t[a+1],r)}else t[r+1]=Pl(a,0),a!==0&&(t[a+1]=Ef(t[a+1],r)),a=r;else t[r+1]=Pl(l,0),a===0?a=r:t[l+1]=Ef(t[l+1],r),l=r;u&&(t[r+1]=np(t[r+1])),IE(t,f,r,!0),IE(t,f,r,!1),WP(e,f,t,r,s),o=Pl(a,l),s?e.classBindings=o:e.styleBindings=o}function WP(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&va(s,e)>=0&&(n[r+1]=rp(n[r+1]))}function IE(t,e,n,r){let i=t[n+1],s=e===null,o=r?vi(i):Vs(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],u=t[o+1];KP(l,e)&&(a=!0,t[o+1]=r?rp(u):np(u)),o=r?vi(u):Vs(u)}a&&(t[n+1]=r?np(i):rp(i))}function KP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?va(t,e)>=0:!1}function W(t,e,n){let r=Ae(),i=_p();if(Ca(r,i,e)){let s=Ft(),o=CI();vM(s,o,r,t,e,r[Ke],n,!1)}return W}function CE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Vp(t,n,s[o],o,r)}function kr(t,e){return QP(t,e,null,!0),kr}function QP(t,e,n,r){let i=Ae(),s=Ft(),o=KR(2);if(s.firstUpdatePass&&JP(s,t,o,r),e!==wi&&Ca(i,o,e)){let a=s.data[js()];nk(s,a,i,i[Ke],t,i[o+1]=rk(e,n),r,o)}}function YP(t,e){return e>=t.expandoStartIndex}function JP(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[js()],o=YP(t,n);ik(s,r)&&e===null&&!o&&(e=!1),e=ZP(i,s,e,r),GP(i,s,e,n,o,r)}}function ZP(t,e,n,r){let i=ZR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=If(null,t,e,n,r),n=ga(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=If(i,t,e,n,r),s===null){let l=XP(t,e,r);l!==void 0&&Array.isArray(l)&&(l=If(null,t,e,l[1],r),l=ga(l,e.attrs,r),ek(t,e,r,l))}else s=tk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function XP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Vs(r)!==0)return t[vi(r)]}function ek(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[vi(i)]=r}function tk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ga(r,o,n)}return ga(r,e.attrs,n)}function If(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ga(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ga(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),XN(t,o,n?!0:e[++s]))}return t===void 0?null:t}function nk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],f=zP(u)?bE(l,e,n,i,Vs(u),o):void 0;if(!ru(f)){ru(s)||HP(u)&&(s=bE(l,null,n,i,a,o));let p=cI(js(),n);aM(r,o,p,i,s)}}function bE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,g=n[i+1];g===wi&&(g=p?zt:void 0);let S=p?df(g,r):f===r?g:void 0;if(u&&!ru(S)&&(S=df(l,r)),ru(S)&&(a=S,o))return a;let N=t[i+1];i=o?vi(N):Vs(N)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=df(l,r))}return a}function ru(t){return t!==void 0}function rk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=yt(Ea(t)))),t}function ik(t,e){return(t.flags&(e?8:16))!==0}function sk(t,e,n,r,i,s){let o=e.consts,a=ks(o,i),l=Ia(e,t,2,r,a);return Lp(e,n,l,ks(o,s)),l.attrs!==null&&eu(l,l.attrs,!1),l.mergedAttrs!==null&&eu(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function w(t,e,n,r){let i=Ae(),s=Ft(),o=Nn+t,a=i[Ke],l=s.firstCreatePass?sk(o,s,i,e,n,r):s.data[o],u=ok(s,i,l,a,e,t);i[o]=u;let f=fu(l);return _i(l,!0),n0(a,u,l),!LP(l)&&mu()&&wu(s,i,u,l),VR()===0&&xr(u,i),UR(),f&&(kp(s,i,l),Pp(s,l,i)),r!==null&&Op(i,l),w}function E(){let t=wt();vp()?mI():(t=t.parent,_i(t,!1));let e=t;$R(e)&&HR(),jR();let n=Ft();return n.firstCreatePass&&(yu(n,t),gp(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&sx(e)&&CE(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ox(e)&&CE(n,e,Ae(),e.stylesWithoutHost,!1),E}function re(t,e,n,r){return w(t,e,n,r),E(),re}var ok=(t,e,n,r,i,s)=>(gu(!0),QI(r,i,tx()));function ak(t,e,n,r,i){let s=e.consts,o=ks(s,r),a=Ia(e,t,8,"ng-container",o);o!==null&&eu(a,o,!0);let l=ks(s,i);return Lp(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function zp(t,e,n){let r=Ae(),i=Ft(),s=t+Nn,o=i.firstCreatePass?ak(s,i,r,e,n):i.data[s];_i(o,!0);let a=ck(i,r,o,t);return r[s]=a,mu()&&wu(i,r,a,o),xr(a,r),fu(o)&&(kp(i,r,o),Pp(i,o,r)),n!=null&&Op(r,o),zp}function Gp(){let t=wt(),e=Ft();return vp()?mI():(t=t.parent,_i(t,!1)),e.firstCreatePass&&(yu(e,t),gp(t)&&e.queries.elementEnd(t)),Gp}var ck=(t,e,n,r)=>(gu(!0),qx(e[Ke],""));function Ii(){return Ae()}var iu="en-US";var lk=iu;function uk(t){typeof t=="string"&&(lk=t.toLowerCase().replace(/_/g,"-"))}var dk=(t,e,n)=>{};function ge(t,e,n,r){let i=Ae(),s=Ft(),o=wt();return fk(s,i,i[Ke],o,t,e,r),ge}function hk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[la],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function fk(t,e,n,r,i,s,o){let a=fu(r),u=t.firstCreatePass&&OM(t),f=e[dn],p=kM(e),g=!0;if(r.type&3||o){let P=Wt(r,e),M=o?o(P):P,j=p.length,ee=o?Z=>o(Rn(Z[r.index])):r.index;dk(P,i,s);let G=null;if(!o&&a&&(G=hk(t,e,i,r.index)),G!==null){let Z=G.__ngLastListenerFn__||G;Z.__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,g=!1}else{s=DE(r,e,f,s);let Z=n.listen(M,i,s);p.push(s,Z),u&&u.push(i,ee,j,j+1)}}else s=DE(r,e,f,s);let S=r.outputs,N;if(g&&S!==null&&(N=S[i])){let P=N.length;if(P)for(let M=0;M<P;M+=2){let j=N[M],ee=N[M+1],Le=e[j][ee].subscribe(s),de=p.length;p.push(s,Le),u&&u.push(i,r.index,de,-(de+1))}}}function TE(t,e,n,r){let i=we(null);try{return bn(6,e,n),n(r)!==!1}catch(s){return h0(t,s),!1}finally{bn(7,e,n),we(i)}}function DE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Pr(t.index,e):e;jp(o,5);let a=TE(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=TE(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function $e(t=1){return ex(t)}function D0(t){let e=zR();return PR(e,Nn+t)}function b(t,e=""){let n=Ae(),r=Ft(),i=t+Nn,s=r.firstCreatePass?Ia(r,i,1,e,null):r.data[i],o=pk(r,n,s,e,t);n[i]=o,mu()&&wu(r,n,o,s),_i(s,!1)}var pk=(t,e,n,r,i)=>(gu(!0),$x(e[Ke],r));function ae(t){return Tt("",t,""),ae}function Tt(t,e,n){let r=Ae(),i=$P(r,t,e,n);return i!==wi&&FM(r,js(),i),Tt}function mk(t,e,n){let r=Ft();if(r.firstCreatePass){let i=Rr(t);ip(n,r.data,r.blueprint,i,!0),ip(e,r.data,r.blueprint,i,!1)}}function ip(t,e,n,r,i){if(t=gt(t),Array.isArray(t))for(let s=0;s<t.length;s++)ip(t[s],e,n,r,i);else{let s=Ft(),o=Ae(),a=wt(),l=Rs(t)?t:gt(t.provide),u=tI(t),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Rs(t)||!t.multi){let S=new gi(u,i,U),N=bf(l,e,i?f:f+g,p);N===-1?(Vf(Ql(a,o),s,l),Cf(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),o.push(S)):(n[N]=S,o[N]=S)}else{let S=bf(l,e,f+g,p),N=bf(l,e,f,f+g),P=S>=0&&n[S],M=N>=0&&n[N];if(i&&!M||!i&&!P){Vf(Ql(a,o),s,l);let j=vk(i?yk:gk,n.length,i,r,u);!i&&M&&(n[N].providerFactory=j),Cf(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),o.push(j)}else{let j=S0(n[i?N:S],u,!i&&r);Cf(s,t,S>-1?S:N,j)}!i&&r&&M&&n[N].componentProviders++}}}function Cf(t,e,n,r){let i=Rs(e),s=_R(e);if(i||s){let l=(s?gt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(n);f===-1?u.push(n,[r,l]):u[f+1].push(r,l)}else u.push(n,l)}}}function S0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function bf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gk(t,e,n,r){return sp(this.multi,[])}function yk(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Os(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),sp(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],sp(i,s);return s}function sp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vk(t,e,n,r,i){let s=new gi(t,n,U);return s.multi=[],s.index=e,s.componentProviders=0,S0(s,i,r&&!n),s}function Or(t,e=[]){return n=>{n.providersResolver=(r,i)=>mk(r,i?i(t):t,e)}}var _k=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ZE(!1,r.type),s=i.length>0?qp([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=H({token:e,providedIn:"environment",factory:()=>new e(q(bt))});let t=e;return t})();function He(t){Bp("NgStandalone"),t.getStandaloneInjector=e=>e.get(_k).getOrCreateStandaloneInjector(t)}function Ci(t,e,n,r){return Ek(Ae(),GR(),t,e,n,r)}function wk(t,e){let n=t[e];return n===wi?void 0:n}function Ek(t,e,n,r,i,s){let o=e+n;return Ca(t,o,i)?FP(t,o+1,s?r.call(s,i):r(i)):wk(t,o+1)}function A0(t,e){return v0(t,e)}var er=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},N0=new er("18.0.1"),Tu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var R0=new B("");function bi(t){return!!t&&typeof t.then=="function"}function x0(t){return!!t&&typeof t.subscribe=="function"}var M0=new B(""),P0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=L(M0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(bi(o))r.push(o);else if(x0(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Du=new B("");function Ik(){vw(()=>{throw new $(600,!1)})}function Ck(t){return t.isBoundToModule}var bk=10;function Tk(t,e,n){try{let r=n();return bi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ti=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(FI),this.afterRenderEffectManager=L(C0),this.zonelessEnabled=L(_0),this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=L(Ei).hasPendingTasks.pipe(J(r=>!r)),this._injector=L(bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Xl;if(!this._injector.get(P0).done){let S=!s&&KE(r),N=!1;throw new $(405,N)}let a;s?a=r:a=this._injector.get(Fs).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=Ck(a)?void 0:this._injector.get(Mr),u=i||a.selector,f=a.create(_t.NULL,[],u,l),p=f.location.nativeElement,g=f.injector.get(R0,null);return g?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Tf(this.components,f),g?.unregisterApplication(p)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new $(101,!1);let i=we(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,we(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Ls,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<bk;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:u}of this._views)Dk(l,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>da(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>da(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Tf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Du,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Tf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new $(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Dk(t,e,n,r){if(!n&&!da(t))return;p0(t,e,n&&!r?0:1)}var op=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Wp=(()=>{let e=class e{compileModuleSync(r){return new tp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=QE(r),o=KI(s.declarations).reduce((a,l)=>{let u=hi(l);return u&&a.push(new pa(u)),a},[]);return new op(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sk=(()=>{let e=class e{constructor(){this.zone=L(Ee),this.changeDetectionScheduler=L(fa),this.applicationRef=L(Ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ak({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ee(Rk()),[{provide:Ee,useFactory:t},{provide:As,multi:!0,useFactory:()=>{let n=L(Sk,{optional:!0});return()=>n.initialize()}},{provide:As,multi:!0,useFactory:()=>{let n=L(xk);return()=>{n.initialize()}}},{provide:FI,useFactory:Nk},e===!0?{provide:w0,useValue:!0}:[]]}function Nk(){let t=L(Ee),e=L(Zn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Rk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var xk=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=L(Ee),this.pendingTasks=L(Ei)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Mk=(()=>{let e=class e{constructor(){this.appRef=L(Ti),this.taskService=L(Ei),this.ngZone=L(Ee),this.zonelessEnabled=L(_0),this.disableScheduling=L(w0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Fe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jf||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?gE:E0;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ee.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Pk(){return typeof $localize<"u"&&$localize.locale||iu}var Kp=new B("",{providedIn:"root",factory:()=>L(Kp,ne.Optional|ne.SkipSelf)||Pk()});var k0=new B("");var Vl=null;function kk(t=[],e){return _t.create({name:e,providers:[{provide:uu,useValue:"platform"},{provide:k0,useValue:new Set([()=>Vl=null])},...t]})}function Ok(t=[]){if(Vl)return Vl;let e=kk(t);return Vl=e,Ik(),Fk(e),e}function Fk(t){t.get(Tp,null)?.forEach(n=>n())}var $s=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Lk;let t=e;return t})();function Lk(t){return Vk(wt(),Ae(),(t&16)===16)}function Vk(t,e,n){if(hu(t)&&!n){let r=Pr(t.index,e);return new yi(r,r)}else if(t.type&47){let r=e[An];return new yi(r,e)}return null}var ap=class{constructor(){}supports(e){return T0(e)}create(e){return new cp(e)}},Uk=(t,e)=>e,cp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Uk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<SE(r,i,s)?n:r,a=SE(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,f=l-i;if(u!=f){for(let g=0;g<u;g++){let S=g<s.length?s[g]:s[g]=0,N=S+g;f<=N&&N<u&&(s[g]=S+1)}let p=o.previousIndex;s[p]=f-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!T0(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,kP(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new lp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new su),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new su),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},up=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},su=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new up,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function SE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function AE(){return new Qp([new ap])}var Qp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||AE()),deps:[[e,new UE,new Ye]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new $(901,!1)}};e.\u0275prov=H({token:e,providedIn:"root",factory:AE});let t=e;return t})();function O0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Ok(r),s=[Ak({}),{provide:fa,useExisting:Mk},...n||[]],a=new nu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ee);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Zn,null),f;l.runOutsideAngular(()=>{f=l.onError.subscribe({next:S=>{u.handleError(S)}})});let p=()=>a.destroy(),g=i.get(k0);return g.add(p),a.onDestroy(()=>{f.unsubscribe(),g.delete(p)}),Tk(u,l,()=>{let S=a.get(P0);return S.runInitializers(),S.donePromise.then(()=>{let N=a.get(Kp,iu);uk(N||iu);let P=a.get(Ti);return e!==void 0&&P.bootstrap(e),P})})})}catch(e){return Promise.reject(e)}}function Di(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var B0=null;function sr(){return B0}function $0(t){B0??=t}var Su=class{};var Dt=new B(""),H0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(jk),providedIn:"platform"});let t=e;return t})();var jk=(()=>{let e=class e extends H0{constructor(){super(),this._doc=L(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sr().getBaseHref(this._doc)}onPopState(r){let i=sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function q0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function F0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Si(t){return t&&t[0]!=="?"?"?"+t:t}var qs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(z0),providedIn:"root"});let t=e;return t})(),Bk=new B(""),z0=(()=>{let e=class e extends qs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return q0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Si(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Si(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Si(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(H0),q(Bk,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ta=(()=>{let e=class e{constructor(r){this._subject=new je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=qk(F0(L0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Si(i))}normalize(r){return e.stripTrailingSlash(Hk(this._basePath,L0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Si(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Si(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Si,e.joinWithSlash=q0,e.stripTrailingSlash=F0,e.\u0275fac=function(i){return new(i||e)(q(qs))},e.\u0275prov=H({token:e,factory:()=>$k(),providedIn:"root"});let t=e;return t})();function $k(){return new Ta(q(qs))}function Hk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function L0(t){return t.replace(/\/index.html$/,"")}function qk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Au(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Jp=/\s+/,V0=[],zs=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=V0,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Jp):V0}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Jp):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Jp).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(U(gn),U(Pn))},e.\u0275dir=Pe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Zp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Nu=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Zp(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),U0(l,s)}});for(let s=0,o=i.length;s<o;s++){let l=i.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);U0(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(U(Bs),U(bu),U(Qp))},e.\u0275dir=Pe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function U0(t,e){t.context.$implicit=e.item}var kn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Xp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){j0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){j0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(U(Bs),U(bu))},e.\u0275dir=Pe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Xp=class{constructor(){this.$implicit=null,this.ngIf=null}};function j0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${yt(e)}'.`)}var Ge=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})(),G0="browser",zk="server";function Ru(t){return t===zk}var Hs=class{};var Sa=class{},Mu=class{},Qt=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var tm=class{encodeKey(e){return W0(e)}encodeValue(e){return W0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Gk(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}var Wk=/%(\d[a-f0-9])/gi,Kk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function W0(t){return encodeURIComponent(t).replace(Wk,(e,n)=>Kk[n]??e)}function xu(t){return`${t}`}var Lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Gk(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(xu):[xu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(xu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(xu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var nm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Qk(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function K0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Q0(t){return typeof Blob<"u"&&t instanceof Blob}function Y0(t){return typeof FormData<"u"&&t instanceof FormData}function Yk(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Da=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Qk(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Qt,this.context??=new nm,!this.params)this.params=new Lr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||K0(this.body)||Q0(this.body)||Y0(this.body)||Yk(this.body)?this.body:this.body instanceof Lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Y0(this.body)?null:Q0(this.body)?this.body.type||null:K0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,f=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,S)=>g.set(S,e.setHeaders[S]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((g,S)=>g.set(S,e.setParams[S]),f)),new t(n,r,o,{params:f,headers:u,context:p,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}},Vr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Vr||{}),Aa=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Qt,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Pu=class t extends Aa{constructor(e={}){super(e),this.type=Vr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Na=class t extends Aa{constructor(e={}){super(e),this.type=Vr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fr=class extends Aa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},eC=200,Jk=204;function em(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var sm=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Da)o=r;else{let u;s.headers instanceof Qt?u=s.headers:u=new Qt(s.headers);let f;s.params&&(s.params instanceof Lr?f=s.params:f=new Lr({fromObject:s.params})),o=new Da(r,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=z(o).pipe(Tr(u=>this.handler.handle(u)));if(r instanceof Da||s.observe==="events")return a;let l=a.pipe(kt(u=>u instanceof Na));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(J(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Lr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,em(s,i))}post(r,i,s={}){return this.request("POST",r,em(s,i))}put(r,i,s={}){return this.request("PUT",r,em(s,i))}};e.\u0275fac=function(i){return new(i||e)(q(Sa))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Zk=/^\)\]\}',?\n/,Xk="X-Request-URL";function J0(t){if(t.url)return t.url;let e=Xk.toLocaleLowerCase();return t.headers.get(e)}var eO=(()=>{let e=class e{constructor(){this.fetchImpl=L(rm,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=L(Ee)}handle(r){return new te(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(im,o=>i.error(new Fr({error:o}))),()=>s.abort()})}doRequest(r,i,s){return R(this,null,function*(){let o=this.createRequestInit(r),a;try{let N=this.fetchImpl(r.urlWithParams,F({signal:i},o));tO(N),s.next({type:Vr.Sent}),a=yield N}catch(N){s.error(new Fr({error:N,status:N.status??0,statusText:N.statusText,url:r.urlWithParams,headers:N.headers}));return}let l=new Qt(a.headers),u=a.statusText,f=J0(a)??r.urlWithParams,p=a.status,g=null;if(r.reportProgress&&s.next(new Pu({headers:l,status:p,statusText:u,url:f})),a.body){let N=a.headers.get("content-length"),P=[],M=a.body.getReader(),j=0,ee,G,Z=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>R(this,null,function*(){for(;;){let{done:de,value:C}=yield M.read();if(de)break;if(P.push(C),j+=C.length,r.reportProgress){G=r.responseType==="text"?(G??"")+(ee??=new TextDecoder).decode(C,{stream:!0}):void 0;let y=()=>s.next({type:Vr.DownloadProgress,total:N?+N:void 0,loaded:j,partialText:G});Z?Z.run(y):y()}}}));let Le=this.concatChunks(P,j);try{let de=a.headers.get("Content-Type")??"";g=this.parseBody(r,Le,de)}catch(de){s.error(new Fr({error:de,headers:new Qt(a.headers),status:a.status,statusText:a.statusText,url:J0(a)??r.urlWithParams}));return}}p===0&&(p=g?eC:0),p>=200&&p<300?(s.next(new Na({body:g,headers:l,status:p,statusText:u,url:f})),s.complete()):s.error(new Fr({error:g,headers:l,status:p,statusText:u,url:f}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(Zk,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),i.Accept??="application/json, text/plain, */*",!i["Content-Type"]){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),rm=class{};function im(){}function tO(t){t.then(im,im)}function nO(t,e){return e(t)}function rO(t,e,n){return(r,i)=>hn(n,()=>e(r,s=>t(s,i)))}var tC=new B(""),iO=new B(""),sO=new B("",{providedIn:"root",factory:()=>!0});var Z0=(()=>{let e=class e extends Sa{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=L(Ei),this.contributeToStability=L(sO)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(tC),...this.injector.get(iO,[])]));this.chain=i.reduceRight((s,o)=>rO(s,o,this.injector),nO)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(li(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(q(Mu),q(bt))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();var oO=/^\)\]\}',?\n/;function aO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var X0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new $(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?xe(i.\u0275loadImpl()):z(null)).pipe(Ot(()=>new te(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((M,j)=>a.setRequestHeader(M,j.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let M=r.detectContentTypeHeader();M!==null&&a.setRequestHeader("Content-Type",M)}if(r.responseType){let M=r.responseType.toLowerCase();a.responseType=M!=="json"?M:"text"}let l=r.serializeBody(),u=null,f=()=>{if(u!==null)return u;let M=a.statusText||"OK",j=new Qt(a.getAllResponseHeaders()),ee=aO(a)||r.url;return u=new Pu({headers:j,status:a.status,statusText:M,url:ee}),u},p=()=>{let{headers:M,status:j,statusText:ee,url:G}=f(),Z=null;j!==Jk&&(Z=typeof a.response>"u"?a.responseText:a.response),j===0&&(j=Z?eC:0);let Le=j>=200&&j<300;if(r.responseType==="json"&&typeof Z=="string"){let de=Z;Z=Z.replace(oO,"");try{Z=Z!==""?JSON.parse(Z):null}catch(C){Z=de,Le&&(Le=!1,Z={error:C,text:Z})}}Le?(o.next(new Na({body:Z,headers:M,status:j,statusText:ee,url:G||void 0})),o.complete()):o.error(new Fr({error:Z,headers:M,status:j,statusText:ee,url:G||void 0}))},g=M=>{let{url:j}=f(),ee=new Fr({error:M,status:a.status||0,statusText:a.statusText||"Unknown Error",url:j||void 0});o.error(ee)},S=!1,N=M=>{S||(o.next(f()),S=!0);let j={type:Vr.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(j.total=M.total),r.responseType==="text"&&a.responseText&&(j.partialText=a.responseText),o.next(j)},P=M=>{let j={type:Vr.UploadProgress,loaded:M.loaded};M.lengthComputable&&(j.total=M.total),o.next(j)};return a.addEventListener("load",p),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",N),l!==null&&a.upload&&a.upload.addEventListener("progress",P)),a.send(l),o.next({type:Vr.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",p),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",N),l!==null&&a.upload&&a.upload.removeEventListener("progress",P)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(q(Hs))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),nC=new B(""),cO="XSRF-TOKEN",lO=new B("",{providedIn:"root",factory:()=>cO}),uO="X-XSRF-TOKEN",dO=new B("",{providedIn:"root",factory:()=>uO}),ku=class{},hO=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Au(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(q(Dt),q(Mn),q(lO))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function fO(t,e){let n=t.url.toLowerCase();if(!L(nC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=L(ku).getToken(),i=L(dO);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function rC(...t){let e=[sm,X0,Z0,{provide:Sa,useExisting:Z0},{provide:Mu,useFactory:()=>L(eO,{optional:!0})??L(X0)},{provide:tC,useValue:fO,multi:!0},{provide:nC,useValue:!0},{provide:ku,useClass:hO}];for(let n of t)e.push(...n.\u0275providers);return _a(e)}var cm=class extends Su{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lm=class t extends cm{static makeCurrent(){$0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=mO();return n==null?null:gO(n)}resetBaseElement(){Ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Au(document.cookie,e)}},Ra=null;function mO(){return Ra=Ra||document.querySelector("base"),Ra?Ra.getAttribute("href"):null}function gO(t){return new URL(t,document.baseURI).pathname}var yO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),um=new B(""),aC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new $(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(q(um),q(Ee))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Ou=class{constructor(e){this._doc=e}},om="ng-app-id",cC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ru(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${om}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(om),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(om,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(q(Dt),q(bp),q(Dp,8),q(Mn))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),am={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hm=/%COMP%/g,lC="%COMP%",vO=`_nghost-${lC}`,_O=`_ngcontent-${lC}`,wO=!0,EO=new B("",{providedIn:"root",factory:()=>wO});function IO(t){return _O.replace(hm,t)}function CO(t){return vO.replace(hm,t)}function uC(t,e){return e.map(n=>n.replace(hm,t))}var iC=(()=>{let e=class e{constructor(r,i,s,o,a,l,u,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Ru(l),this.defaultRenderer=new xa(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Dn.ShadowDom&&(i=ie(F({},i),{encapsulation:Dn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Fu?s.applyToHost(r):s instanceof Ma&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Dn.Emulated:o=new Fu(u,f,i,this.appId,p,a,l,g);break;case Dn.ShadowDom:return new dm(u,f,r,i,a,l,this.nonce,g);default:o=new Ma(u,f,i,p,a,l,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(q(aC),q(cC),q(bp),q(EO),q(Dt),q(Mn),q(Ee),q(Dp))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),xa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(am[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=am[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=am[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Xn.DashCase|Xn.Important)?e.style.setProperty(n,r,i&Xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function sC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var dm=class extends xa{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=uC(i.id,i.styles);for(let f of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ma=class extends xa{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?uC(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Fu=class extends Ma{constructor(e,n,r,i,s,o,a,l){let u=i+"-"+r.id;super(e,n,r,s,o,a,l,u),this.contentAttr=IO(u),this.hostAttr=CO(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},bO=(()=>{let e=class e extends Ou{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(q(Dt))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),oC=["alt","control","meta","shift"],TO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},SO=(()=>{let e=class e extends Ou{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),oC.forEach(f=>{let p=i.indexOf(f);p>-1&&(i.splice(p,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=TO[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),oC.forEach(a=>{if(a!==s){let l=DO[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(q(Dt))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function dC(t,e){return O0(F({rootComponent:t},AO(e)))}function AO(t){return{appProviders:[...PO,...t?.providers??[]],platformProviders:MO}}function NO(){lm.makeCurrent()}function RO(){return new Zn}function xO(){return HI(document),document}var MO=[{provide:Mn,useValue:G0},{provide:Tp,useValue:NO,multi:!0},{provide:Dt,useFactory:xO,deps:[]}];var PO=[{provide:uu,useValue:"root"},{provide:Zn,useFactory:RO,deps:[]},{provide:um,useClass:bO,multi:!0,deps:[Dt,Ee,Mn]},{provide:um,useClass:SO,multi:!0,deps:[Dt]},iC,cC,aC,{provide:Ls,useExisting:iC},{provide:Hs,useClass:yO,deps:[]},[]];var hC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(q(Dt))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var X="primary",Ka=Symbol("RouteTitle"),ym=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Zs(t){return new ym(t)}function OO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function FO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}function On(t,e){let n=t?vm(t):void 0,r=e?vm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!wC(t[i],e[i]))return!1;return!0}function vm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function wC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function EC(t){return t.length>0?t[t.length-1]:null}function Br(t){return nf(t)?t:bi(t)?xe(Promise.resolve(t)):z(t)}var LO={exact:CC,subset:bC},IC={exact:VO,subset:UO,ignored:()=>!0};function fC(t,e,n){return LO[n.paths](t.root,e.root,n.matrixParams)&&IC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function VO(t,e){return On(t,e)}function CC(t,e,n){if(!Ni(t.segments,e.segments)||!Uu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!CC(t.children[r],e.children[r],n))return!1;return!0}function UO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wC(t[n],e[n]))}function bC(t,e,n){return TC(t,e,e.segments,n)}function TC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ni(i,n)||e.hasChildren()||!Uu(i,n,r))}else if(t.segments.length===n.length){if(!Ni(t.segments,n)||!Uu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!bC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ni(t.segments,i)||!Uu(t.segments,i,r)||!t.children[X]?!1:TC(t.children[X],e,s,r)}}function Uu(t,e,n){return e.every((r,i)=>IC[n](t[i].parameters,r.parameters))}var Ur=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zs(this.queryParams),this._queryParamMap}toString(){return $O.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ju(this)}},Ai=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Zs(this.parameters),this._parameterMap}toString(){return SC(this)}};function jO(t,e){return Ni(t,e)&&t.every((n,r)=>On(n.parameters,e[r].parameters))}function Ni(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function BO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var qm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>new Ua,providedIn:"root"});let t=e;return t})(),Ua=class{parse(e){let n=new wm(e);return new Ur(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Pa(e.root,!0)}`,r=zO(e.queryParams),i=typeof e.fragment=="string"?`#${HO(e.fragment)}`:"";return`${n}${r}${i}`}},$O=new Ua;function ju(t){return t.segments.map(e=>SC(e)).join("/")}function Pa(t,e){if(!t.hasChildren())return ju(t);if(e){let n=t.children[X]?Pa(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==X&&r.push(`${i}:${Pa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=BO(t,(r,i)=>i===X?[Pa(t.children[X],!1)]:[`${i}:${Pa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${ju(t)}/${n[0]}`:`${ju(t)}/(${n.join("//")})`}}function DC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lu(t){return DC(t).replace(/%3B/gi,";")}function HO(t){return encodeURI(t)}function _m(t){return DC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(t){return decodeURIComponent(t)}function pC(t){return Bu(t.replace(/\+/g,"%20"))}function SC(t){return`${_m(t.path)}${qO(t.parameters)}`}function qO(t){return Object.entries(t).map(([e,n])=>`;${_m(e)}=${_m(n)}`).join("")}function zO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Lu(n)}=${Lu(i)}`).join("&"):`${Lu(n)}=${Lu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var GO=/^[^\/()?;#]+/;function fm(t){let e=t.match(GO);return e?e[0]:""}var WO=/^[^\/()?;=#]+/;function KO(t){let e=t.match(WO);return e?e[0]:""}var QO=/^[^=?&#]+/;function YO(t){let e=t.match(QO);return e?e[0]:""}var JO=/^[^&#]+/;function ZO(t){let e=t.match(JO);return e?e[0]:""}var wm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new Ie(e,n)),r}parseSegment(){let e=fm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ai(Bu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=KO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=fm(this.remaining);i&&(r=i,this.capture(r))}e[Bu(n)]=Bu(r)}parseQueryParam(e){let n=YO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=ZO(this.remaining);o&&(r=o,this.capture(r))}let i=pC(n),s=pC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[X]:new Ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function AC(t){return t.segments.length>0?new Ie([],{[X]:t}):t}function NC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=NC(i);if(r===X&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ie(t.segments,e);return XO(n)}function XO(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new Ie(t.segments.concat(e.segments),e.children)}return t}function ja(t){return t instanceof Ur}function e1(t,e,n=null,r=null){let i=RC(t);return xC(i,e,n,r)}function RC(t){let e;function n(s){let o={};for(let l of s.children){let u=n(l);o[l.outlet]=u}let a=new Ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=AC(r);return e??i}function xC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return pm(i,i,i,n,r);let s=t1(e);if(s.toRoot())return pm(i,i,new Ie([],{}),n,r);let o=n1(s,i,t),a=o.processChildren?Fa(o.segmentGroup,o.index,s.commands):PC(o.segmentGroup,o.index,s.commands);return pm(i,o.segmentGroup,a,n,r)}function $u(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ba(t){return typeof t=="object"&&t!=null&&t.outlets}function pm(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let o;t===e?o=n:o=MC(t,e,n);let a=AC(NC(o));return new Ur(a,s,i)}function MC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=MC(s,e,n)}),new Ie(t.segments,r)}var Hu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&$u(r[0]))throw new $(4003,!1);let i=r.find(Ba);if(i&&i!==EC(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function t1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Hu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Hu(n,e,r)}var Qs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function n1(t,e,n){if(t.isAbsolute)return new Qs(e,!0,0);if(!n)return new Qs(e,!1,NaN);if(n.parent===null)return new Qs(n,!0,0);let r=$u(t.commands[0])?0:1,i=n.segments.length-1+r;return r1(n,i,t.numberOfDoubleDots)}function r1(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Qs(r,!1,i-s)}function i1(t){return Ba(t[0])?t[0].outlets:{[X]:t}}function PC(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Fa(t,e,n);let r=s1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ie(t.segments.slice(0,r.pathIndex),{});return s.children[X]=new Ie(t.segments.slice(r.pathIndex),t.children),Fa(s,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?Em(t,e,n):r.match?Fa(t,0,i):Em(t,e,n)}function Fa(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=i1(n),i={};if(Object.keys(r).some(s=>s!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let s=Fa(t.children[X],e,n);return new Ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(t.segments,i)}}function s1(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ba(a))break;let l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!gC(l,u,o))return s;r+=2}else{if(!gC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Em(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ba(s)){let l=o1(s.outlets);return new Ie(r,l)}if(i===0&&$u(n[0])){let l=t.segments[e];r.push(new Ai(l.path,mC(n[0]))),i++;continue}let o=Ba(s)?s.outlets[X]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&$u(a)?(r.push(new Ai(o,mC(a))),i+=2):(r.push(new Ai(o,{})),i++)}return new Ie(r,{})}function o1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Em(new Ie([],{}),0,r))}),e}function mC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function gC(t,e,n){return t==n.path&&On(e,n.parameters)}var La="imperative",it=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(it||{}),Yt=class{constructor(e,n){this.id=e,this.url=n}},Ri=class extends Yt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jr=class extends Yt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Vt||{}),Im=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Im||{}),or=class extends Yt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xi=class extends Yt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},$a=class extends Yt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qu=class extends Yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cm=class extends Yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends Yt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tm=class extends Yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends Yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Am=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rm=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xm=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ha=class{},Xs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var Pm=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Ju(this.injector),this.attachRef=null}},Ju=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Pm(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(q(bt))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=km(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=km(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Om(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Om(e,this._root).map(n=>n.value)}};function km(t,e){if(t===e.value)return e;for(let n of e.children){let r=km(t,n);if(r)return r}return null}function Om(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Om(t,n);if(r.length)return r.unshift(e),r}return[]}var Lt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ks(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Gu=class extends zu{constructor(e,n){super(e),this.snapshot=n,zm(this,e)}toString(){return this.snapshot.toString()}};function kC(t){let e=a1(t),n=new rt([new Ai("",{})]),r=new rt({}),i=new rt({}),s=new rt({}),o=new rt(""),a=new ar(n,r,s,o,i,X,t,e.root);return a.snapshot=e.root,new Gu(new Lt(a,[]),e)}function a1(t){let e={},n={},r={},i="",s=new Ys([],e,r,i,n,X,t,null,{});return new Ku("",new Lt(s,[]))}var ar=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[Ka]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Zs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Zs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&FC(i)&&(r.resolve[Ka]=i.title),r}var Ys=class{get title(){return this.data?.[Ka]}constructor(e,n,r,i,s,o,a,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ku=class extends zu{constructor(e,n){super(n),this.url=e,zm(this,n)}toString(){return OC(this._root)}};function zm(t,e){e.value._routerState=t,e.children.forEach(n=>zm(t,n))}function OC(t){let e=t.children.length>0?` { ${t.children.map(OC).join(", ")} } `:"";return`${t.value}${e}`}function mm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),On(e.params,n.params)||t.paramsSubject.next(n.params),FO(e.url,n.url)||t.urlSubject.next(n.url),On(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Fm(t,e){let n=On(t.params,e.params)&&jO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Fm(t.parent,e.parent))}function FC(t){return typeof t.title=="string"||t.title===null}var Gm=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new je,this.deactivateEvents=new je,this.attachEvents=new je,this.detachEvents=new je,this.parentContexts=L(Ju),this.location=L(Bs),this.changeDetector=L($s),this.inputBinder=L(Wm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Lm(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rr]});let t=e;return t})(),Lm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ar?this.route:e===Ju?this.childContexts:this.parent.get(e,n)}},Wm=new B("");function c1(t,e,n){let r=qa(t,e._root,n?n._root:void 0);return new Gu(r,e)}function qa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=l1(t,e,n);return new Lt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qa(t,a)),o}}let r=u1(e.value),i=e.children.map(s=>qa(t,s));return new Lt(r,i)}}function l1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qa(t,r,i);return qa(t,r)})}function u1(t){return new ar(new rt(t.url),new rt(t.params),new rt(t.queryParams),new rt(t.fragment),new rt(t.data),t.outlet,t.component,t)}var za=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},LC="ngNavigationCancelingError";function Qu(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VC(!1,Vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[LC]=!0,n.cancellationCode=e,n}function d1(t){return UC(t)&&ja(t.url)}function UC(t){return!!t&&t[LC]}var h1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["ng-component"]],standalone:!0,features:[He],decls:1,vars:0,template:function(i,s){i&1&&re(0,"router-outlet")},dependencies:[Gm],encapsulation:2});let t=e;return t})();function f1(t,e){return t.providers&&!t._injector&&(t._injector=qp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Km(t){let e=t.children&&t.children.map(Km),n=e?ie(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=h1),n}function yn(t){return t.outlet||X}function p1(t,e){let n=t.filter(r=>yn(r)===e);return n.push(...t.filter(r=>yn(r)!==e)),n}function Qa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var m1=(t,e,n,r)=>J(i=>(new Vm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Vm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),mm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ks(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ks(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Mm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Rm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(mm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Qa(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Yu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Js=class{constructor(e,n){this.component=e,this.route=n}};function g1(t,e,n){let r=t._root,i=e?e._root:null;return ka(r,i,n,[r.value])}function y1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function to(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ME(t)?t:e.get(t):r}function ka(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ks(e);return t.children.forEach(o=>{v1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Va(a,n.getContext(o),i)),i}function v1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=_1(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Yu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ka(t,e,a?a.children:null,r,i):ka(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Js(a.outlet.component,o))}else o&&Va(e,a,i),i.canActivateChecks.push(new Yu(r)),s.component?ka(t,null,a?a.children:null,r,i):ka(t,null,n,r,i);return i}function _1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ni(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fm(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!Fm(t,e)}}function Va(t,e,n){let r=Ks(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Va(o,e.children.getContext(s),n):Va(o,null,n):Va(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Js(e.outlet.component,i)):n.canDeactivateChecks.push(new Js(null,i)):n.canDeactivateChecks.push(new Js(null,i))}function Ya(t){return typeof t=="function"}function w1(t){return typeof t=="boolean"}function E1(t){return t&&Ya(t.canLoad)}function I1(t){return t&&Ya(t.canActivate)}function C1(t){return t&&Ya(t.canActivateChild)}function b1(t){return t&&Ya(t.canDeactivate)}function T1(t){return t&&Ya(t.canMatch)}function jC(t){return t instanceof Yn||t?.name==="EmptyError"}var Vu=Symbol("INITIAL_VALUE");function eo(){return Ot(t=>Sl(t.map(e=>e.pipe(Jn(1),lf(Vu)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===Vu)return Vu;if(n===!1||D1(n))return n}return!0}),kt(e=>e!==Vu),Jn(1)))}function D1(t){return ja(t)||t instanceof za}function S1(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?z(ie(F({},n),{guardsResult:!0})):A1(o,r,i,t).pipe(ze(a=>a&&w1(a)?N1(r,s,t,e):z(a)),J(a=>ie(F({},n),{guardsResult:a})))})}function A1(t,e,n,r){return xe(t).pipe(ze(i=>k1(i.component,i.route,n,e,r)),Cn(i=>i!==!0,!0))}function N1(t,e,n,r){return xe(e).pipe(Tr(i=>_s(x1(i.route.parent,r),R1(i.route,r),P1(t,i.path,n),M1(t,i.route,n))),Cn(i=>i!==!0,!0))}function R1(t,e){return t!==null&&e&&e(new xm(t)),z(!0)}function x1(t,e){return t!==null&&e&&e(new Nm(t)),z(!0)}function M1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>Al(()=>{let o=Qa(e)??n,a=to(s,o),l=I1(a)?a.canActivate(e,t):hn(o,()=>a(e,t));return Br(l).pipe(Cn())}));return z(i).pipe(eo())}function P1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>y1(o)).filter(o=>o!==null).map(o=>Al(()=>{let a=o.guards.map(l=>{let u=Qa(o.node)??n,f=to(l,u),p=C1(f)?f.canActivateChild(r,t):hn(u,()=>f(r,t));return Br(p).pipe(Cn())});return z(a).pipe(eo())}));return z(s).pipe(eo())}function k1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(a=>{let l=Qa(e)??i,u=to(a,l),f=b1(u)?u.canDeactivate(t,e,n,r):hn(l,()=>u(t,e,n,r));return Br(f).pipe(Cn())});return z(o).pipe(eo())}function O1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let a=to(o,t),l=E1(a)?a.canLoad(e,n):hn(t,()=>a(e,n));return Br(l)});return z(s).pipe(eo(),BC(r))}function BC(t){return Kh(Me(e=>{if(typeof e!="boolean")throw Qu(t,e)}),J(e=>e===!0))}function F1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let a=to(o,t),l=T1(a)?a.canMatch(e,n):hn(t,()=>a(e,n));return Br(l)});return z(s).pipe(eo(),BC(r))}var Ga=class{constructor(e){this.segmentGroup=e||null}},Wa=class extends Error{constructor(e){super(),this.urlTree=e}};function Ws(t){return vs(new Ga(t))}function L1(t){return vs(new $(4e3,!1))}function V1(t){return vs(VC(!1,Vt.GuardRejected))}var Um=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[X])return L1(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:u,routeConfig:f,url:p,outlet:g,params:S,data:N,title:P}=i,M=hn(s,()=>a({params:S,data:N,queryParams:l,fragment:u,routeConfig:f,url:p,outlet:g,title:P}));if(M instanceof Ur)throw new Wa(M);n=M}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Wa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ur(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},jm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U1(t,e,n,r,i){let s=Qm(t,e,n);return s.matched?(r=f1(e,r),F1(r,e,n,i).pipe(J(o=>o===!0?s:F({},jm)))):z(s)}function Qm(t,e,n){if(e.path==="**")return j1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},jm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OO)(n,t,e);if(!i)return F({},jm);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function j1(t){return{matched:!0,parameters:t.length>0?EC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yC(t,e,n,r){return n.length>0&&H1(t,n,r)?{segmentGroup:new Ie(e,$1(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&q1(t,n,r)?{segmentGroup:new Ie(t.segments,B1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function B1(t,e,n,r){let i={};for(let s of n)if(Zu(t,e,s)&&!r[yn(s)]){let o=new Ie([],{});i[yn(s)]=o}return F(F({},r),i)}function $1(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&yn(r)!==X){let i=new Ie([],{});n[yn(r)]=i}return n}function H1(t,e,n){return n.some(r=>Zu(t,e,r)&&yn(r)!==X)}function q1(t,e,n){return n.some(r=>Zu(t,e,r))}function Zu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function z1(t,e,n,r){return yn(t)!==r&&(r===X||!Zu(e,n,t))?!1:Qm(e,t,n).matched}function G1(t,e,n){return e.length===0&&!t.children[n]}var Bm=class{};function W1(t,e,n,r,i,s,o="emptyOnly"){return new $m(t,e,n,r,i,o,s).recognize()}var K1=31,$m=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Um(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=yC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:n,rootSnapshot:r})=>{let i=new Lt(r,n),s=new Ku("",i),o=e1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Ys([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(J(r=>({children:r,rootSnapshot:n})),cn(r=>{if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(J(o=>o instanceof Lt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return xe(s).pipe(Tr(o=>{let a=r.children[o],l=p1(n,o);return this.processSegmentGroup(e,l,a,o,i)}),cf((o,a)=>(o.push(...a),o)),Dr(null),af(),ze(o=>{if(o===null)return Ws(r);let a=$C(o);return Q1(a),z(a)}))}processSegment(e,n,r,i,s,o,a){return xe(n).pipe(Tr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(cn(u=>{if(u instanceof Ga)return z(null);throw u}))),Cn(l=>!!l),cn(l=>{if(jC(l))return G1(r,i,s)?z(new Bm):Ws(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return z1(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Ws(i):Ws(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:p,remainingSegments:g}=Qm(n,i,s);if(!l)return Ws(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>K1&&(this.allowRedirects=!1));let S=new Ys(s,u,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,vC(i),yn(i),i.component??i._loadedComponent??null,i,_C(i)),N=Wu(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let P=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,S,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(ze(M=>this.processSegment(e,r,n,M.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=U1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ot(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ot(({routes:u})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:S}=l,N=new Ys(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,vC(r),yn(r),r.component??r._loadedComponent??null,r,_C(r)),P=Wu(N,o,this.paramsInheritanceStrategy);N.params=Object.freeze(P.params),N.data=Object.freeze(P.data);let{segmentGroup:M,slicedSegments:j}=yC(n,g,S,u);if(j.length===0&&M.hasChildren())return this.processChildren(f,u,M,N).pipe(J(G=>new Lt(N,G)));if(u.length===0&&j.length===0)return z(new Lt(N,[]));let ee=yn(r)===s;return this.processSegment(f,u,M,j,ee?X:s,!0,N).pipe(J(G=>new Lt(N,G instanceof Lt?[G]:[])))}))):Ws(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?z({routes:n._loadedRoutes,injector:n._loadedInjector}):O1(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(Me(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):V1(n))):z({routes:[],injector:e})}};function Q1(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function Y1(t){let e=t.value.routeConfig;return e&&e.path===""}function $C(t){let e=[],n=new Set;for(let r of t){if(!Y1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=$C(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!n.has(r))}function vC(t){return t.data||{}}function _C(t){return t.resolve||{}}function J1(t,e,n,r,i,s){return ze(o=>W1(t,e,n,r,o.extractedUrl,i,s).pipe(J(({state:a,tree:l})=>ie(F({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Z1(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of HC(l))o.add(u);let a=0;return xe(o).pipe(Tr(l=>s.has(l)?X1(l,r,t,e):(l.data=Wu(l,l.parent,t).resolve,z(void 0))),Me(()=>a++),ws(1),ze(l=>a===o.size?z(n):Pt))})}function HC(t){let e=t.children.map(n=>HC(n)).flat();return[t,...e]}function X1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!FC(i)&&(s[Ka]=i.title),eF(s,t,e,r).pipe(J(o=>(t._resolvedData=o,t.data=Wu(t,t.parent,n).resolve,null)))}function eF(t,e,n,r){let i=vm(t);if(i.length===0)return z({});let s={};return xe(i).pipe(ze(o=>tF(t[o],e,n,r).pipe(Cn(),Me(a=>{if(a instanceof za)throw Qu(new Ua,a);s[o]=a}))),ws(1),of(s),cn(o=>jC(o)?Pt:vs(o)))}function tF(t,e,n,r){let i=Qa(e)??r,s=to(t,i),o=s.resolve?s.resolve(e,n):hn(i,()=>s(e,n));return Br(o)}function gm(t){return Ot(e=>{let n=t(e);return n?xe(n).pipe(J(()=>e)):z(e)})}var qC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===X);return i}getResolvedTitleForRoute(r){return r.data[Ka]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(nF),providedIn:"root"});let t=e;return t})(),nF=(()=>{let e=class e extends qC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(q(hC))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ym=new B("",{providedIn:"root",factory:()=>({})}),Jm=new B(""),rF=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Wp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Br(r.loadComponent()).pipe(J(zC),Me(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),li(()=>{this.componentLoaders.delete(r)})),s=new ps(i,()=>new Ve).pipe(fs());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=iF(i,this.compiler,r,this.onLoadEndListener).pipe(li(()=>{this.childrenLoaders.delete(i)})),a=new ps(o,()=>new Ve).pipe(fs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iF(t,e,n,r){return Br(t.loadChildren()).pipe(J(zC),ze(i=>i instanceof ma||Array.isArray(i)?z(i):xe(e.compileModuleAsync(i))),J(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Jm,[],{optional:!0,self:!0}).flat()),{routes:o.map(Km),injector:s}}))}function sF(t){return t&&typeof t=="object"&&"default"in t}function zC(t){return sF(t)?t.default:t}var Zm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(oF),providedIn:"root"});let t=e;return t})(),oF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aF=new B("");var cF=new B(""),lF=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=L(rF),this.environmentInjector=L(bt),this.urlSerializer=L(qm),this.rootContexts=L(Ju),this.location=L(Ta),this.inputBindingEnabled=L(Wm,{optional:!0})!==null,this.titleStrategy=L(qC),this.options=L(Ym,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Zm),this.createViewTransition=L(aF,{optional:!0}),this.navigationErrorHandler=L(cF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Sm(s)),i=s=>this.events.next(new Am(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ie(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new rt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:La,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(o=>o.id!==0),J(o=>ie(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ot(o=>{let a=!1,l=!1;return z(o).pipe(Ot(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Vt.SupersededByNewNavigation),Pt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ie(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&p!=="reload"){let g="";return this.events.next(new xi(u.id,this.urlSerializer.serialize(u.rawUrl),g,Im.IgnoredSameUrlNavigation)),u.resolve(!1),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return z(u).pipe(Ot(g=>{let S=this.transitions?.getValue();return this.events.next(new Ri(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),S!==this.transitions?.getValue()?Pt:Promise.resolve(g)}),J1(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ie(F({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let S=new qu(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(S)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:S,source:N,restoredState:P,extras:M}=u,j=new Ri(g,this.urlSerializer.serialize(S),N,P);this.events.next(j);let ee=kC(this.rootComponentType).snapshot;return this.currentTransition=o=ie(F({},u),{targetSnapshot:ee,urlAfterRedirects:S,extras:ie(F({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,z(o)}else{let g="";return this.events.next(new xi(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Im.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Pt}}),Me(u=>{let f=new Cm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),J(u=>(this.currentTransition=o=ie(F({},u),{guards:g1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),S1(this.environmentInjector,u=>this.events.next(u)),Me(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Qu(this.urlSerializer,u.guardsResult);let f=new bm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),kt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Vt.GuardRejected),!1)),gm(u=>{if(u.guards.canActivateChecks.length)return z(u).pipe(Me(f=>{let p=new Tm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),Ot(f=>{let p=!1;return z(f).pipe(Z1(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",Vt.NoDataFromResolver)}}))}),Me(f=>{let p=new Dm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),gm(u=>{let f=p=>{let g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(Me(S=>{p.component=S}),J(()=>{})));for(let S of p.children)g.push(...f(S));return g};return Sl(f(u.targetSnapshot.root)).pipe(Dr(null),Jn(1))}),gm(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return p?xe(p).pipe(J(()=>o)):z(o)}),J(u=>{let f=c1(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ie(F({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Me(()=>{this.events.next(new Ha)}),m1(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Jn(1),Me({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),uf(this.transitionAbortSubject.pipe(Me(u=>{throw u}))),li(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),cn(u=>{if(l=!0,UC(u))this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),d1(u)?this.events.next(new Xs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let f=new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let p=hn(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(p instanceof za){let{message:g,cancellationCode:S}=Qu(this.urlSerializer,p);this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),g,S)),this.events.next(new Xs(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(f);let g=r.errorHandler(u);o.resolve(!!g)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Pt}))}))}cancelNavigationTransition(r,i,s){let o=new or(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uF(t){return t!==La}var dF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(hF),providedIn:"root"});let t=e;return t})(),Hm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hF=(()=>{let e=class e extends Hm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:()=>L(fF),providedIn:"root"});let t=e;return t})(),fF=(()=>{let e=class e extends GC{constructor(){super(...arguments),this.location=L(Ta),this.urlSerializer=L(qm),this.options=L(Ym,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Zm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ur,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ri)this.stateMemento=this.createStateMemento();else if(r instanceof xi)this.rawUrlTree=i.initialUrl;else if(r instanceof qu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Ha?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof or&&(r.code===Vt.GuardRejected||r.code===Vt.NoDataFromResolver)?this.restoreHistory(i):r instanceof $a?this.restoreHistory(i,!0):r instanceof jr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Oa||{});function pF(t,e){t.events.pipe(kt(n=>n instanceof jr||n instanceof or||n instanceof $a||n instanceof xi),J(n=>n instanceof jr||n instanceof xi?Oa.COMPLETE:(n instanceof or?n.code===Vt.Redirect||n.code===Vt.SupersededByNewNavigation:!1)?Oa.REDIRECTING:Oa.FAILED),kt(n=>n!==Oa.REDIRECTING),Jn(1)).subscribe(()=>{e()})}function mF(t){throw t}var gF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Et=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(Tu),this.stateManager=L(GC),this.options=L(Ym,{optional:!0})||{},this.pendingTasks=L(Ei),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(lF),this.urlSerializer=L(qm),this.location=L(Ta),this.urlHandlingStrategy=L(Zm),this._events=new Ve,this.errorHandler=this.options.errorHandler||mF,this.navigated=!1,this.routeReuseStrategy=L(dF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Jm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Wm,{optional:!0}),this.eventsSubscription=new Fe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof or&&i.code!==Vt.Redirect&&i.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof jr)this.navigated=!0;else if(i instanceof Xs){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u=F({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uF(s.source)},a);this.scheduleNavigation(l,La,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}_F(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),La,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=F({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Km),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,p=null;switch(l){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let S=s?s.snapshot:this.routerState.snapshot.root;g=RC(S)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return xC(g,r,p,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=ja(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,La,null,i)}navigate(r,i={skipLocationChange:!1}){return vF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},gF):i===!1?s=F({},yF):s=i,ja(r))return fC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return fC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((g,S)=>{l=g,u=S});let p=this.pendingTasks.add();return pF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function _F(t){return!(t instanceof Ha)&&!(t instanceof Xs)}var WC=(()=>{let e=class e{constructor(r,i,s,o,a,l){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new Ve,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(f=>{f instanceof jr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:GI(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(U(Et),U(ar),Cp("tabindex"),U(Pn),U(gn),U(qs))},e.\u0275dir=Pe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ge("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ba("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Di],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Di],replaceUrl:[2,"replaceUrl","replaceUrl",Di],routerLink:"routerLink"},standalone:!0,features:[Hp,rr]});let t=e;return t})();var wF=new B("");function KC(t,...e){return _a([{provide:Jm,multi:!0,useValue:t},[],{provide:ar,useFactory:EF,deps:[Et]},{provide:Du,multi:!0,useFactory:IF},e.map(n=>n.\u0275providers)])}function EF(t){return t.routerState.root}function IF(){let t=L(_t);return e=>{let n=t.get(Ti);if(e!==n.components[0])return;let r=t.get(Et),i=t.get(CF);t.get(bF)===1&&r.initialNavigation(),t.get(TF,null,ne.Optional)?.setUpPreloading(),t.get(wF,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var CF=new B("",{factory:()=>new Ve}),bF=new B("",{providedIn:"root",factory:()=>1});var TF=new B("");var eg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var V=function(t,e){if(!t)throw Pi(e)},Pi=function(t){return new Error("Firebase Database ("+eg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var YC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ed={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|u>>6,S=u&63;l||(S=64,o||(g=64)),r.push(n[f],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new tg;let g=s<<2|a>>4;if(r.push(g),u!==64){let S=a<<4&240|u>>2;if(r.push(S),p!==64){let N=u<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rg=function(t){let e=YC(t);return ed.encodeByteArray(e,!0)},Ja=function(t){return rg(t).replace(/\./g,"")},Za=function(t){try{return ed.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JC(t){return ZC(void 0,t)}function ZC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!SF(n)||(t[n]=ZC(t[n],e[n]));return t}function SF(t){return t!=="__proto__"}function AF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var NF=()=>AF().__FIREBASE_DEFAULTS__,RF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Za(t[1]);return e&&JSON.parse(e)},ig=()=>{try{return NF()||RF()||xF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sg=t=>{var e,n;return(n=(e=ig())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},og=t=>{let e=sg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ag=()=>{var t;return(t=ig())===null||t===void 0?void 0:t.config},cg=t=>{var e;return(e=ig())===null||e===void 0?void 0:e[`_${t}`]};var Mi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function lg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ja(JSON.stringify(n)),Ja(JSON.stringify(o)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xa(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function XC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function td(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eb(){let t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fn(){return eg.NODE_CLIENT===!0||eg.NODE_ADMIN===!0}function ug(){try{return typeof indexedDB=="object"}catch{return!1}}function tb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var MF="FirebaseError",Ut=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cr.prototype.create)}},cr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ut(i,a,r)}};function PF(t,e){return t.replace(kF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kF=/\{\$([^}]+)}/g;function ro(t){return JSON.parse(t)}function Xe(t){return JSON.stringify(t)}var nb=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ro(Za(s[0])||""),n=ro(Za(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var rb=function(t){let e=nb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ib=function(t){let e=nb(t).claims;return typeof e=="object"&&e.admin===!0};function Ln(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ec(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Oi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(QC(s)&&QC(o)){if(!Oi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function QC(t){return t!==null&&typeof t=="object"}function Fi(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function io(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function so(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Xu=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let g=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,f;for(let p=0;p<80;p++){p<40?p<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):p<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);let g=(i<<5|i>>>27)+u+l+f+r[p]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function sb(t,e){let n=new ng(t,e);return n.subscribe.bind(n)}var ng=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xm),i.error===void 0&&(i.error=Xm),i.complete===void 0&&(i.complete=Xm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function OF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xm(){}function ob(t,e){return`${t} failed: ${e} argument `}var ab=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,V(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var L9=4*60*60*1e3;function Jt(t){return t&&t._delegate?t._delegate:t}var St=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Li="[DEFAULT]";var nd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Mi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LF(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FF(t){return t===Li?void 0:t}function LF(t){return t.instantiationMode==="EAGER"}var rc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new nd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var VF=[],ye=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ye||{}),UF={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},jF=ye.INFO,BF={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},$F=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=BF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vn=class{constructor(e){this.name=e,this._logLevel=jF,this._logHandler=$F,this._userLogHandler=null,VF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var HF=(t,e)=>e.some(n=>t instanceof n),cb,lb;function qF(){return cb||(cb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zF(){return lb||(lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ub=new WeakMap,hg=new WeakMap,db=new WeakMap,dg=new WeakMap,pg=new WeakMap;function GF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Un(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ub.set(n,t)}).catch(()=>{}),pg.set(e,t),e}function WF(t){if(hg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hg.set(t,e)}var fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hb(t){fg=t(fg)}function KF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(rd(this),e,...n);return db.set(r,e.sort?e.sort():[e]),Un(r)}:zF().includes(t)?function(...e){return t.apply(rd(this),e),Un(ub.get(this))}:function(...e){return Un(t.apply(rd(this),e))}}function QF(t){return typeof t=="function"?KF(t):(t instanceof IDBTransaction&&WF(t),HF(t,qF())?new Proxy(t,fg):t)}function Un(t){if(t instanceof IDBRequest)return GF(t);if(dg.has(t))return dg.get(t);let e=QF(t);return e!==t&&(dg.set(t,e),pg.set(e,t)),e}var rd=t=>pg.get(t);function pb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Un(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Un(o.result),l.oldVersion,l.newVersion,Un(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var YF=["get","getKey","getAll","getAllKeys","count"],JF=["put","add","delete","clear"],mg=new Map;function fb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YF.includes(n)))return;let s=function(o,...a){return R(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&l.done]))[0]})};return mg.set(e,s),s}hb(t=>ie(F({},t),{get:(e,n,r)=>fb(e,n)||t.get(e,n,r),has:(e,n)=>!!fb(e,n)||t.has(e,n)}));var yg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function ZF(t){let e=t.getComponent();return e?.type==="VERSION"}var vg="@firebase/app",mb="0.10.4";var Vi=new Vn("@firebase/app"),XF="@firebase/app-compat",eL="@firebase/analytics-compat",tL="@firebase/analytics",nL="@firebase/app-check-compat",rL="@firebase/app-check",iL="@firebase/auth",sL="@firebase/auth-compat",oL="@firebase/database",aL="@firebase/database-compat",cL="@firebase/functions",lL="@firebase/functions-compat",uL="@firebase/installations",dL="@firebase/installations-compat",hL="@firebase/messaging",fL="@firebase/messaging-compat",pL="@firebase/performance",mL="@firebase/performance-compat",gL="@firebase/remote-config",yL="@firebase/remote-config-compat",vL="@firebase/storage",_L="@firebase/storage-compat",wL="@firebase/firestore",EL="@firebase/vertexai-preview",IL="@firebase/firestore-compat",CL="firebase",bL="10.12.1";var _g="[DEFAULT]",TL={[vg]:"fire-core",[XF]:"fire-core-compat",[tL]:"fire-analytics",[eL]:"fire-analytics-compat",[rL]:"fire-app-check",[nL]:"fire-app-check-compat",[iL]:"fire-auth",[sL]:"fire-auth-compat",[oL]:"fire-rtdb",[aL]:"fire-rtdb-compat",[cL]:"fire-fn",[lL]:"fire-fn-compat",[uL]:"fire-iid",[dL]:"fire-iid-compat",[hL]:"fire-fcm",[fL]:"fire-fcm-compat",[pL]:"fire-perf",[mL]:"fire-perf-compat",[gL]:"fire-rc",[yL]:"fire-rc-compat",[vL]:"fire-gcs",[_L]:"fire-gcs-compat",[wL]:"fire-fst",[IL]:"fire-fst-compat",[EL]:"fire-vertex","fire-js":"fire-js",[CL]:"fire-js-all"};var ic=new Map,DL=new Map,wg=new Map;function gb(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){let e=t.name;if(wg.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,t);for(let n of ic.values())gb(n,t);for(let n of DL.values())gb(n,t);return!0}function oo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t.settings!==void 0}var SL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new cr("app","Firebase",SL);var Eg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};var Bn=bL;function bg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_g,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=ag()),!n)throw $r.create("no-options");let s=ic.get(i);if(s){if(Oi(n,s.options)&&Oi(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}let o=new rc(i);for(let l of wg.values())o.addComponent(l);let a=new Eg(n,r,o);return ic.set(i,a),a}function Ui(t=_g){let e=ic.get(t);if(!e&&t===_g&&ag())return bg();if(!e)throw $r.create("no-app",{appName:t});return e}function id(){return Array.from(ic.values())}function Re(t,e,n){var r;let i=(r=TL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(a.join(" "));return}jn(new St(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var AL="firebase-heartbeat-database",NL=1,sc="firebase-heartbeat-store",gg=null;function wb(){return gg||(gg=pb(AL,NL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),gg}function RL(t){return R(this,null,function*(){try{let n=(yield wb()).transaction(sc),r=yield n.objectStore(sc).get(Eb(t));return yield n.done,r}catch(e){if(e instanceof Ut)Vi.warn(e.message);else{let n=$r.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(n.message)}}})}function yb(t,e){return R(this,null,function*(){try{let r=(yield wb()).transaction(sc,"readwrite");yield r.objectStore(sc).put(e,Eb(t)),yield r.done}catch(n){if(n instanceof Ut)Vi.warn(n.message);else{let r=$r.create("idb-set",{originalErrorMessage:n?.message});Vi.warn(r.message)}}})}function Eb(t){return`${t.name}!${t.options.appId}`}var xL=1024,ML=30*24*60*60*1e3,Ig=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Cg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=ML}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return R(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=vb(),{heartbeatsToSend:r,unsentEntries:i}=PL(this._heartbeatsCache.heartbeats),s=Ja(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function vb(){return new Date().toISOString().substring(0,10)}function PL(t,e=xL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_b(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Cg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return ug()?tb().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield RL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function _b(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}function kL(t){jn(new St("platform-logger",e=>new yg(e),"PRIVATE")),jn(new St("heartbeat",e=>new Ig(e),"PRIVATE")),Re(vg,mb,t),Re(vg,mb,"esm2017"),Re("fire-js","")}kL("");var OL="firebase",FL="10.12.1";Re(OL,FL,"app");var ur=new er("ANGULARFIRE2_VERSION");function co(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var $i=(t,e)=>{let n=e?[e]:id(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Bi=class{constructor(){return $i(LL)}},LL="app-check";function ao(){}var sd=class{zone;delegate;constructor(e,n=ef){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Tg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),n.pipe(Me({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sd(Zone.current)),this.insideAngular=n.run(()=>new sd(Zone.current,Xh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(q(Ee))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function od(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function VL(t){return od().ngZone.runOutsideAngular(()=>t())}function ji(t){return od().ngZone.run(()=>t())}function UL(t){return jL(od())(t)}function jL(t){return function(n){return n=n.lift(new Tg(t.ngZone)),n.pipe(br(t.outsideAngular),Cr(t.insideAngular))}}var BL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ji(()=>t.apply(void 0,r))},Hr=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ji(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao))),r[s]=BL(r[s],n));let i=VL(()=>t.apply(this,r));if(!e)if(i instanceof te){let s=od();return i.pipe(br(s.outsideAngular),Cr(s.insideAngular))}else return ji(()=>i);return i instanceof te?i.pipe(UL):i instanceof Promise?ji(()=>new Promise((s,o)=>i.then(a=>ji(()=>s(a)),a=>ji(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ji(()=>i)};var vn=class{constructor(e){return e}},qr=class{constructor(){return id()}};function $L(t){return t&&t.length===1?t[0]:new vn(Ui())}var Dg=new B("angularfire2._apps"),HL={provide:vn,useFactory:$L,deps:[[new Ye,Dg]]},qL={provide:qr,deps:[[new Ye,Dg]]};function zL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new vn(r)}}var Sg=(()=>{class t{constructor(n){Re("angularfire",ur.full,"core"),Re("angularfire",ur.full,"app"),Re("angular",N0.full,n.toString())}static \u0275fac=function(r){return new(r||t)(q(Mn))};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[HL,qL]})}return t})();function Ib(t,...e){return{ngModule:Sg,providers:[{provide:Dg,useFactory:zL(t),multi:!0,deps:[Ee,_t,Hi,...e]}]}}var Cb=Hr(bg,!0);function Bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $b=Bb,Hb=new cr("auth","Firebase",Bb());var hd=new Vn("@firebase/auth");function GL(t,...e){hd.logLevel<=ye.WARN&&hd.warn(`Auth (${Bn}): ${t}`,...e)}function cd(t,...e){hd.logLevel<=ye.ERROR&&hd.error(`Auth (${Bn}): ${t}`,...e)}function Hn(t,...e){throw Qg(t,...e)}function zi(t,...e){return Qg(t,...e)}function qb(t,e,n){let r=Object.assign(Object.assign({},$b()),{[e]:n});return new cr("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return qb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Hb.create(t,...e)}function K(t,e,...n){if(!t)throw Qg(e,...n)}function dr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cd(e),new Error(e)}function Gr(t,e){t||dr(e)}function xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WL(){return bb()==="http:"||bb()==="https:"}function bb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function KL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WL()||XC()||"connection"in navigator)?navigator.onLine:!0}function QL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Gi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=Xa()||td()}get(){return KL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yg(t,e){Gr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var YL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var JL=new Gi(3e4,6e4);function Ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function fr(s,o,a,l){return R(this,arguments,function*(t,e,n,r,i={}){return zb(t,i,()=>R(this,null,function*(){let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});let p=Fi(Object.assign({key:t.config.apiKey},f)).slice(1),g=yield t._getAdditionalHeaders();return g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode),fd.fetch()(Gb(t,t.config.apiHost,n,p),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},u))}))})}function zb(t,e,n){return R(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},YL),e);try{let i=new Mg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ad(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ad(t,"user-disabled",o);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qb(t,f,u);Hn(t,f)}}catch(i){if(i instanceof Ut)throw i;Hn(t,"network-request-failed",{message:String(i)})}})}function Cd(s,o,a,l){return R(this,arguments,function*(t,e,n,r,i={}){let u=yield fr(t,e,n,r,i);return"mfaPendingCredential"in u&&Hn(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function Gb(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Yg(t.config,i):`${t.config.apiScheme}://${i}`}function ZL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Mg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),JL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ad(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=zi(t,e,r);return i.customData._tokenResponse=n,i}function Tb(t){return t!==void 0&&t.enterprise!==void 0}var Pg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function XL(t,e){return R(this,null,function*(){return fr(t,"GET","/v2/recaptchaConfig",Ki(t,e))})}function eV(t,e){return R(this,null,function*(){return fr(t,"POST","/v1/accounts:delete",e)})}function Wb(t,e){return R(this,null,function*(){return fr(t,"POST","/v1/accounts:lookup",e)})}function oc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jg(t,e=!1){return R(this,null,function*(){let n=Jt(t),r=yield n.getIdToken(e),i=Zg(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:oc(Ag(i.auth_time)),issuedAtTime:oc(Ag(i.iat)),expirationTime:oc(Ag(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ag(t){return Number(t)*1e3}function Zg(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Za(n);return i?JSON.parse(i):(cd("Failed to decode base64 JWT payload"),null)}catch(i){return cd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Db(t){let e=Zg(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lo(t,e,n=!1){return R(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ut&&tV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function tV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var kg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>R(this,null,function*(){yield this.iteration()}),n)}iteration(){return R(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var cc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pd(t){return R(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield lo(t,Wb(n,{idToken:r}));K(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Kb(s.providerUserInfo):[],a=nV(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cc(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function Xg(t){return R(this,null,function*(){let e=Jt(t);yield pd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function nV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Kb(t){return t.map(e=>{var{providerId:n}=e,r=tf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function rV(t,e){return R(this,null,function*(){let n=yield zb(t,{},()=>R(this,null,function*(){let r=Fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Gb(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function iV(t,e){return R(this,null,function*(){return fr(t,"POST","/v2/accounts:revokeToken",Ki(t,e))})}var ac=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=Db(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return R(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return R(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield rV(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return dr("not implemented")}};function zr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var uo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return R(this,null,function*(){let n=yield lo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Jg(this,e)}reload(){return Xg(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return R(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield pd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return R(this,null,function*(){if(lr(this.auth.app))return Promise.reject(qi(this.auth));let e=yield this.getIdToken();return yield lo(this,eV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,S=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,j=(u=n.createdAt)!==null&&u!==void 0?u:void 0,ee=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:G,emailVerified:Z,isAnonymous:Le,providerData:de,stsTokenManager:C}=n;K(G&&C,e,"internal-error");let y=ac.fromJSON(this.name,C);K(typeof G=="string",e,"internal-error"),zr(p,e.name),zr(g,e.name),K(typeof Z=="boolean",e,"internal-error"),K(typeof Le=="boolean",e,"internal-error"),zr(S,e.name),zr(N,e.name),zr(P,e.name),zr(M,e.name),zr(j,e.name),zr(ee,e.name);let _=new t({uid:G,auth:e,email:g,emailVerified:Z,displayName:p,isAnonymous:Le,photoURL:N,phoneNumber:S,tenantId:P,stsTokenManager:y,createdAt:j,lastLoginAt:ee});return de&&Array.isArray(de)&&(_.providerData=de.map(I=>Object.assign({},I))),M&&(_._redirectEventId=M),_}static _fromIdTokenResponse(e,n,r=!1){return R(this,null,function*(){let i=new ac;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return R(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Kb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ac;a.updateFromIdToken(r);let l=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var Sb=new Map;function hr(t){Gr(t instanceof Function,"Expected a class definition");let e=Sb.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sb.set(t,e),e)}var sV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return R(this,null,function*(){return!0})}_set(n,r){return R(this,null,function*(){this.storage[n]=r})}_get(n){return R(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return R(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Og=sV;function ld(t,e,n){return`firebase:${t}:${e}:${n}`}var md=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ld(this.userKey,i.apiKey,s),this.fullPersistenceKey=ld("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return R(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return R(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return R(this,null,function*(){if(!n.length)return new t(hr(Og),e,r);let i=(yield Promise.all(n.map(u=>R(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||hr(Og),o=ld(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let f=yield u._get(o);if(f){let p=uo._fromJSON(e,f);u!==s&&(a=p),s=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,r):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>R(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function Ab(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xb(e))return"Blackberry";if(eT(e))return"Webos";if(ey(e))return"Safari";if((e.includes("chrome/")||Yb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Qb(t=Ze()){return/firefox\//i.test(t)}function ey(t=Ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yb(t=Ze()){return/crios\//i.test(t)}function Jb(t=Ze()){return/iemobile/i.test(t)}function Zb(t=Ze()){return/android/i.test(t)}function Xb(t=Ze()){return/blackberry/i.test(t)}function eT(t=Ze()){return/webos/i.test(t)}function bd(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oV(t=Ze()){var e;return bd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aV(){return eb()&&document.documentMode===10}function tT(t=Ze()){return bd(t)||Zb(t)||eT(t)||Xb(t)||/windows phone/i.test(t)||Jb(t)}function cV(){try{return!!(window&&window!==window.top)}catch{return!1}}function nT(t,e=[]){let n;switch(t){case"Browser":n=Ab(Ze());break;case"Worker":n=`${Ab(Ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bn}/${r}`}var Fg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return R(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function lV(n){return R(this,arguments,function*(t,e={}){return fr(t,"GET","/v2/passwordPolicy",Ki(t,e))})}var uV=6,Lg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Vg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gd(this),this.idTokenSubscription=new gd(this),this.beforeStateQueue=new Fg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(()=>R(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield md.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return R(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return R(this,null,function*(){try{let n=yield Wb(this,{idToken:e}),r=yield uo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return R(this,null,function*(){var n;if(lr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return R(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return R(this,null,function*(){try{yield pd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=QL()}_delete(){return R(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return R(this,null,function*(){if(lr(this.app))return Promise.reject(qi(this));let n=e?Jt(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return R(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>R(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return R(this,null,function*(){return lr(this.app)?Promise.reject(qi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return lr(this.app)?Promise.reject(qi(this)):this.queue(()=>R(this,null,function*(){yield this.assertedPersistence.setPersistence(hr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return R(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return R(this,null,function*(){let e=yield lV(this),n=new Lg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return R(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield iV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return R(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return R(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&hr(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield md.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return R(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>R(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return R(this,null,function*(){if(e===this.currentUser)return this.queue(()=>R(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return R(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return R(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return R(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&GL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Td(t){return Jt(t)}var gd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=sb(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dd={loadJS(){return R(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(t){Dd=t}function rT(t){return Dd.loadJS(t)}function hV(){return Dd.recaptchaEnterpriseScript}function fV(){return Dd.gapiScript}function iT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var pV="recaptcha-enterprise",mV="NO_RECAPTCHA",Ug=class{constructor(e){this.type=pV,this.auth=Td(e)}verify(e="verify",n=!1){return R(this,null,function*(){function r(s){return R(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>R(this,null,function*(){XL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Pg(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})}))})}function i(s,o,a){let l=window.grecaptcha;Tb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(mV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Tb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=hV();l.length!==0&&(l+=a),rT(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})})}};function Nb(t,e,n,r=!1){return R(this,null,function*(){let i=new Ug(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Rb(t,e,n,r){return R(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Nb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>R(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Nb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function ty(t,e){let n=oo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Oi(s,e??{}))return i;Hn(i,"already-initialized")}return n.initialize({options:e})}function gV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(hr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ny(t,e,n){let r=Td(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=sT(e),{host:o,port:a}=yV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||vV()}function sT(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yV(t){let e=sT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:xb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:xb(o)}}}function xb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function vV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var lc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,n){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}};function _V(t,e){return R(this,null,function*(){return fr(t,"POST","/v1/accounts:update",e)})}function wV(t,e){return R(this,null,function*(){return fr(t,"POST","/v1/accounts:signUp",e)})}function EV(t,e){return R(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithPassword",Ki(t,e))})}function IV(t,e){return R(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))})}function CV(t,e){return R(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))})}var uc=class t extends lc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return R(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rb(e,n,"signInWithPassword",EV);case"emailLink":return IV(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}})}_linkToIdToken(e,n){return R(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rb(e,r,"signUpPassword",wV);case"emailLink":return CV(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ng(t,e){return R(this,null,function*(){return Cd(t,"POST","/v1/accounts:signInWithIdp",Ki(t,e))})}function bV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TV(t){let e=io(so(t)).link,n=e?io(so(e)).deep_link_id:null,r=io(so(t)).deep_link_id;return(r?io(so(r)).link:null)||r||n||e||t}var yd=class t{constructor(e){var n,r,i,s,o,a;let l=io(so(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,p=bV((i=l.mode)!==null&&i!==void 0?i:null);K(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=TV(e);try{return new t(n)}catch{return null}}};var ry=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return uc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=yd.parseLink(r);return K(i,"argument-error"),uc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),vd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var jg=class extends vd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var dc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return R(this,null,function*(){let s=yield uo._fromIdTokenResponse(e,r,i),o=Mb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return R(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Mb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Mb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Bg=class t extends Ut{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function oT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bg._fromErrorAndOperation(t,s,e,r):s})}function DV(t,e,n=!1){return R(this,null,function*(){let r=yield lo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return dc._forOperation(t,"link",r)})}function aT(t,e,n=!1){return R(this,null,function*(){let{auth:r}=t;if(lr(r.app))return Promise.reject(qi(r));let i="reauthenticate";try{let s=yield lo(t,oT(r,i,e,t),n);K(s.idToken,r,"internal-error");let o=Zg(s.idToken);K(o,r,"internal-error");let{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),dc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Hn(r,"user-mismatch"),s}})}function SV(t,e,n=!1){return R(this,null,function*(){if(lr(t.app))return Promise.reject(qi(t));let r="signIn",i=yield oT(t,r,e),s=yield dc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function iy(t,e){return R(this,null,function*(){return aT(Jt(t),e)})}function Sd(t,e){return AV(Jt(t),null,e)}function AV(t,e,n){return R(this,null,function*(){let{auth:r}=t,s={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);let o=yield lo(t,_V(r,s));yield t._updateTokensIfNecessary(o,!0)})}function sy(t,e,n,r){return Jt(t).onIdTokenChanged(e,n,r)}function oy(t,e,n){return Jt(t).beforeAuthStateChanged(e,n)}var _d="__sak";var wd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function NV(){let t=Ze();return ey(t)||bd(t)}var RV=1e3,xV=10,MV=(()=>{class t extends wd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NV()&&cV(),this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);aV()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,xV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},RV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return R(this,null,function*(){yield Er(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return R(this,null,function*(){let r=yield Er(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return R(this,null,function*(){yield Er(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),cT=MV;var PV=(()=>{class t extends wd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ay=PV;function kV(t){return Promise.all(t.map(e=>R(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var OV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return R(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(a).map(f=>R(this,null,function*(){return f(r.origin,o)})),u=yield kV(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function lT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var $g=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return R(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let u=lT("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function $n(){return window}function FV(t){$n().location.href=t}function uT(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}function LV(){return R(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UV(){return uT()?self:null}var dT="firebaseLocalStorageDb",jV=1,Ed="firebaseLocalStorage",hT="fbase_key",Wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ad(t,e){return t.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function BV(){let t=indexedDB.deleteDatabase(dT);return new Wi(t).toPromise()}function Hg(){let t=indexedDB.open(dT,jV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Ed,{keyPath:hT})}catch(i){n(i)}}),t.addEventListener("success",()=>R(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Ed)?e(r):(r.close(),yield BV(),e(yield Hg()))}))})}function Pb(t,e,n){return R(this,null,function*(){let r=Ad(t,!0).put({[hT]:e,value:n});return new Wi(r).toPromise()})}function $V(t,e){return R(this,null,function*(){let n=Ad(t,!1).get(e),r=yield new Wi(n).toPromise();return r===void 0?null:r.value})}function kb(t,e){let n=Ad(t,!0).delete(e);return new Wi(n).toPromise()}var HV=800,qV=3,zV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return R(this,null,function*(){return this.db?this.db:(this.db=yield Hg(),this.db)})}_withRetries(n){return R(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>qV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return R(this,null,function*(){return uT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return R(this,null,function*(){this.receiver=OV._getInstance(UV()),this.receiver._subscribe("keyChanged",(n,r)=>R(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>R(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return R(this,null,function*(){var n,r;if(this.activeServiceWorker=yield LV(),!this.activeServiceWorker)return;this.sender=new $g(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return R(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return R(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Hg();return yield Pb(n,_d,"1"),yield kb(n,_d),!0}catch{}return!1})}_withPendingWrite(n){return R(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return R(this,null,function*(){return this._withPendingWrite(()=>R(this,null,function*(){return yield this._withRetries(i=>Pb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return R(this,null,function*(){let r=yield this._withRetries(i=>$V(i,n));return this.localCache[n]=r,r})}_remove(n){return R(this,null,function*(){return this._withPendingWrite(()=>R(this,null,function*(){return yield this._withRetries(r=>kb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return R(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ad(s,!1).getAll();return new Wi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>R(this,null,function*(){return this._poll()}),HV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),fT=zV;var A5=iT("rcb"),N5=new Gi(3e4,6e4);function GV(t,e){return e?hr(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var hc=class extends lc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ng(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ng(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ng(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function WV(t){return SV(t.auth,new hc(t),t.bypassAuthState)}function KV(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),aT(n,new hc(t),t.bypassAuthState)}function QV(t){return R(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),DV(n,new hc(t),t.bypassAuthState)})}var qg=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>R(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return R(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WV;case"linkViaPopup":case"linkViaRedirect":return QV;case"reauthViaPopup":case"reauthViaRedirect":return KV;default:Hn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var R5=new Gi(2e3,1e4);var YV="pendingRedirect",ud=new Map,zg=class t extends qg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return R(this,null,function*(){let e=ud.get(this.auth._key());if(!e){try{let r=(yield JV(this.resolver,this.auth))?yield Er(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return R(this,null,function*(){if(e.type==="signInViaRedirect")return Er(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Er(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return R(this,null,function*(){})}cleanUp(){}};function JV(t,e){return R(this,null,function*(){let n=e2(e),r=XV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function ZV(t,e){ud.set(t._key(),e)}function XV(t){return hr(t._redirectPersistence)}function e2(t){return ld(YV,t.config.apiKey,t.name)}function t2(t,e,n=!1){return R(this,null,function*(){if(lr(t.app))return Promise.reject(qi(t));let r=Td(t),i=GV(r,e),o=yield new zg(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var n2=10*60*1e3,Gg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ob(e))}saveEventToCache(e){this.cachedEventUids.add(Ob(e)),this.lastProcessedEventTime=Date.now()}};function Ob(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function r2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pT(t);default:return!1}}function i2(n){return R(this,arguments,function*(t,e={}){return fr(t,"GET","/v1/projects",e)})}var s2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o2=/^https?/;function a2(t){return R(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield i2(t);for(let n of e)try{if(c2(n))return}catch{}Hn(t,"unauthorized-domain")})}function c2(t){let e=xg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!o2.test(n))return!1;if(s2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var l2=new Gi(3e4,6e4);function Fb(){let t=$n().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u2(t){return new Promise((e,n)=>{var r,i,s;function o(){Fb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fb(),n(zi(t,"network-request-failed"))},timeout:l2.get()})}if(!((i=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=$n().gapi)===null||s===void 0)&&s.load)o();else{let a=iT("iframefcb");return $n()[a]=()=>{gapi.load?o():n(zi(t,"network-request-failed"))},rT(`${fV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw dd=null,e})}var dd=null;function d2(t){return dd=dd||u2(t),dd}var h2=new Gi(5e3,15e3),f2="__/auth/iframe",p2="emulator/auth/iframe",m2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y2(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Yg(e,p2):`https://${t.config.authDomain}/${f2}`,r={apiKey:e.apiKey,appName:t.name,v:Bn},i=g2.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Fi(r).slice(1)}`}function v2(t){return R(this,null,function*(){let e=yield d2(t),n=$n().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:y2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m2,dontclear:!0},r=>new Promise((i,s)=>R(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=zi(t,"network-request-failed"),a=$n().setTimeout(()=>{s(o)},h2.get());function l(){$n().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var _2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w2=500,E2=600,I2="_blank",C2="http://localhost",Id=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function b2(t,e,n,r=w2,i=E2){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},_2),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ze().toLowerCase();n&&(a=Yb(u)?I2:n),Qb(u)&&(e=e||C2,l.scrollbars="yes");let f=Object.entries(l).reduce((g,[S,N])=>`${g}${S}=${N},`,"");if(oV(u)&&a!=="_self")return T2(e||"",a),new Id(null);let p=window.open(e||"",a,f);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Id(p)}function T2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var D2="__/auth/handler",S2="emulator/auth/handler",A2=encodeURIComponent("fac");function Lb(t,e,n,r,i,s){return R(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bn,eventId:i};if(e instanceof vd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ec(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof jg){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let l=yield t._getAppCheckToken(),u=l?`#${A2}=${encodeURIComponent(l)}`:"";return`${N2(t)}?${Fi(a).slice(1)}${u}`})}function N2({config:t}){return t.emulator?Yg(t,S2):`https://${t.authDomain}/${D2}`}var Rg="webStorageSupport",Wg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ay,this._completeRedirectFn=t2,this._overrideRedirectResult=ZV}_openPopup(e,n,r,i){return R(this,null,function*(){var s;Gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Lb(e,n,r,xg(),i);return b2(e,o,lT())})}_openRedirect(e,n,r,i){return R(this,null,function*(){yield this._originValidation(e);let s=yield Lb(e,n,r,xg(),i);return FV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return R(this,null,function*(){let n=yield v2(e),r=new Gg(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rg,{type:Rg},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Rg];o!==void 0&&n(!!o),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||ey()||bd()}},mT=Wg;var Vb="@firebase/auth",Ub="1.7.3";var Kg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return R(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function R2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x2(t){jn(new St("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(t)},u=new Vg(r,i,s,l);return gV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jn(new St("auth-internal",e=>{let n=Td(e.getProvider("auth").getImmediate());return(r=>new Kg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Re(Vb,Ub,R2(t)),Re(Vb,Ub,"esm2017")}var M2=5*60,P2=cg("authIdTokenMaxAge")||M2,jb=null,k2=t=>e=>R(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>P2)return;let i=n?.token;jb!==i&&(jb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function cy(t=Ui()){let e=oo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ty(t,{popupRedirectResolver:mT,persistence:[fT,cT,ay]}),r=cg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=k2(s.toString());oy(n,o,()=>o(n.currentUser)),sy(n,a=>o(a))}}let i=sg("auth");return i&&ny(n,`http://${i}`),n}function O2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=zi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",O2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x2("Browser");var gT="auth",It=class{constructor(e){return e}},fc=class{constructor(){return $i(gT)}};var ly=new B("angularfire2.auth-instances");function SU(t,e){let n=co(gT,t,e);return n&&new It(n)}function AU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new It(r)}}var NU={provide:fc,deps:[[new Ye,ly]]},RU={provide:It,useFactory:SU,deps:[[new Ye,ly],vn]},uy=(()=>{class t{constructor(){Re("angularfire",ur.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[RU,NU]})}return t})();function yT(t,...e){return{ngModule:uy,providers:[{provide:ly,useFactory:AU(t),multi:!0,deps:[Ee,_t,Hi,qr,[new Ye,Bi],...e]}]}}var vT=Hr(cy,!0);var _T=Hr(iy,!0);var ut=(()=>{let e=class e{constructor(r,i){this.http=r,this.auth=i,this.baseUrl="http://localhost:3000/api",this.apiUrl="http://localhost:3000/api",this.loginEvent=new Ve}getAuthHeaders(){let r=localStorage.getItem("token")||"";return new Qt().set("Authorization",`Bearer ${r}`)}isAuthenticated(){let r=localStorage.getItem("token");return new te(i=>{r?this.http.get(`${this.apiUrl}/verifyToken`,{headers:{Authorization:`Bearer ${r}`}}).subscribe(()=>i.next(!0),()=>i.next(!1)):i.next(!1)})}login(r){return this.http.post(`${this.baseUrl}/login`,r).pipe(Me(i=>{i.token&&(localStorage.setItem("token",i.token),this.loginEvent.next())}))}getUserProfile(){let r=localStorage.getItem("token");return this.http.get(`${this.apiUrl}/profile`,{headers:{Authorization:`Bearer ${r}`}})}updateUserProfile(r){let i=localStorage.getItem("token");return this.http.put(`${this.apiUrl}/profile`,r,{headers:{Authorization:`Bearer ${i}`}})}deleteUserProfile(){let r=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/profile`,{headers:{Authorization:`Bearer ${r}`}})}changePassword(r,i){let s=localStorage.getItem("token");return this.http.post(`${this.apiUrl}/profile/change-password`,{oldPassword:r,newPassword:i},{headers:{Authorization:`Bearer ${s}`}})}getShiftById(r){let i=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/shifts/${r}`,{headers:i})}updateShift(r,i){let s=this.getAuthHeaders();return this.http.put(`${this.apiUrl}/shifts/${r}`,i,{headers:s})}deleteShift(r){let i=this.getAuthHeaders();return this.http.delete(`${this.apiUrl}/shifts/${r}`,{headers:i})}getShifts(){let r=localStorage.getItem("token");if(!r)return console.error("No token found"),z([]);let i=new Qt().set("Authorization",`Bearer ${r}`);console.log("Token:",r),console.log("Headers:",i);let s=`${this.baseUrl}/shifts`;return this.http.get(s,{headers:i}).pipe(cn(o=>(console.error("Error loading shifts:",o),z([]))))}addShift(r){let s={Authorization:"Bearer "+localStorage.getItem("token")||""};return this.http.post(`${this.baseUrl}/addShift`,r,{headers:s})}register(r){return this.http.post(`${this.baseUrl}/register`,r)}updatePassword(r,i){let s=this.auth.currentUser;if(s&&s.email){let o=ry.credential(s.email,r);return _T(s,o).then(()=>Sd(s,i))}else return Promise.reject(new Error("No authenticated user or user email is null"))}};e.\u0275fac=function(i){return new(i||e)(q(sm),q(It))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xU(t,e){if(t&1&&(w(0,"tr",9)(1,"td",10),b(2,"Date"),E(),w(3,"td"),b(4),E(),w(5,"td",10),b(6,"Start time"),E(),w(7,"td"),b(8),E(),w(9,"td",10),b(10,"End time"),E(),w(11,"td"),b(12),E(),w(13,"td",10),b(14,"Hourly wage"),E(),w(15,"td"),b(16),E(),w(17,"td",10),b(18,"Workplace"),E(),w(19,"td"),b(20),E(),w(21,"td",10),b(22,"Profit"),E(),w(23,"td"),b(24),E()()),t&2){let n=e.$implicit;O(4),ae(n.formattedDate),O(4),ae(n.start),O(4),ae(n.end),O(4),ae(n.wage),O(4),ae(n.workplace),O(4),ae(n.profit)}}function MU(t,e){if(t&1&&(w(0,"tr",9)(1,"td",10),b(2,"Date"),E(),w(3,"td"),b(4),E(),w(5,"td",10),b(6,"Start time"),E(),w(7,"td"),b(8),E(),w(9,"td",10),b(10,"End time"),E(),w(11,"td"),b(12),E(),w(13,"td",10),b(14,"Hourly wage"),E(),w(15,"td"),b(16),E(),w(17,"td",10),b(18,"Workplace"),E(),w(19,"td"),b(20),E(),w(21,"td",10),b(22,"Profit"),E(),w(23,"td"),b(24),E()()),t&2){let n=e.$implicit;O(4),ae(n.formattedDate),O(4),ae(n.start),O(4),ae(n.end),O(4),ae(n.wage),O(4),ae(n.workplace),O(4),ae(n.profit)}}function PU(t,e){if(t&1&&(w(0,"tr",9)(1,"td",10),b(2,"Date"),E(),w(3,"td"),b(4),E(),w(5,"td",10),b(6,"Start time"),E(),w(7,"td"),b(8),E(),w(9,"td",10),b(10,"End time"),E(),w(11,"td"),b(12),E(),w(13,"td",10),b(14,"Hourly wage"),E(),w(15,"td"),b(16),E(),w(17,"td",10),b(18,"Workplace"),E(),w(19,"td"),b(20),E(),w(21,"td",10),b(22,"Profit"),E(),w(23,"td"),b(24),E()()),t&2){let n=e.$implicit;O(4),ae(n.formattedDate),O(4),ae(n.start),O(4),ae(n.end),O(4),ae(n.wage),O(4),ae(n.workplace),O(4),ae(n.profit)}}var dy=(()=>{let e=class e{constructor(r){this.authService=r,this.shifts=[],this.bestMonth="",this.bestMonthProfit=0,this.upcomingShifts=[],this.pastWeekShifts=[],this.bestMonthShifts=[]}ngOnInit(){this.loadShifts()}loadShifts(){this.authService.getShifts().subscribe(r=>{this.shifts=r.map(i=>{let s=this.convertTimeToNumber(i.start),o=this.convertTimeToNumber(i.end),a=Number(i.wage),l=!isNaN(s)&&!isNaN(o)&&!isNaN(a)?(o-s)*a:0;return ie(F({},i),{formattedDate:new Date(i.date).toLocaleDateString(),profit:l.toFixed(0)})}),this.sortShiftsByDate(),this.loadUpcomingShifts(),this.loadPastWeekShifts(),this.calculateBestMonth()})}sortShiftsByDate(){this.shifts.sort((r,i)=>{let s=new Date(r.date),o=new Date(i.date);return s.getTime()-o.getTime()})}loadUpcomingShifts(){let r=new Date;this.upcomingShifts=this.shifts.filter(i=>new Date(i.date)>=r)}loadPastWeekShifts(){let r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()-7);this.pastWeekShifts=this.shifts.filter(s=>new Date(s.date)>=i&&new Date(s.date)<r)}calculateBestMonth(){let r={};this.shifts.forEach(o=>{let l=new Date(o.date).toLocaleString("default",{month:"long",year:"numeric"});r[l]||(r[l]=0);let u=parseFloat(o.profit)||0;r[l]+=u});let i="",s=0;for(let o in r)r[o]>s&&(s=r[o],i=o);this.bestMonth=i,this.bestMonthProfit=s.toFixed(0),this.bestMonthShifts=this.shifts.filter(o=>new Date(o.date).toLocaleString("default",{month:"long",year:"numeric"})===i)}calculateProfit(r,i,s){let o=this.convertTimeToNumber(r),a=this.convertTimeToNumber(i),l=Number(s);return Math.round((a-o)*l)}convertTimeToNumber(r){let[i,s]=r.split(":").map(Number);return i+s/60}};e.\u0275fac=function(i){return new(i||e)(U(ut))},e.\u0275cmp=Be({type:e,selectors:[["app-home"]],standalone:!0,features:[He],decls:64,vars:5,consts:[[1,"table"],["id","upcomingShiftsTable",1,"shift-table"],[1,"table-header"],["id","upcomingShiftsTableBody"],["class","shifts",4,"ngFor","ngForOf"],["id","pastWeekShiftsTable",1,"shift-table"],["id","pastWeekShiftsTableBody"],["id","bestMonthShiftsTable",1,"shift-table"],["id","bestMonthShiftsTableBody"],[1,"shifts"],[1,"mobile"]],template:function(i,s){i&1&&(w(0,"h1"),b(1,"Home"),E(),w(2,"div",0)(3,"h2"),b(4,"Upcoming shifts"),E(),w(5,"table",1)(6,"thead")(7,"tr",2)(8,"th"),b(9,"Date"),E(),w(10,"th"),b(11,"Start time"),E(),w(12,"th"),b(13,"End time"),E(),w(14,"th"),b(15,"Hourly wage"),E(),w(16,"th"),b(17,"Workplace"),E(),w(18,"th"),b(19,"Profit"),E()()(),w(20,"tbody",3),_e(21,xU,25,6,"tr",4),E()()(),w(22,"div",0)(23,"h2"),b(24,"Past week shifts"),E(),w(25,"table",5)(26,"thead")(27,"tr",2)(28,"th"),b(29,"Date"),E(),w(30,"th"),b(31,"Start time"),E(),w(32,"th"),b(33,"End time"),E(),w(34,"th"),b(35,"Hourly wage"),E(),w(36,"th"),b(37,"Workplace"),E(),w(38,"th"),b(39,"Profit"),E()()(),w(40,"tbody",6),_e(41,MU,25,6,"tr",4),E()()(),w(42,"div",0)(43,"h2"),b(44),E(),w(45,"h2"),b(46),E(),w(47,"table",7)(48,"thead")(49,"tr",2)(50,"th"),b(51,"Date"),E(),w(52,"th"),b(53,"Start time"),E(),w(54,"th"),b(55,"End time"),E(),w(56,"th"),b(57,"Hourly wage"),E(),w(58,"th"),b(59,"Workplace"),E(),w(60,"th"),b(61,"Profit"),E()()(),w(62,"tbody",8),_e(63,PU,25,6,"tr",4),E()()()),i&2&&(O(21),W("ngForOf",s.upcomingShifts),O(20),W("ngForOf",s.pastWeekShifts),O(3),Tt("Best Month: ",s.bestMonth,""),O(2),Tt("Total Profit: ",s.bestMonthProfit,""),O(17),W("ngForOf",s.bestMonthShifts))},dependencies:[Nu,Ge],styles:[".shift-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0}.table[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;border-radius:10px;padding:10px;margin-top:30px;background-color:#395b64;color:#e7f6f2}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.mobile[_ngcontent-%COMP%]{display:none}.shift-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395b64;padding:20px}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333}@media (max-width: 850px){.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%]{background-color:#2c3333;margin-top:0}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{font-weight:700}.shift-table[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:10px}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;border:1px solid #395B64;border-radius:8px;background-color:#395b64;color:#e7f6f2}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}@media (min-width: 551px) and (max-width: 850px){.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:5px;justify-content:center}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:calc(50% - 5px)}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}"]});let t=e;return t})();var NT=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(U(Pn),U(gn))},e.\u0275dir=Pe({type:e});let t=e;return t})(),Ud=(()=>{let e=class e extends NT{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,features:[Kt]});let t=e;return t})(),wc=new B("");var kU={provide:wc,useExisting:xn(()=>At),multi:!0};function OU(){let t=sr()?sr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var FU=new B(""),At=(()=>{let e=class e extends NT{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!OU())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(U(Pn),U(gn),U(FU,8))},e.\u0275dir=Pe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ge("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Or([kU]),Kt]});let t=e;return t})();function Kr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function RT(t){return t!=null&&typeof t.length=="number"}var yy=new B(""),xT=new B(""),LU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ce=class{static min(e){return VU(e)}static max(e){return UU(e)}static required(e){return MT(e)}static requiredTrue(e){return jU(e)}static email(e){return BU(e)}static minLength(e){return $U(e)}static maxLength(e){return HU(e)}static pattern(e){return qU(e)}static nullValidator(e){return xd(e)}static compose(e){return VT(e)}static composeAsync(e){return jT(e)}};function VU(t){return e=>{if(Kr(e.value)||Kr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function UU(t){return e=>{if(Kr(e.value)||Kr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function MT(t){return Kr(t.value)?{required:!0}:null}function jU(t){return t.value===!0?null:{required:!0}}function BU(t){return Kr(t.value)||LU.test(t.value)?null:{email:!0}}function $U(t){return e=>Kr(e.value)||!RT(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function HU(t){return e=>RT(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function qU(t){if(!t)return xd;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Kr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function xd(t){return null}function PT(t){return t!=null}function kT(t){return bi(t)?xe(t):t}function OT(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function FT(t,e){return e.map(n=>n(t))}function zU(t){return!t.validate}function LT(t){return t.map(e=>zU(e)?e:n=>e.validate(n))}function VT(t){if(!t)return null;let e=t.filter(PT);return e.length==0?null:function(n){return OT(FT(n,e))}}function UT(t){return t!=null?VT(LT(t)):null}function jT(t){if(!t)return null;let e=t.filter(PT);return e.length==0?null:function(n){let r=FT(n,e).map(kT);return sf(r).pipe(J(OT))}}function BT(t){return t!=null?jT(LT(t)):null}function wT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function $T(t){return t._rawValidators}function HT(t){return t._rawAsyncValidators}function hy(t){return t?Array.isArray(t)?t:[t]:[]}function Md(t,e){return Array.isArray(t)?t.includes(e):t===e}function ET(t,e){let n=hy(e);return hy(t).forEach(i=>{Md(n,i)||n.push(i)}),n}function IT(t,e){return hy(e).filter(n=>!Md(t,n))}var Pd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},po=class extends Pd{get formDirective(){return null}get path(){return null}},_c=class extends Pd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},kd=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},GU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},L8=ie(F({},GU),{"[class.ng-submitted]":"isSubmitted"}),Zt=(()=>{let e=class e extends kd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(U(_c,2))},e.\u0275dir=Pe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Kt]});let t=e;return t})(),Xt=(()=>{let e=class e extends kd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(U(po,10))},e.\u0275dir=Pe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Kt]});let t=e;return t})();var mc="VALID",Nd="INVALID",ho="PENDING",gc="DISABLED",Qr=class{},Od=class extends Qr{constructor(e,n){super(),this.value=e,this.source=n}},yc=class extends Qr{constructor(e,n){super(),this.pristine=e,this.source=n}},vc=class extends Qr{constructor(e,n){super(),this.touched=e,this.source=n}},fo=class extends Qr{constructor(e,n){super(),this.status=e,this.source=n}},fy=class extends Qr{constructor(e){super(),this.source=e}},py=class extends Qr{constructor(e){super(),this.source=e}};function vy(t){return(jd(t)?t.validators:t)||null}function WU(t){return Array.isArray(t)?UT(t):t||null}function _y(t,e){return(jd(e)?e.asyncValidators:t)||null}function KU(t){return Array.isArray(t)?BT(t):t||null}function jd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function qT(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")}function zT(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new $(1002,"")})}var mo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Ve,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mc}get invalid(){return this.status===Nd}get pending(){return this.status==ho}get disabled(){return this.status===gc}get enabled(){return this.status!==gc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ET(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ET(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IT(e,this._rawAsyncValidators))}hasValidator(e){return Md(this._rawValidators,e)}hasAsyncValidator(e){return Md(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new vc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new vc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new yc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new yc(!0,r))}markAsPending(e={}){this.status=ho;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=gc,this.errors=null,this._forEachChild(i=>{i.disable(ie(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Od(this.value,r)),this._events.next(new fo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mc,this._forEachChild(r=>{r.enable(ie(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mc||this.status===ho)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Od(this.value,n)),this._events.next(new fo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gc:mc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ho,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=kT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?gc:this.errors?Nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ho)?ho:this._anyControlsHaveStatus(Nd)?Nd:mc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new yc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new vc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=WU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KU(this._rawAsyncValidators)}},Fd=class extends mo{constructor(e,n,r){super(vy(n),_y(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){zT(this,!0,e),Object.keys(e).forEach(r=>{qT(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var my=class extends Fd{};var wy=new B("CallSetDisabledState",{providedIn:"root",factory:()=>Bd}),Bd="always";function QU(t,e){return[...e.path,t]}function CT(t,e,n=Bd){Ey(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JU(t,e),XU(t,e),ZU(t,e),YU(t,e)}function bT(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Vd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ld(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Ey(t,e){let n=$T(t);e.validator!==null?t.setValidators(wT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=HT(t);e.asyncValidator!==null?t.setAsyncValidators(wT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ld(e._rawValidators,i),Ld(e._rawAsyncValidators,i)}function Vd(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=$T(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=HT(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Ld(e._rawValidators,r),Ld(e._rawAsyncValidators,r),n}function JU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&GT(t,e)})}function ZU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&GT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function GT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function XU(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ej(t,e){t==null,Ey(t,e)}function tj(t,e){return Vd(t,e)}function nj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function rj(t){return Object.getPrototypeOf(t.constructor)===Ud}function ij(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===At?n=s:rj(s)?r=s:i=s}),i||r||n||null}function oj(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function TT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Rd=class extends mo{constructor(e=null,n,r){super(vy(n),_y(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(DT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aj=t=>t instanceof Rd;var qn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),cj={provide:wc,useExisting:xn(()=>Ec),multi:!0},Ec=(()=>{let e=class e extends Ud{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&ge("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Or([cj]),Kt]});let t=e;return t})();var WT=new B("");var lj={provide:po,useExisting:xn(()=>jt)},jt=(()=>{let e=class e extends po{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new je,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return CT(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){bT(r.control||null,r,!1),oj(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,ij(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new fy(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1,this.form._events.next(new py(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(bT(i||null,r),aj(s)&&(CT(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);ej(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&tj(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ey(this.form,this),this._oldForm&&Vd(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(U(yy,10),U(xT,10),U(wy,8))},e.\u0275dir=Pe({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&ge("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Or([lj]),Kt,rr]});let t=e;return t})();var uj={provide:_c,useExisting:xn(()=>Bt)},Bt=(()=>{let e=class e extends _c{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new je,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=sj(this,o)}ngOnChanges(r){this._added||this._setUpControl(),nj(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return QU(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(U(po,13),U(yy,10),U(xT,10),U(wc,10),U(WT,8))},e.\u0275dir=Pe({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Or([uj]),Kt,rr]});let t=e;return t})(),dj={provide:wc,useExisting:xn(()=>Yr),multi:!0};function KT(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function hj(t){return t.split(":")[0]}var Yr=(()=>{let e=class e extends Ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=KT(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=hj(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&ge("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Or([dj]),Kt]});let t=e;return t})(),go=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(KT(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(U(gn),U(Pn),U(Yr,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),fj={provide:wc,useExisting:xn(()=>QT),multi:!0};function ST(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function pj(t){return t.split(":")[0]}var QT=(()=>{let e=class e extends Ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let u=a[l],f=this._getOptionValue(u.value);s.push(f)}}else{let a=i.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let f=this._getOptionValue(u.value);s.push(f)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=pj(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&ge("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Or([fj]),Kt]});let t=e;return t})(),yo=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(ST(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(ST(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(U(gn),U(Pn),U(QT,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var mj=(()=>{let e=class e{constructor(){this._validator=xd}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):xd,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,features:[rr]});let t=e;return t})();var gj={provide:yy,useExisting:xn(()=>_n),multi:!0};var _n=(()=>{let e=class e extends mj{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Di,this.createValidator=r=>MT}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ir(e)))(s||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ba("required",s._enabled?"":null)},inputs:{required:"required"},features:[Or([gj]),Kt]});let t=e;return t})();var YT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({});let t=e;return t})(),gy=class extends mo{constructor(e,n,r){super(vy(n),_y(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){zT(this,!1,e),e.forEach((r,i)=>{qT(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function AT(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var en=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return AT(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Fd(s,o)}record(r,i=null){let s=this._reduceControls(r);return new my(s,i)}control(r,i,s){let o={};return this.useNonNullable?(AT(i)?o=i:(o.validators=i,o.asyncValidators=s),new Rd(r,ie(F({},o),{nonNullable:!0}))):new Rd(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new gy(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Rd)return r;if(r instanceof mo)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JT=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:wy,useValue:r.callSetDisabledState??Bd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({imports:[YT]});let t=e;return t})(),tn=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:WT,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:wy,useValue:r.callSetDisabledState??Bd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Qe({imports:[YT]});let t=e;return t})();function yj(t,e){t&1&&(w(0,"div",17),b(1," Invalid email format. "),E())}function vj(t,e){t&1&&(w(0,"div",17),b(1," Password must be at least 6 characters long. "),E())}function _j(t,e){t&1&&(w(0,"div",17),b(1," Passwords do not match. "),E())}function wj(t,e){t&1&&(w(0,"div",17),b(1," First name must be at least 2 characters long. "),E())}function Ej(t,e){t&1&&(w(0,"div",17),b(1," Last name must be at least 2 characters long. "),E())}function Ij(t,e){t&1&&(w(0,"div",17),b(1," Age must be between 6 and 130. "),E())}var Iy=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.fb=i,this.router=s,this.message="",this.registerForm=this.fb.group({email:["",[ce.required,ce.email]],password:["",[ce.required,ce.minLength(6)]],confirmPassword:["",[ce.required]],firstName:["",[ce.required,ce.minLength(2)]],lastName:["",[ce.required,ce.minLength(2)]],birthDate:["",[ce.required,this.ageValidator]]},{validators:this.passwordMatchValidator})}onSubmit(){if(this.registerForm.valid){let{email:r,password:i,confirmPassword:s,firstName:o,lastName:a,birthDate:l}=this.registerForm.value;this.authService.register({email:r,password:i,firstName:o,lastName:a,birthDate:l}).subscribe(u=>{localStorage.setItem("token",u.token),this.message="Registration successful",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},u=>{u.status===400&&u.error.error==="Email already in use"?this.message="Email already in use":this.message="Registration failed"})}}passwordMatchValidator(r){let i=r.get("password")?.value,s=r.get("confirmPassword")?.value;return i===s?null:{passwordMismatch:!0}}goToLogin(){this.router.navigate(["/login"])}ageValidator(r){let i=new Date(r.value),o=new Date().getFullYear()-i.getFullYear();return o>=6&&o<=130?null:{invalidAge:!0}}};e.\u0275fac=function(i){return new(i||e)(U(ut),U(en),U(Et))},e.\u0275cmp=Be({type:e,selectors:[["app-register"]],standalone:!0,features:[He],decls:34,vars:13,consts:[[1,"form"],[3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","name","email","required",""],["class","error",4,"ngIf"],["for","password"],["formControlName","password","type","password","name","password","required",""],["for","confirmPassword"],["formControlName","confirmPassword","type","password","name","password-confirm","required",""],["for","firstName"],["formControlName","firstName","type","text","name","first-name","required",""],["for","lastName"],["formControlName","lastName","type","text","name","last-name","required",""],["for","birthDate"],["formControlName","birthDate","type","date","name","birth-date","required",""],["type","submit",3,"disabled"],[3,"click"],[1,"error"]],template:function(i,s){if(i&1&&(w(0,"h1"),b(1,"Register"),E(),w(2,"div",0)(3,"form",1),ge("ngSubmit",function(){return s.onSubmit()}),w(4,"label",2),b(5,"Email:"),E(),re(6,"input",3),_e(7,yj,2,0,"div",4),w(8,"label",5),b(9,"Password:"),E(),re(10,"input",6),_e(11,vj,2,0,"div",4),w(12,"label",7),b(13,"Confirm Password:"),E(),re(14,"input",8),_e(15,_j,2,0,"div",4),w(16,"label",9),b(17,"First Name:"),E(),re(18,"input",10),_e(19,wj,2,0,"div",4),w(20,"label",11),b(21,"Last Name:"),E(),re(22,"input",12),_e(23,Ej,2,0,"div",4),w(24,"label",13),b(25,"Birth Date:"),E(),re(26,"input",14),_e(27,Ij,2,0,"div",4),w(28,"button",15),b(29,"Register"),E(),w(30,"p",16),ge("click",function(){return s.goToLogin()}),b(31,"Already have an account? Login here!"),E()(),w(32,"p"),b(33),E()()),i&2){let o,a,l,u,f,p;O(3),W("formGroup",s.registerForm),O(4),W("ngIf",((o=s.registerForm.get("email"))==null?null:o.hasError("email"))&&((o=s.registerForm.get("email"))==null?null:o.touched)),O(4),W("ngIf",((a=s.registerForm.get("password"))==null?null:a.hasError("minlength"))&&((a=s.registerForm.get("password"))==null?null:a.touched)),O(4),W("ngIf",s.registerForm.hasError("passwordMismatch")&&((l=s.registerForm.get("confirmPassword"))==null?null:l.touched)),O(4),W("ngIf",((u=s.registerForm.get("firstName"))==null?null:u.hasError("minlength"))&&((u=s.registerForm.get("firstName"))==null?null:u.touched)),O(4),W("ngIf",((f=s.registerForm.get("lastName"))==null?null:f.hasError("minlength"))&&((f=s.registerForm.get("lastName"))==null?null:f.touched)),O(4),W("ngIf",((p=s.registerForm.get("birthDate"))==null?null:p.hasError("invalidAge"))&&((p=s.registerForm.get("birthDate"))==null?null:p.touched)),O(),W("disabled",s.registerForm.invalid),O(4),kr("successful",s.message==="Registration successful")("error",s.message!=="Registration successful"),O(),ae(s.message)}},dependencies:[tn,qn,At,Zt,Xt,_n,jt,Bt,Ge,kn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-family:Arial,sans-serif}"]});let t=e;return t})();function Cj(t,e){t&1&&(w(0,"div",9),b(1," Invalid email format. "),E())}function bj(t,e){t&1&&(w(0,"div",9),b(1," Password must be at least 6 characters long. "),E())}var Cy=(()=>{let e=class e{constructor(r,i,s,o){this.authService=r,this.fb=i,this.router=s,this.auth=o,this.message="",this.loginForm=this.fb.group({email:["",[ce.required,ce.email]],password:["",[ce.required]]})}onSubmit(){if(this.loginForm.valid){let{email:r,password:i}=this.loginForm.value;this.authService.login({email:r,password:i}).subscribe(s=>{s.token?(localStorage.setItem("token",s.token),this.message="Authentication successful",this.router.navigate(["/home"])):this.message="Authentication failed"},s=>{this.message="Authentication failed"})}}onLoginSuccess(){this.router.navigate(["/home"])}goToRegister(){this.router.navigate(["/register"])}};e.\u0275fac=function(i){return new(i||e)(U(ut),U(en),U(Et),U(It))},e.\u0275cmp=Be({type:e,selectors:[["app-login"]],standalone:!0,features:[He],decls:18,vars:8,consts:[[1,"form"],[3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","name","email","required",""],["class","error",4,"ngIf"],["for","password"],["formControlName","password","type","password","name","password","required",""],["type","submit"],[3,"click"],[1,"error"]],template:function(i,s){if(i&1&&(w(0,"h1"),b(1,"Login"),E(),w(2,"div",0)(3,"form",1),ge("ngSubmit",function(){return s.onSubmit()}),w(4,"label",2),b(5,"Email:"),E(),re(6,"input",3),_e(7,Cj,2,0,"div",4),w(8,"label",5),b(9,"Password:"),E(),re(10,"input",6),_e(11,bj,2,0,"div",4),w(12,"button",7),b(13,"Login"),E(),w(14,"p",8),ge("click",function(){return s.goToRegister()}),b(15,"Don't have an account? Register here!"),E()(),w(16,"p"),b(17),E()()),i&2){let o,a;O(3),W("formGroup",s.loginForm),O(4),W("ngIf",((o=s.loginForm.get("email"))==null?null:o.hasError("email"))&&((o=s.loginForm.get("email"))==null?null:o.touched)),O(4),W("ngIf",((a=s.loginForm.get("password"))==null?null:a.hasError("minlength"))&&((a=s.loginForm.get("password"))==null?null:a.touched)),O(5),kr("successful",s.message==="Authentication successful")("error",s.message==="Authentication failed"),O(),Tt(" ",s.message," ")}},dependencies:[tn,qn,At,Zt,Xt,_n,jt,Bt,kn,Ge],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:Arial,sans-serif}"]});let t=e;return t})();var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XT={};var by,eD;(function(){var t;function e(C,y){function _(){}_.prototype=y.prototype,C.D=y.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(I,T,A){for(var v=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)v[Wn-2]=arguments[Wn];return y.prototype[T].apply(I,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,y,_){_||(_=0);var I=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)I[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;16>T;++T)I[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=C.g[0],_=C.g[1],T=C.g[2];var A=C.g[3],v=y+(A^_&(T^A))+I[0]+3614090360&4294967295;y=_+(v<<7&4294967295|v>>>25),v=A+(T^y&(_^T))+I[1]+3905402710&4294967295,A=y+(v<<12&4294967295|v>>>20),v=T+(_^A&(y^_))+I[2]+606105819&4294967295,T=A+(v<<17&4294967295|v>>>15),v=_+(y^T&(A^y))+I[3]+3250441966&4294967295,_=T+(v<<22&4294967295|v>>>10),v=y+(A^_&(T^A))+I[4]+4118548399&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(T^y&(_^T))+I[5]+1200080426&4294967295,A=y+(v<<12&4294967295|v>>>20),v=T+(_^A&(y^_))+I[6]+2821735955&4294967295,T=A+(v<<17&4294967295|v>>>15),v=_+(y^T&(A^y))+I[7]+4249261313&4294967295,_=T+(v<<22&4294967295|v>>>10),v=y+(A^_&(T^A))+I[8]+1770035416&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(T^y&(_^T))+I[9]+2336552879&4294967295,A=y+(v<<12&4294967295|v>>>20),v=T+(_^A&(y^_))+I[10]+4294925233&4294967295,T=A+(v<<17&4294967295|v>>>15),v=_+(y^T&(A^y))+I[11]+2304563134&4294967295,_=T+(v<<22&4294967295|v>>>10),v=y+(A^_&(T^A))+I[12]+1804603682&4294967295,y=_+(v<<7&4294967295|v>>>25),v=A+(T^y&(_^T))+I[13]+4254626195&4294967295,A=y+(v<<12&4294967295|v>>>20),v=T+(_^A&(y^_))+I[14]+2792965006&4294967295,T=A+(v<<17&4294967295|v>>>15),v=_+(y^T&(A^y))+I[15]+1236535329&4294967295,_=T+(v<<22&4294967295|v>>>10),v=y+(T^A&(_^T))+I[1]+4129170786&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^T&(y^_))+I[6]+3225465664&4294967295,A=y+(v<<9&4294967295|v>>>23),v=T+(y^_&(A^y))+I[11]+643717713&4294967295,T=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(T^A))+I[0]+3921069994&4294967295,_=T+(v<<20&4294967295|v>>>12),v=y+(T^A&(_^T))+I[5]+3593408605&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^T&(y^_))+I[10]+38016083&4294967295,A=y+(v<<9&4294967295|v>>>23),v=T+(y^_&(A^y))+I[15]+3634488961&4294967295,T=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(T^A))+I[4]+3889429448&4294967295,_=T+(v<<20&4294967295|v>>>12),v=y+(T^A&(_^T))+I[9]+568446438&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^T&(y^_))+I[14]+3275163606&4294967295,A=y+(v<<9&4294967295|v>>>23),v=T+(y^_&(A^y))+I[3]+4107603335&4294967295,T=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(T^A))+I[8]+1163531501&4294967295,_=T+(v<<20&4294967295|v>>>12),v=y+(T^A&(_^T))+I[13]+2850285829&4294967295,y=_+(v<<5&4294967295|v>>>27),v=A+(_^T&(y^_))+I[2]+4243563512&4294967295,A=y+(v<<9&4294967295|v>>>23),v=T+(y^_&(A^y))+I[7]+1735328473&4294967295,T=A+(v<<14&4294967295|v>>>18),v=_+(A^y&(T^A))+I[12]+2368359562&4294967295,_=T+(v<<20&4294967295|v>>>12),v=y+(_^T^A)+I[5]+4294588738&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^T)+I[8]+2272392833&4294967295,A=y+(v<<11&4294967295|v>>>21),v=T+(A^y^_)+I[11]+1839030562&4294967295,T=A+(v<<16&4294967295|v>>>16),v=_+(T^A^y)+I[14]+4259657740&4294967295,_=T+(v<<23&4294967295|v>>>9),v=y+(_^T^A)+I[1]+2763975236&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^T)+I[4]+1272893353&4294967295,A=y+(v<<11&4294967295|v>>>21),v=T+(A^y^_)+I[7]+4139469664&4294967295,T=A+(v<<16&4294967295|v>>>16),v=_+(T^A^y)+I[10]+3200236656&4294967295,_=T+(v<<23&4294967295|v>>>9),v=y+(_^T^A)+I[13]+681279174&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^T)+I[0]+3936430074&4294967295,A=y+(v<<11&4294967295|v>>>21),v=T+(A^y^_)+I[3]+3572445317&4294967295,T=A+(v<<16&4294967295|v>>>16),v=_+(T^A^y)+I[6]+76029189&4294967295,_=T+(v<<23&4294967295|v>>>9),v=y+(_^T^A)+I[9]+3654602809&4294967295,y=_+(v<<4&4294967295|v>>>28),v=A+(y^_^T)+I[12]+3873151461&4294967295,A=y+(v<<11&4294967295|v>>>21),v=T+(A^y^_)+I[15]+530742520&4294967295,T=A+(v<<16&4294967295|v>>>16),v=_+(T^A^y)+I[2]+3299628645&4294967295,_=T+(v<<23&4294967295|v>>>9),v=y+(T^(_|~A))+I[0]+4096336452&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~T))+I[7]+1126891415&4294967295,A=y+(v<<10&4294967295|v>>>22),v=T+(y^(A|~_))+I[14]+2878612391&4294967295,T=A+(v<<15&4294967295|v>>>17),v=_+(A^(T|~y))+I[5]+4237533241&4294967295,_=T+(v<<21&4294967295|v>>>11),v=y+(T^(_|~A))+I[12]+1700485571&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~T))+I[3]+2399980690&4294967295,A=y+(v<<10&4294967295|v>>>22),v=T+(y^(A|~_))+I[10]+4293915773&4294967295,T=A+(v<<15&4294967295|v>>>17),v=_+(A^(T|~y))+I[1]+2240044497&4294967295,_=T+(v<<21&4294967295|v>>>11),v=y+(T^(_|~A))+I[8]+1873313359&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~T))+I[15]+4264355552&4294967295,A=y+(v<<10&4294967295|v>>>22),v=T+(y^(A|~_))+I[6]+2734768916&4294967295,T=A+(v<<15&4294967295|v>>>17),v=_+(A^(T|~y))+I[13]+1309151649&4294967295,_=T+(v<<21&4294967295|v>>>11),v=y+(T^(_|~A))+I[4]+4149444226&4294967295,y=_+(v<<6&4294967295|v>>>26),v=A+(_^(y|~T))+I[11]+3174756917&4294967295,A=y+(v<<10&4294967295|v>>>22),v=T+(y^(A|~_))+I[2]+718787259&4294967295,T=A+(v<<15&4294967295|v>>>17),v=_+(A^(T|~y))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var _=y-this.blockSize,I=this.B,T=this.h,A=0;A<y;){if(T==0)for(;A<=_;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<y;)if(I[T++]=C.charCodeAt(A++),T==this.blockSize){i(this,I),T=0;break}}else for(;A<y;)if(I[T++]=C[A++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var _=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=_&255,_/=256;for(this.u(C),C=Array(16),y=_=0;4>y;++y)for(var I=0;32>I;I+=8)C[_++]=this.g[y]>>>I&255;return C};function s(C,y){var _=a;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=y(C)}function o(C,y){this.h=y;for(var _=[],I=!0,T=C.length-1;0<=T;T--){var A=C[T]|0;I&&A==y||(_[T]=A,I=!1)}this.g=_}var a={};function l(C){return-128<=C&&128>C?s(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return M(u(-C));for(var y=[],_=1,I=0;C>=_;I++)y[I]=C/_|0,_*=4294967296;return new o(y,0)}function f(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return M(f(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(y,8)),I=p,T=0;T<C.length;T+=8){var A=Math.min(8,C.length-T),v=parseInt(C.substring(T,T+A),y);8>A?(A=u(Math.pow(y,A)),I=I.j(A).add(u(v))):(I=I.j(_),I=I.add(u(v)))}return I}var p=l(0),g=l(1),S=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-M(this).m();for(var C=0,y=1,_=0;_<this.g.length;_++){var I=this.i(_);C+=(0<=I?I:4294967296+I)*y,y*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(P(this))return"-"+M(this).toString(C);for(var y=u(Math.pow(C,6)),_=this,I="";;){var T=Z(_,y).g;_=j(_,T.j(y));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=T,N(_))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function P(C){return C.h==-1}t.l=function(C){return C=j(this,C),P(C)?-1:N(C)?0:1};function M(C){for(var y=C.g.length,_=[],I=0;I<y;I++)_[I]=~C.g[I];return new o(_,~C.h).add(g)}t.abs=function(){return P(this)?M(this):this},t.add=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],I=0,T=0;T<=y;T++){var A=I+(this.i(T)&65535)+(C.i(T)&65535),v=(A>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);I=v>>>16,A&=65535,v&=65535,_[T]=v<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function j(C,y){return C.add(M(y))}t.j=function(C){if(N(this)||N(C))return p;if(P(this))return P(C)?M(this).j(M(C)):M(M(this).j(C));if(P(C))return M(this.j(M(C)));if(0>this.l(S)&&0>C.l(S))return u(this.m()*C.m());for(var y=this.g.length+C.g.length,_=[],I=0;I<2*y;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<C.g.length;T++){var A=this.i(I)>>>16,v=this.i(I)&65535,Wn=C.i(T)>>>16,Lo=C.i(T)&65535;_[2*I+2*T]+=v*Lo,ee(_,2*I+2*T),_[2*I+2*T+1]+=A*Lo,ee(_,2*I+2*T+1),_[2*I+2*T+1]+=v*Wn,ee(_,2*I+2*T+1),_[2*I+2*T+2]+=A*Wn,ee(_,2*I+2*T+2)}for(I=0;I<y;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=y;I<2*y;I++)_[I]=0;return new o(_,0)};function ee(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function G(C,y){this.g=C,this.h=y}function Z(C,y){if(N(y))throw Error("division by zero");if(N(C))return new G(p,p);if(P(C))return y=Z(M(C),y),new G(M(y.g),M(y.h));if(P(y))return y=Z(C,M(y)),new G(M(y.g),y.h);if(30<C.g.length){if(P(C)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,I=y;0>=I.l(C);)_=Le(_),I=Le(I);var T=de(_,1),A=de(I,1);for(I=de(I,2),_=de(_,2);!N(I);){var v=A.add(I);0>=v.l(C)&&(T=T.add(_),A=v),I=de(I,1),_=de(_,1)}return y=j(C,T.j(y)),new G(T,y)}for(T=p;0<=C.l(y);){for(_=Math.max(1,Math.floor(C.m()/y.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=u(_),v=A.j(y);P(v)||0<v.l(C);)_-=I,A=u(_),v=A.j(y);N(A)&&(A=g),T=T.add(A),C=j(C,v)}return new G(T,C)}t.A=function(C){return Z(this,C).h},t.and=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)&C.i(I);return new o(_,this.h&C.h)},t.or=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)|C.i(I);return new o(_,this.h|C.h)},t.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],I=0;I<y;I++)_[I]=this.i(I)^C.i(I);return new o(_,this.h^C.h)};function Le(C){for(var y=C.g.length+1,_=[],I=0;I<y;I++)_[I]=C.i(I)<<1|C.i(I-1)>>>31;return new o(_,C.h)}function de(C,y){var _=y>>5;y%=32;for(var I=C.g.length-_,T=[],A=0;A<I;A++)T[A]=0<y?C.i(A+_)>>>y|C.i(A+_+1)<<32-y:C.i(A+_);return new o(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eD=XT.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,by=XT.Integer=o}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pr={};var tD,nD,rD,iD,sD,oD,aD,cD,lD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $d=="object"&&$d];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var D=c[m];if(!(D in h))break e;h=h[D]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var h=0,m=!1,D={next:function(){if(!m&&h<c.length){var x=h++;return{value:d(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,h){return h})}});var o=o||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function g(c,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function S(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function N(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(m,D,x){for(var k=Array(arguments.length-2),be=2;be<arguments.length;be++)k[be-2]=arguments[be];return d.prototype[D].apply(m,k)}}function P(c){let d=c.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function M(c,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let D=c.length||0,x=m.length||0;c.length=D+x;for(let k=0;k<x;k++)c[D+k]=m[k]}else c.push(m)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ee(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var Le=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function de(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function C(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function y(c){let d={};for(let h in c)d[h]=c[h];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(h in m)c[h]=m[h];for(let x=0;x<_.length;x++)h=_[x],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function T(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function A(c){a.setTimeout(()=>{throw c},0)}function v(){var c=ph;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Wn{constructor(){this.h=this.g=null}add(d,h){let m=Lo.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Lo=new j(()=>new wA,c=>c.reset());class wA{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Vo,Uo=!1,ph=new Wn,l_=()=>{let c=a.Promise.resolve(void 0);Vo=()=>{c.then(EA)}};var EA=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(h){A(h)}var d=Lo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Uo=!1};function yr(){this.s=this.s,this.C=this.C}yr.prototype.s=!1,yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var IA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c}();function jo(c,d){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Le){e:{try{Z(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:CA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&jo.aa.h.call(this)}}N(jo,ot);var CA={2:"touch",3:"pen",4:"mouse"};jo.prototype.h=function(){jo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Bo="closure_listenable_"+(1e6*Math.random()|0),bA=0;function TA(c,d,h,m,D){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=D,this.key=++bA,this.da=this.fa=!1}function Bc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $c(c){this.src=c,this.g={},this.h=0}$c.prototype.add=function(c,d,h,m,D){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var k=gh(c,d,m,D);return-1<k?(d=c[k],h||(d.fa=!1)):(d=new TA(d,this.src,x,!!m,D),d.fa=h,c.push(d)),d};function mh(c,d){var h=d.type;if(h in c.g){var m=c.g[h],D=Array.prototype.indexOf.call(m,d,void 0),x;(x=0<=D)&&Array.prototype.splice.call(m,D,1),x&&(Bc(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function gh(c,d,h,m){for(var D=0;D<c.length;++D){var x=c[D];if(!x.da&&x.listener==d&&x.capture==!!h&&x.ha==m)return D}return-1}var yh="closure_lm_"+(1e6*Math.random()|0),vh={};function u_(c,d,h,m,D){if(m&&m.once)return h_(c,d,h,m,D);if(Array.isArray(d)){for(var x=0;x<d.length;x++)u_(c,d[x],h,m,D);return null}return h=Ih(h),c&&c[Bo]?c.K(d,h,u(m)?!!m.capture:!!m,D):d_(c,d,h,!1,m,D)}function d_(c,d,h,m,D,x){if(!d)throw Error("Invalid event type");var k=u(D)?!!D.capture:!!D,be=wh(c);if(be||(c[yh]=be=new $c(c)),h=be.add(d,h,m,k,x),h.proxy)return h;if(m=DA(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)IA||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),m,D);else if(c.attachEvent)c.attachEvent(p_(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function DA(){function c(h){return d.call(c.src,c.listener,h)}let d=SA;return c}function h_(c,d,h,m,D){if(Array.isArray(d)){for(var x=0;x<d.length;x++)h_(c,d[x],h,m,D);return null}return h=Ih(h),c&&c[Bo]?c.L(d,h,u(m)?!!m.capture:!!m,D):d_(c,d,h,!0,m,D)}function f_(c,d,h,m,D){if(Array.isArray(d))for(var x=0;x<d.length;x++)f_(c,d[x],h,m,D);else m=u(m)?!!m.capture:!!m,h=Ih(h),c&&c[Bo]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],h=gh(x,h,m,D),-1<h&&(Bc(x[h]),Array.prototype.splice.call(x,h,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=wh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=gh(d,h,m,D)),(h=-1<c?d[c]:null)&&_h(h))}function _h(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Bo])mh(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(p_(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=wh(d))?(mh(h,c),h.h==0&&(h.src=null,d[yh]=null)):Bc(c)}}}function p_(c){return c in vh?vh[c]:vh[c]="on"+c}function SA(c,d){if(c.da)c=!0;else{d=new jo(d,this);var h=c.listener,m=c.ha||c.src;c.fa&&_h(c),c=h.call(m,d)}return c}function wh(c){return c=c[yh],c instanceof $c?c:null}var Eh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ih(c){return typeof c=="function"?c:(c[Eh]||(c[Eh]=function(d){return c.handleEvent(d)}),c[Eh])}function at(){yr.call(this),this.i=new $c(this),this.M=this,this.F=null}N(at,yr),at.prototype[Bo]=!0,at.prototype.removeEventListener=function(c,d,h,m){f_(this,c,d,h,m)};function pt(c,d){var h,m=c.F;if(m)for(h=[];m;m=m.F)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new ot(d,c);else if(d instanceof ot)d.target=d.target||c;else{var D=d;d=new ot(m,c),I(d,D)}if(D=!0,h)for(var x=h.length-1;0<=x;x--){var k=d.g=h[x];D=Hc(k,m,!0,d)&&D}if(k=d.g=c,D=Hc(k,m,!0,d)&&D,D=Hc(k,m,!1,d)&&D,h)for(x=0;x<h.length;x++)k=d.g=h[x],D=Hc(k,m,!1,d)&&D}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],m=0;m<h.length;m++)Bc(h[m]);delete c.g[d],c.h--}}this.F=null},at.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},at.prototype.L=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function Hc(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,x=0;x<d.length;++x){var k=d[x];if(k&&!k.da&&k.capture==h){var be=k.listener,nt=k.ha||k.src;k.fa&&mh(c.i,k),D=be.call(nt,m)!==!1&&D}}return D&&!m.defaultPrevented}function m_(c,d,h){if(typeof c=="function")h&&(c=g(c,h));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function g_(c){c.g=m_(()=>{c.g=null,c.i&&(c.i=!1,g_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class AA extends yr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:g_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(c){yr.call(this),this.h=c,this.g={}}N($o,yr);var y_=[];function v_(c){de(c.g,function(d,h){this.g.hasOwnProperty(h)&&_h(d)},c),c.g={}}$o.prototype.N=function(){$o.aa.N.call(this),v_(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ch=a.JSON.stringify,NA=a.JSON.parse,RA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function bh(){}bh.prototype.h=null;function __(c){return c.h||(c.h=c.i())}function w_(){}var Ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Th(){ot.call(this,"d")}N(Th,ot);function Dh(){ot.call(this,"c")}N(Dh,ot);var ti={},E_=null;function qc(){return E_=E_||new at}ti.La="serverreachability";function I_(c){ot.call(this,ti.La,c)}N(I_,ot);function qo(c){let d=qc();pt(d,new I_(d))}ti.STAT_EVENT="statevent";function C_(c,d){ot.call(this,ti.STAT_EVENT,c),this.stat=d}N(C_,ot);function mt(c){let d=qc();pt(d,new C_(d,c))}ti.Ma="timingevent";function b_(c,d){ot.call(this,ti.Ma,c),this.size=d}N(b_,ot);function zo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Go(){this.g=!0}Go.prototype.xa=function(){this.g=!1};function xA(c,d,h,m,D,x){c.info(function(){if(c.g)if(x)for(var k="",be=x.split("&"),nt=0;nt<be.length;nt++){var ve=be[nt].split("=");if(1<ve.length){var ct=ve[0];ve=ve[1];var lt=ct.split("_");k=2<=lt.length&&lt[1]=="type"?k+(ct+"="+ve+"&"):k+(ct+"=redacted&")}}else k=null;else k=x;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+h+`
`+k})}function MA(c,d,h,m,D,x,k){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+h+`
`+x+" "+k})}function is(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+kA(c,h)+(m?" "+m:"")})}function PA(c,d){c.info(function(){return"TIMEOUT: "+d})}Go.prototype.info=function(){};function kA(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var m=h[c];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var x=D[0];if(x!="noop"&&x!="stop"&&x!="close")for(var k=1;k<D.length;k++)D[k]=""}}}}return Ch(h)}catch{return d}}var zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},T_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sh;function Gc(){}N(Gc,bh),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},Sh=new Gc;function vr(c,d,h,m){this.j=c,this.i=d,this.l=h,this.R=m||1,this.U=new $o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new D_}function D_(){this.i=null,this.g="",this.h=!1}var S_={},Ah={};function Nh(c,d,h){c.L=1,c.v=Yc(Kn(d)),c.m=h,c.P=!0,A_(c,null)}function A_(c,d){c.F=Date.now(),Wc(c),c.A=Kn(c.v);var h=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),$_(h.i,"t",m),c.C=0,h=c.j.J,c.h=new D_,c.g=ow(c.j,h?d:null,!c.m),0<c.O&&(c.M=new AA(g(c.Y,c,c.g),c.O)),d=c.U,h=c.g,m=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(y_[0]=D.toString()),D=y_);for(var x=0;x<D.length;x++){var k=u_(h,D[x],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),qo(),xA(c.i,c.u,c.A,c.l,c.R,c.m)}vr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Qn(c)==3?d.j():this.Y(c)},vr.prototype.Y=function(c){try{if(c==this.g)e:{let lt=Qn(this.g);var d=this.g.Ba();let as=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||Q_(this.g)))){this.J||lt!=4||d==7||(d==8||0>=as?qo(3):qo(2)),Rh(this);var h=this.g.Z();this.X=h;t:if(N_(this)){var m=Q_(this.g);c="";var D=m.length,x=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Wo(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(x&&d==D-1)});m.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,MA(this.i,this.u,this.A,this.l,this.R,lt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var be,nt=this.g;if((be=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(be)){var ve=be;break t}}ve=null}if(h=ve)is(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,h);else{this.o=!1,this.s=3,mt(12),ni(this),Wo(this);break e}}if(this.P){h=!0;let on;for(;!this.J&&this.C<k.length;)if(on=OA(this,k),on==Ah){lt==4&&(this.s=4,mt(14),h=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(on==S_){this.s=4,mt(15),is(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else is(this.i,this.l,on,null),xh(this,on);if(N_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||k.length!=0||this.h.h||(this.s=1,mt(16),h=!1),this.o=this.o&&h,!h)is(this.i,this.l,k,"[Invalid Chunked Response]"),ni(this),Wo(this);else if(0<k.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Lh(ct),ct.M=!0,mt(11))}}else is(this.i,this.l,k,null),xh(this,k);lt==4&&ni(this),this.o&&!this.J&&(lt==4?nw(this.j,this):(this.o=!1,Wc(this)))}else ZA(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ni(this),Wo(this)}}}catch{}finally{}};function N_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function OA(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?Ah:(h=Number(d.substring(h,m)),isNaN(h)?S_:(m+=1,m+h>d.length?Ah:(d=d.slice(m,m+h),c.C=m+h,d)))}vr.prototype.cancel=function(){this.J=!0,ni(this)};function Wc(c){c.S=Date.now()+c.I,R_(c,c.I)}function R_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=zo(g(c.ba,c),d)}function Rh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(PA(this.i,this.A),this.L!=2&&(qo(),mt(17)),ni(this),this.s=2,Wo(this)):R_(this,this.S-c)};function Wo(c){c.j.G==0||c.J||nw(c.j,c)}function ni(c){Rh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,v_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function xh(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Mh(h.h,c))){if(!c.K&&Mh(h.h,c)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)tl(h),Xc(h);else break e;Fh(h),mt(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=zo(g(h.Za,h),6e3));if(1>=P_(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else ii(h,11)}else if((c.K||h.g==c)&&tl(h),!ee(d))for(D=h.Da.g.parse(d),d=0;d<D.length;d++){let ve=D[d];if(h.T=ve[0],ve=ve[1],h.G==2)if(ve[0]=="c"){h.K=ve[1],h.ia=ve[2];let ct=ve[3];ct!=null&&(h.la=ct,h.j.info("VER="+h.la));let lt=ve[4];lt!=null&&(h.Aa=lt,h.j.info("SVER="+h.Aa));let as=ve[5];as!=null&&typeof as=="number"&&0<as&&(m=1.5*as,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let on=c.g;if(on){let rl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var x=m.h;x.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Ph(x,x.h),x.h=null))}if(m.D){let Vh=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Vh&&(m.ya=Vh,Se(m.I,m.D,Vh))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var k=c;if(m.qa=sw(m,m.J?m.ia:null,m.W),k.K){k_(m.h,k);var be=k,nt=m.L;nt&&(be.I=nt),be.B&&(Rh(be),Wc(be)),m.g=k}else ew(m);0<h.i.length&&el(h)}else ve[0]!="stop"&&ve[0]!="close"||ii(h,7);else h.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ii(h,7):Oh(h):ve[0]!="noop"&&h.l&&h.l.ta(ve),h.v=0)}}qo(4)}catch{}}var FA=class{constructor(c,d){this.g=c,this.map=d}};function x_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function M_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function P_(c){return c.h?1:c.g?c.g.size:0}function Mh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ph(c,d){c.g?c.g.add(d):c.h=d}function k_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}x_.prototype.cancel=function(){if(this.i=O_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function O_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return P(c.i)}function LA(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],h=c.length,m=0;m<h;m++)d.push(c[m]);return d}d=[],h=0;for(m in c)d[h++]=c[m];return d}function VA(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let m in c)d[h++]=m;return d}}}function F_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=VA(c),m=LA(c),D=m.length,x=0;x<D;x++)d.call(void 0,m[x],h&&h[x],c)}var L_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UA(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var m=c[h].indexOf("="),D=null;if(0<=m){var x=c[h].substring(0,m);D=c[h].substring(m+1)}else x=c[h];d(x,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,Kc(this,c.j),this.o=c.o,this.g=c.g,Qc(this,c.s),this.l=c.l;var d=c.i,h=new Yo;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),V_(this,h),this.m=c.m}else c&&(d=String(c).match(L_))?(this.h=!1,Kc(this,d[1]||"",!0),this.o=Ko(d[2]||""),this.g=Ko(d[3]||"",!0),Qc(this,d[4]),this.l=Ko(d[5]||"",!0),V_(this,d[6]||"",!0),this.m=Ko(d[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Qo(d,U_,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qo(d,U_,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(Qo(h,h.charAt(0)=="/"?$A:BA,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",Qo(h,qA)),c.join("")};function Kn(c){return new ri(c)}function Kc(c,d,h){c.j=h?Ko(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Qc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function V_(c,d,h){d instanceof Yo?(c.i=d,zA(c.i,c.h)):(h||(d=Qo(d,HA)),c.i=new Yo(d,c.h))}function Se(c,d,h){c.i.set(d,h)}function Yc(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ko(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qo(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,jA),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function jA(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var U_=/[#\/\?@]/g,BA=/[#\?:]/g,$A=/[#\?]/g,HA=/[#\?@]/g,qA=/#/g;function Yo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function _r(c){c.g||(c.g=new Map,c.h=0,c.i&&UA(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Yo.prototype,t.add=function(c,d){_r(this),this.i=null,c=ss(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function j_(c,d){_r(c),d=ss(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function B_(c,d){return _r(c),d=ss(c,d),c.g.has(d)}t.forEach=function(c,d){_r(this),this.g.forEach(function(h,m){h.forEach(function(D){c.call(d,D,m,this)},this)},this)},t.na=function(){_r(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let D=c[m];for(let x=0;x<D.length;x++)h.push(d[m])}return h},t.V=function(c){_r(this);let d=[];if(typeof c=="string")B_(this,c)&&(d=d.concat(this.g.get(ss(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},t.set=function(c,d){return _r(this),this.i=null,c=ss(this,c),B_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $_(c,d,h){j_(c,d),0<h.length&&(c.i=null,c.g.set(ss(c,d),P(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let x=encodeURIComponent(String(m)),k=this.V(m);for(m=0;m<k.length;m++){var D=x;k[m]!==""&&(D+="="+encodeURIComponent(String(k[m]))),c.push(D)}}return this.i=c.join("&")};function ss(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function zA(c,d){d&&!c.j&&(_r(c),c.i=null,c.g.forEach(function(h,m){var D=m.toLowerCase();m!=D&&(j_(this,m),$_(this,D,h))},c)),c.j=d}function GA(c,d){let h=new Go;if(a.Image){let m=new Image;m.onload=S(wr,h,"TestLoadImage: loaded",!0,d,m),m.onerror=S(wr,h,"TestLoadImage: error",!1,d,m),m.onabort=S(wr,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=S(wr,h,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function WA(c,d){let h=new Go,m=new AbortController,D=setTimeout(()=>{m.abort(),wr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(D),x.ok?wr(h,"TestPingServer: ok",!0,d):wr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),wr(h,"TestPingServer: error",!1,d)})}function wr(c,d,h,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(h)}catch{}}function KA(){this.g=new RA}function QA(c,d,h){let m=h||"";try{F_(c,function(D,x){let k=D;u(D)&&(k=Ch(D)),d.push(m+x+"="+encodeURIComponent(k))})}catch(D){throw d.push(m+"type="+encodeURIComponent("_badmap")),D}}function Jo(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Jo,bh),Jo.prototype.g=function(){return new Jc(this.l,this.j)},Jo.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){at.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Jc,at),t=Jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Xo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;H_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function H_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Zo(this):Xo(this),this.readyState==3&&H_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Zo(this))},t.Qa=function(c){this.g&&(this.response=c,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Xo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function q_(c){let d="";return de(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function kh(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=q_(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Se(c,d,h))}function Oe(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Oe,at);var YA=/^https?$/i,JA=["POST","PUT"];t=Oe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sh.g(),this.v=this.o?__(this.o):__(Sh),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){z_(this,x);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)h.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())h.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(x=>x.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JA,d,void 0))||m||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,k]of h)this.g.setRequestHeader(x,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{K_(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){z_(this,x)}};function z_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,G_(c),Zc(c)}function G_(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),Zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zc(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?W_(this):this.bb())},t.bb=function(){W_(this)};function W_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)m_(c.Ea,0,c);else if(pt(c,"readystatechange"),Qn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=k===0){var D=String(c.D).match(L_)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!YA.test(D?D.toLowerCase():"")}h=m}if(h)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var x=2<Qn(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",G_(c)}}finally{Zc(c)}}}}function Zc(c,d){if(c.g){K_(c);let h=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||pt(c,"ready");try{h.onreadystatechange=m}catch{}}}function K_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),NA(d)}};function Q_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ZA(c){let d={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(ee(c[m]))continue;var h=T(c[m]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let x=d[D]||[];d[D]=x,x.push(h)}C(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function Y_(c){this.Aa=0,this.i=[],this.j=new Go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,c),this.cb=ea("retryDelaySeedMs",1e4,c),this.Wa=ea("forwardChannelMaxRetries",2,c),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new x_(c&&c.concurrentRequestLimit),this.Da=new KA,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Y_.prototype,t.la=8,t.G=1,t.connect=function(c,d,h,m){mt(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=sw(this,null,this.W),el(this)};function Oh(c){if(J_(c),c.G==3){var d=c.U++,h=Kn(c.I);if(Se(h,"SID",c.K),Se(h,"RID",d),Se(h,"TYPE","terminate"),ta(c,h),d=new vr(c,c.j,d),d.L=2,d.v=Yc(Kn(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=ow(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Wc(d)}iw(c)}function Xc(c){c.g&&(Lh(c),c.g.cancel(),c.g=null)}function J_(c){Xc(c),c.u&&(a.clearTimeout(c.u),c.u=null),tl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function el(c){if(!M_(c.h)&&!c.s){c.s=!0;var d=c.Ga;Vo||l_(),Uo||(Vo(),Uo=!0),ph.add(d,c),c.B=0}}function XA(c,d){return P_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=zo(g(c.Ga,c,d),rw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new vr(this,this.j,c),x=this.o;if(this.S&&(x?(x=y(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(D.H=x,x=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=X_(this,D,d),h=Kn(this.I),Se(h,"RID",c),Se(h,"CVER",22),this.D&&Se(h,"X-HTTP-Session-Id",this.D),ta(this,h),x&&(this.O?d="headers="+encodeURIComponent(String(q_(x)))+"&"+d:this.m&&kh(h,this.m,x)),Ph(this.h,D),this.Ua&&Se(h,"TYPE","init"),this.P?(Se(h,"$req",d),Se(h,"SID","null"),D.T=!0,Nh(D,h,null)):Nh(D,h,d),this.G=2}}else this.G==3&&(c?Z_(this,c):this.i.length==0||M_(this.h)||Z_(this))};function Z_(c,d){var h;d?h=d.l:h=c.U++;let m=Kn(c.I);Se(m,"SID",c.K),Se(m,"RID",h),Se(m,"AID",c.T),ta(c,m),c.m&&c.o&&kh(m,c.m,c.o),h=new vr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=X_(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ph(c.h,h),Nh(h,m,d)}function ta(c,d){c.H&&de(c.H,function(h,m){Se(d,m,h)}),c.l&&F_({},function(h,m){Se(d,m,h)})}function X_(c,d,h){h=Math.min(c.i.length,h);var m=c.l?g(c.l.Na,c.l,c):null;e:{var D=c.i;let x=-1;for(;;){let k=["count="+h];x==-1?0<h?(x=D[0].g,k.push("ofs="+x)):x=0:k.push("ofs="+x);let be=!0;for(let nt=0;nt<h;nt++){let ve=D[nt].g,ct=D[nt].map;if(ve-=x,0>ve)x=Math.max(0,D[nt].g-100),be=!1;else try{QA(ct,k,"req"+ve+"_")}catch{m&&m(ct)}}if(be){m=k.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,m}function ew(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Vo||l_(),Uo||(Vo(),Uo=!0),ph.add(d,c),c.v=0}}function Fh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=zo(g(c.Fa,c),rw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,tw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=zo(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Xc(this),tw(this))};function Lh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tw(c){c.g=new vr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Kn(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),ta(c,d),c.m&&c.o&&kh(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=Yc(Kn(d)),h.m=null,h.P=!0,A_(h,c)}t.Za=function(){this.C!=null&&(this.C=null,Xc(this),Fh(this),mt(19))};function tl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nw(c,d){var h=null;if(c.g==d){tl(c),Lh(c),c.g=null;var m=2}else if(Mh(c.h,d))h=d.D,k_(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;m=qc(),pt(m,new b_(m,h)),el(c)}else ew(c);else if(D=d.s,D==3||D==0&&0<d.X||!(m==1&&XA(c,d)||m==2&&Fh(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),D){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function rw(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var h=g(c.fb,c),m=c.Xa;let D=!m;m=new ri(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kc(m,"https"),Yc(m),D?GA(m.toString(),h):WA(m.toString(),h)}else mt(2);c.G=0,c.l&&c.l.sa(d),iw(c),J_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function iw(c){if(c.G=0,c.ka=[],c.l){let d=O_(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function sw(c,d,h){var m=h instanceof ri?Kn(h):new ri(h);if(m.g!="")d&&(m.g=d+"."+m.g),Qc(m,m.s);else{var D=a.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var x=new ri(null);m&&Kc(x,m),d&&(x.g=d),D&&Qc(x,D),h&&(x.l=h),m=x}return h=c.D,d=c.ya,h&&d&&Se(m,h,d),Se(m,"VER",c.la),ta(c,m),m}function ow(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new Jo({eb:h})):new Oe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aw(){}t=aw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(c,d){return new xt(c,d)};function xt(c,d){at.call(this),this.g=new Y_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!ee(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ee(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new os(this)}N(xt,at),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Oh(this.g)},xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=Ch(c),c=h);d.i.push(new FA(d.Ya++,c)),d.G==3&&el(d)},xt.prototype.N=function(){this.g.l=null,delete this.j,Oh(this.g),delete this.g,xt.aa.N.call(this)};function cw(c){Th.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}N(cw,Th);function lw(){Dh.call(this),this.status=1}N(lw,Dh);function os(c){this.g=c}N(os,aw),os.prototype.ua=function(){pt(this.g,"a")},os.prototype.ta=function(c){pt(this.g,new cw(c))},os.prototype.sa=function(c){pt(this.g,new lw)},os.prototype.ra=function(){pt(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,lD=pr.createWebChannelTransport=function(){return new nl},cD=pr.getStatEventTarget=function(){return qc()},aD=pr.Event=ti,oD=pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zc.NO_ERROR=0,zc.TIMEOUT=8,zc.HTTP_ERROR=6,sD=pr.ErrorCode=zc,T_.COMPLETE="complete",iD=pr.EventType=T_,w_.EventType=Ho,Ho.OPEN="a",Ho.CLOSE="b",Ho.ERROR="c",Ho.MESSAGE="d",at.prototype.listen=at.prototype.K,rD=pr.WebChannel=w_,nD=pr.FetchXmlHttpFactory=Jo,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,tD=pr.XhrIo=Oe}).apply(typeof $d<"u"?$d:typeof self<"u"?self:typeof window<"u"?window:{});var uD="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Cc="10.12.1";var wo=new Vn("@firebase/firestore");function $t(t,...e){if(wo.logLevel<=ye.DEBUG){let n=e.map(zy);wo.debug(`Firestore (${Cc}): ${t}`,...n)}}function qy(t,...e){if(wo.logLevel<=ye.ERROR){let n=e.map(zy);wo.error(`Firestore (${Cc}): ${t}`,...n)}}function Tj(t,...e){if(wo.logLevel<=ye.WARN){let n=e.map(zy);wo.warn(`Firestore (${Cc}): ${t}`,...n)}}function zy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Nt(t="Unexpected state"){let e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+t;throw qy(e),new Error(e)}function Ic(t,e){t||Nt()}var st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},We=class extends Ut{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Hd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}},Sy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ay=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),s=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>R(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ic(typeof r.accessToken=="string"),new Hd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ic(e===null||typeof e=="string"),new et(e)}},Ny=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ry=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ny(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},My=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ic(typeof n.token=="string"),this.R=n.token,new xy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Dj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Py=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Dj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function mD(t,e){return t<e?-1:t>e?1:0}var ky=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Nt(),r===void 0?r=e.length-n:r>e.length-n&&Nt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Jr=class t extends ky{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new We(st.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var Qi=class t{constructor(e){this.path=e}static fromPath(e){return new t(Jr.fromString(e))}static fromName(e){return new t(Jr.fromString(e).popFirst(5))}static empty(){return new t(Jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Jr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Jr(e.slice()))}};var Oy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Oy.UNKNOWN_ID=-1;function gD(t){return t.name==="IndexedDbTransactionError"}function Sj(t){return t===0&&1/t==-1/0}var Aj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oK=[...Aj,"documentOverlays"],Nj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rj=Nj,aK=[...Rj,"indexConfiguration","indexState","indexEntries"];var Eo=class t{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nt();let e=this.left.check();if(e!==this.right.check())throw Nt();return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt()}get value(){throw Nt()}get color(){throw Nt()}get left(){throw Nt()}get right(){throw Nt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qd=class t{constructor(e){this.comparator=e,this.data=new Eo(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zd(this.data.getIterator())}getIteratorFrom(e){return new zd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Io=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Fy("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mD(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Io.EMPTY_BYTE_STRING=new Io("");var xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mj(t){if(Ic(!!t),typeof t=="string"){let e=0,n=xj.exec(t);if(Ic(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gd(t.seconds),nanos:Gd(t.nanos)}}function Gd(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pj(t){return typeof t=="string"?Io.fromBase64String(t):Io.fromUint8Array(t)}var Ly=class{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Vy=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function kj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var lK=new Eo(Qi.comparator);var uK=new Eo(Qi.comparator);var dK=new Eo(Qi.comparator),hK=new qd(Qi.comparator);var fK=new qd(mD);var dD,fe;(fe=dD||(dD={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var pK=new by([4294967295,4294967295],0);var Wd=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Gd(e.integerValue));else if("doubleValue"in e){let r=Gd(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Sj(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Mj(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Pj(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?kj(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Nt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Qi.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Wd.bt=new Wd;var mK=new Uint8Array(0);var zn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);function Ty(){return typeof document<"u"?document:null}var Uy=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&$t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var jy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Oj(t,e){if(qy("AsyncQueue",`${e}: ${t}`),gD(t))return new We(st.UNAVAILABLE,`${e}: ${t}`);throw t}var hD,fD;(fD=hD||(hD={})).J_="default",fD.Cache="cache";var By=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>R(this,null,function*(){$t("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($t("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new We(st.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Oj(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yD(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var pD=new Map;function Fj(t,e,n,r){if(e===!0&&r===!0)throw new We(st.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Nt()}function Vj(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Lj(t);throw new We(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Kd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new We(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new We(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new We(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qd=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new We(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new We(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dy;switch(r.type){case"firstParty":return new Ry(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=pD.get(n);r&&($t("ComponentProvider","Removing Datastore"),pD.delete(n),r.terminate())}(this),Promise.resolve()}};function vD(t,e,n,r={}){var i;let s=(t=Vj(t,Qd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Tj("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=et.MOCK_USER;else{a=lg(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new We(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new et(u)}t._authCredentials=new Sy(new Hd(a,l))}}var $y=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Uy(this,"async_queue_retry"),this.hu=()=>{let n=Ty();n&&$t("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Ty();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Ty();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Zr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return R(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!gD(e))throw e;$t("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=jy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Nt()}verifyOperationInProgress(){}du(){return R(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Hy=class extends Qd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new $y}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Uj(this),this._firestoreClient.terminate()}};function _D(t,e){let n=typeof t=="object"?t:Ui(),r=typeof t=="string"?t:e||"(default)",i=oo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=og("firestore");s&&vD(i,...s)}return i}function Uj(t){var e,n,r;let i=t._freezeSettings(),s=function(a,l,u,f){return new Ly(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new By(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var gK=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){Cc=i})(Bn),jn(new St("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Hy(new Ay(r.getProvider("auth-internal")),new My(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new We(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vy(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Re(uD,"4.6.3",e),Re(uD,"4.6.3","esm2017")})();var mr=class{constructor(e){return e}},wD="firestore",Gy=class{constructor(){return $i(wD)}};var Wy=new B("angularfire2.firestore-instances");function jj(t,e){let n=co(wD,t,e);return n&&new mr(n)}function Bj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mr(r)}}var $j={provide:Gy,deps:[[new Ye,Wy]]},Hj={provide:mr,useFactory:jj,deps:[[new Ye,Wy],vn]},Ky=(()=>{class t{constructor(){Re("angularfire",ur.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[Hj,$j]})}return t})();function ED(t,...e){return{ngModule:Ky,providers:[{provide:Wy,useFactory:Bj(t),multi:!0,deps:[Ee,_t,Hi,qr,[new Ye,fc],[new Ye,Bi],...e]}]}}var ID=Hr(_D,!0);function qj(t,e){if(t&1){let n=Ii();w(0,"tr",20)(1,"td",21),b(2,"Date"),E(),w(3,"td"),b(4),E(),w(5,"td",21),b(6,"Start time"),E(),w(7,"td"),b(8),E(),w(9,"td",21),b(10,"End time"),E(),w(11,"td"),b(12),E(),w(13,"td",21),b(14,"Hourly wage"),E(),w(15,"td"),b(16),E(),w(17,"td",21),b(18,"Workplace"),E(),w(19,"td"),b(20),E(),w(21,"td",21),b(22,"Profit"),E(),w(23,"td"),b(24),E(),w(25,"td",22)(26,"button",23),ge("click",function(){let i=pn(n).$implicit,s=$e();return mn(s.editShift(i))}),b(27,"Edit"),E(),w(28,"button",23),ge("click",function(){let i=pn(n).$implicit,s=$e();return mn(s.deleteShift(i))}),b(29,"Delete"),E()()()}if(t&2){let n=e.$implicit;O(4),ae(n.formattedDate),O(4),ae(n.start),O(4),ae(n.end),O(4),ae(n.wage),O(4),ae(n.workplace),O(4),ae(n.profit)}}var Qy=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.router=i,this.fb=s,this.shifts=[],this.bestMonth="",this.bestMonthProfit=0,this.searchForm=this.fb.group({workplace:["any"],start:[""],end:[""]})}ngOnInit(){this.loadShifts()}loadShifts(){this.authService.getShifts().subscribe(r=>{this.shifts=r.map(i=>{let s=this.convertTimeToNumber(i.start),o=this.convertTimeToNumber(i.end),a=Number(i.wage),l=!isNaN(s)&&!isNaN(o)&&!isNaN(a)?(o-s)*a:0;return ie(F({},i),{formattedDate:new Date(i.date).toLocaleDateString(),profit:l.toFixed(0)})}),this.shifts.sort((i,s)=>new Date(i.date).getTime()-new Date(s.date).getTime()),this.calculateBestMonth()})}filterShifts(){let r=this.searchForm.value;this.authService.getShifts().subscribe(i=>{let s=i.map(o=>{let a=this.convertTimeToNumber(o.start),l=this.convertTimeToNumber(o.end),u=Number(o.wage),f=!isNaN(a)&&!isNaN(l)&&!isNaN(u)?(l-a)*u:0;return ie(F({},o),{formattedDate:new Date(o.date).toLocaleDateString(),profit:f.toFixed(0)})});this.shifts=s.filter(o=>{let a=r.workplace==="any"||o.workplace===r.workplace,l=!r.start||new Date(o.date)>=new Date(r.start),u=!r.end||new Date(o.date)<=new Date(r.end);return a&&l&&u}),this.shifts.sort((o,a)=>new Date(o.date).getTime()-new Date(a.date).getTime())},i=>{console.error("Error loading shifts:",i)})}clearSearch(){this.searchForm.reset({workplace:"any",start:"",end:""}),this.loadShifts()}editShift(r){this.router.navigate(["/editshift",r._id])}deleteShift(r){this.authService.deleteShift(r._id).subscribe(()=>{this.shifts=this.shifts.filter(i=>i._id!==r._id),this.calculateBestMonth()},i=>{console.error(`Error deleting shift: ${i.message}`)})}calculateBestMonth(){let r={};this.shifts.forEach(o=>{let l=new Date(o.date).toLocaleString("default",{month:"long",year:"numeric"});r[l]||(r[l]=0);let u=parseFloat(o.profit)||0;r[l]+=u});let i="",s=0;for(let o in r)r[o]>s&&(s=r[o],i=o);this.bestMonth=i,this.bestMonthProfit=s.toFixed(0)}convertTimeToNumber(r){let[i,s]=r.split(":").map(Number);return i+s/60}};e.\u0275fac=function(i){return new(i||e)(U(ut),U(Et),U(en))},e.\u0275cmp=Be({type:e,selectors:[["app-shifts"]],standalone:!0,features:[He],decls:50,vars:4,consts:[[1,"search",3,"formGroup"],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","any"],["value","option1"],["value","option2"],["value","option3"],["for","start"],["formControlName","start","type","date","name","start","required",""],["for","end"],["formControlName","end","type","date","name","end","required",""],["type","button",3,"click"],[1,"table"],["id","shiftTable",1,"shift-table"],[1,"table-header"],["id","shiftTableBody"],["class","shifts",4,"ngFor","ngForOf"],[1,"display-month"],["colspan","2","id","bestMonth"],["colspan","3","id","bestMonthProfit"],[1,"shifts"],[1,"mobile"],[1,"btn"],[3,"click"]],template:function(i,s){i&1&&(w(0,"h1"),b(1,"Shifts"),E(),w(2,"div",0)(3,"label",1),b(4,"Workplace:"),E(),w(5,"select",2)(6,"option",3),b(7,"Any"),E(),w(8,"option",4),b(9,"Option 1"),E(),w(10,"option",5),b(11,"Option 2"),E(),w(12,"option",6),b(13,"Option 3"),E()(),w(14,"label",7),b(15,"Start date:"),E(),re(16,"input",8),w(17,"label",9),b(18,"End date:"),E(),re(19,"input",10),w(20,"button",11),ge("click",function(){return s.filterShifts()}),b(21,"Search"),E(),w(22,"button",11),ge("click",function(){return s.clearSearch()}),b(23,"Clear"),E()(),w(24,"div",12)(25,"table",13)(26,"thead")(27,"tr",14)(28,"th"),b(29,"Date"),E(),w(30,"th"),b(31,"Start time"),E(),w(32,"th"),b(33,"End time"),E(),w(34,"th"),b(35,"Hourly wage"),E(),w(36,"th"),b(37,"Workplace"),E(),w(38,"th"),b(39,"Profit"),E()()(),w(40,"tbody",15),_e(41,qj,30,6,"tr",16),E(),w(42,"tfoot")(43,"tr",17)(44,"th"),b(45,"Best Month"),E(),w(46,"th",18),b(47),E(),w(48,"th",19),b(49),E()()()()()),i&2&&(O(2),W("formGroup",s.searchForm),O(39),W("ngForOf",s.shifts),O(6),Tt("is ",s.bestMonth,""),O(2),Tt("with a profit of ",s.bestMonthProfit," $ "))},dependencies:[Nu,Ge,Ky,tn,go,yo,At,Yr,Zt,Xt,_n,jt,Bt],styles:[".shift-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:70px;box-sizing:border-box;margin-bottom:10px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}.search[_ngcontent-%COMP%]{height:50px;display:flex;justify-content:center;align-items:center;background-color:#395b64;border-radius:8px;box-shadow:0 0 10px #0000001a;padding:20px;text-align:center;margin-top:30px}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}.table[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;border-radius:10px;padding:10px;margin-top:30px;background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{display:none}.shift-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#395b64;padding:20px}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2c3333;color:#e7f6f2}@media (max-width: 850px){.shift-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.search[_ngcontent-%COMP%]{flex-direction:column;height:100%;width:80%;margin:auto}.table[_ngcontent-%COMP%]{background-color:#2c3333;margin-top:0}.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#395b64;color:#e7f6f2}.mobile[_ngcontent-%COMP%]{font-weight:700}.shift-table[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:10px}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}.shift-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;border:1px solid #395B64;border-radius:8px;background-color:#395b64;color:#e7f6f2}.shift-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:70px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}@media (min-width: 551px) and (max-width: 850px){.shift-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:5px;justify-content:center}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:calc(50% - 5px)}.shift-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-weight:700;display:block;margin-bottom:5px}button[_ngcontent-%COMP%]{display:inline-block;width:100px;box-sizing:border-box;margin-bottom:5px;padding:10px;background-color:#e7f6f2;color:#2c3333;border:none;border-radius:5px}}"]});let t=e;return t})();var zj=t=>({successful:t}),bD=(()=>{let e=class e{constructor(r,i,s,o){this.fb=r,this.authService=i,this.auth=s,this.firestore=o,this.message="",this.successClass=!1,this.shiftForm=this.fb.group({date:["",ce.required],start:["",ce.required],end:["",ce.required],wage:["",ce.required],workplace:["",ce.required],name:["",ce.required],comments:["",ce.required]})}onSubmit(){if(!this.shiftForm.valid)return;let r=this.shiftForm.value;this.authService.addShift(r).subscribe(()=>{this.handleSuccess()},i=>{this.handleError(new Error("Failed to save shift data"))})}handleSuccess(){this.message="Shift saved successfully",this.successClass=!0,setTimeout(()=>{this.successClass=!1,this.shiftForm.reset(),this.message=""},2e3)}handleError(r){this.message=`Error saving shift: ${r.message}`}};e.\u0275fac=function(i){return new(i||e)(U(en),U(ut),U(It),U(mr))},e.\u0275cmp=Be({type:e,selectors:[["app-addshift"]],standalone:!0,features:[He],decls:36,vars:5,consts:[[1,"form"],[3,"ngSubmit","formGroup"],["for","date"],["formControlName","date","type","date","name","date","required",""],["for","start"],["formControlName","start","type","time","name","start","required",""],["for","end"],["formControlName","end","type","time","name","end","required",""],["for","wage"],["formControlName","wage","type","number","name","wage","required",""],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","option1"],["value","option2"],["value","option3"],["for","name"],["formControlName","name","type","text","name","name","required",""],["for","comments"],["formControlName","comments","type","text","name","comments","required",""],["type","submit"],[3,"ngClass"]],template:function(i,s){i&1&&(w(0,"div")(1,"h1"),b(2,"Add Shift"),E()(),w(3,"div",0)(4,"form",1),ge("ngSubmit",function(){return s.onSubmit()}),w(5,"label",2),b(6,"Date"),E(),re(7,"input",3),w(8,"label",4),b(9,"Start time:"),E(),re(10,"input",5),w(11,"label",6),b(12,"End time:"),E(),re(13,"input",7),w(14,"label",8),b(15,"Hourly wage:"),E(),re(16,"input",9),w(17,"label",10),b(18,"Workplace:"),E(),w(19,"select",11)(20,"option",12),b(21,"Option 1"),E(),w(22,"option",13),b(23,"Option 2"),E(),w(24,"option",14),b(25,"Option 3"),E()(),w(26,"label",15),b(27,"Shift name:"),E(),re(28,"input",16),w(29,"label",17),b(30,"Comments:"),E(),re(31,"input",18),w(32,"button",19),b(33,"Save"),E(),w(34,"p",20),b(35),E()()()),i&2&&(O(4),W("formGroup",s.shiftForm),O(30),W("ngClass",Ci(3,zj,s.successClass)),O(),ae(s.message))},dependencies:[JT,qn,go,yo,At,Ec,Yr,Zt,Xt,_n,tn,jt,Bt,zs,Ge],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();var Gj=t=>({successful:t});function Wj(t,e){if(t&1&&(w(0,"p",22),b(1),E()),t&2){let n=$e();W("ngClass",Ci(2,Gj,n.successClass)),O(),ae(n.message)}}var bc=(()=>{let e=class e{constructor(r,i,s,o){this.fb=r,this.authService=i,this.route=s,this.router=o,this.message="",this.successClass=!1,this.shiftForm=this.fb.group({date:[""],start:[""],end:[""],wage:[""],workplace:[""],name:[""],comments:[""]})}ngOnInit(){this.shiftId=this.route.snapshot.paramMap.get("id"),this.loadShift()}loadShift(){this.authService.getShiftById(this.shiftId).subscribe(r=>{this.shiftForm.patchValue({date:new Date(r.date).toISOString().substring(0,10),start:r.start,end:r.end,wage:r.wage,workplace:r.workplace,name:r.name,comments:r.comments})},r=>{this.message=`Error loading shift: ${r.message}`})}onSubmit(){if(this.shiftForm.valid){let r=this.shiftForm.value;this.authService.updateShift(this.shiftId,r).subscribe(()=>{this.message="Shift saved successfully",this.successClass=!0,setTimeout(()=>{this.successClass=!1,this.router.navigate(["/shifts"])},2e3)},i=>{this.message=`Error saving shift: ${i.message}`})}}onDelete(){this.authService.deleteShift(this.shiftId).subscribe(()=>{this.message="Shift deleted successfully",this.successClass=!0,setTimeout(()=>{this.successClass=!1,this.router.navigate(["/shifts"])},2e3)},r=>{this.message=`Error deleting shift: ${r.message}`})}};e.\u0275fac=function(i){return new(i||e)(U(en),U(ut),U(ar),U(Et))},e.\u0275cmp=Be({type:e,selectors:[["app-editshift"]],standalone:!0,features:[He],decls:36,vars:2,consts:[[1,"form"],[3,"formGroup"],["for","date"],["formControlName","date","type","date","name","date","required",""],["for","start"],["formControlName","start","type","time","name","start","required",""],["for","end"],["formControlName","end","type","time","name","end","required",""],["for","wage"],["formControlName","wage","type","number","name","wage","required",""],["for","workplace"],["formControlName","workplace","name","workplace","required",""],["value","option1"],["value","option2"],["value","option3"],["for","name"],["formControlName","name","type","text","name","name","required",""],["for","comments"],["formControlName","comments","type","text","name","comments"],["type","button",3,"click"],[3,"click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(i,s){i&1&&(w(0,"h1"),b(1,"Edit Shift"),E(),w(2,"div",0)(3,"form",1)(4,"label",2),b(5,"Date"),E(),re(6,"input",3),w(7,"label",4),b(8,"Start time:"),E(),re(9,"input",5),w(10,"label",6),b(11,"End time:"),E(),re(12,"input",7),w(13,"label",8),b(14,"Hourly wage:"),E(),re(15,"input",9),w(16,"label",10),b(17,"Workplace:"),E(),w(18,"select",11)(19,"option",12),b(20,"Option 1"),E(),w(21,"option",13),b(22,"Option 2"),E(),w(23,"option",14),b(24,"Option 3"),E()(),w(25,"label",15),b(26,"Name:"),E(),re(27,"input",16),w(28,"label",17),b(29,"Comments:"),E(),re(30,"input",18),w(31,"button",19),ge("click",function(){return s.onSubmit()}),b(32,"Save"),E()(),w(33,"button",20),ge("click",function(){return s.onDelete()}),b(34,"Delete"),E(),_e(35,Wj,2,4,"p",21),E()),i&2&&(O(3),W("formGroup",s.shiftForm),O(32),W("ngIf",s.message))},dependencies:[tn,qn,go,yo,At,Ec,Yr,Zt,Xt,_n,jt,Bt,kn,Ge,zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();var TD=t=>({successful:t});function Kj(t,e){t&1&&(w(0,"div",11),b(1," Email must be in a valid format. "),E())}function Qj(t,e){t&1&&(w(0,"div",11),b(1," First Name must have at least 2 characters. "),E())}function Yj(t,e){t&1&&(w(0,"div",11),b(1," Last Name must have at least 2 characters. "),E())}function Jj(t,e){t&1&&(w(0,"div",11),b(1," Age must be between 6 and 130. "),E())}function Zj(t,e){if(t&1&&(w(0,"div",12),b(1),E()),t&2){let n=$e(2);W("ngClass",Ci(2,TD,n.message.includes("successfully"))),O(),ae(n.message)}}function Xj(t,e){if(t&1){let n=Ii();w(0,"div",1)(1,"form",2)(2,"label"),b(3,"Email:"),E(),re(4,"input",3),_e(5,Kj,2,0,"div",4),w(6,"label"),b(7,"First Name:"),E(),re(8,"input",5),_e(9,Qj,2,0,"div",4),w(10,"label"),b(11,"Last Name:"),E(),re(12,"input",6),_e(13,Yj,2,0,"div",4),w(14,"label"),b(15,"Birth Date:"),E(),re(16,"input",7),_e(17,Jj,2,0,"div",4),w(18,"button",8),ge("click",function(){pn(n);let i=$e();return mn(i.onUpdate())}),b(19,"Update"),E(),w(20,"button",8),ge("click",function(){pn(n);let i=$e();return mn(i.onDelete())}),b(21,"Delete"),E(),w(22,"p",9),ge("click",function(){pn(n);let i=$e();return mn(i.toggleChangePasswordMode())}),b(23,"Change password"),E()(),_e(24,Zj,2,4,"div",10),E()}if(t&2){let n,r,i,s,o=$e();O(),W("formGroup",o.profileForm),O(4),W("ngIf",((n=o.profileForm.get("email"))==null?null:n.invalid)&&(((n=o.profileForm.get("email"))==null?null:n.dirty)||((n=o.profileForm.get("email"))==null?null:n.touched))),O(4),W("ngIf",((r=o.profileForm.get("firstName"))==null?null:r.invalid)&&(((r=o.profileForm.get("firstName"))==null?null:r.dirty)||((r=o.profileForm.get("firstName"))==null?null:r.touched))),O(4),W("ngIf",((i=o.profileForm.get("lastName"))==null?null:i.invalid)&&(((i=o.profileForm.get("lastName"))==null?null:i.dirty)||((i=o.profileForm.get("lastName"))==null?null:i.touched))),O(4),W("ngIf",((s=o.profileForm.get("birthDate"))==null?null:s.invalid)&&(((s=o.profileForm.get("birthDate"))==null?null:s.dirty)||((s=o.profileForm.get("birthDate"))==null?null:s.touched))),O(7),W("ngIf",o.message)}}function eB(t,e){t&1&&(w(0,"div",11),b(1," Old Password is incorrect. "),E())}function tB(t,e){if(t&1&&(w(0,"div",11),b(1),E()),t&2){let n=$e(2);O(),Tt(" ",n.message," ")}}function nB(t,e){t&1&&(w(0,"div",11),b(1," New Password must be at least 6 characters long. "),E())}function rB(t,e){if(t&1&&(w(0,"div",12),b(1),E()),t&2){let n=$e(2);W("ngClass",Ci(2,TD,n.message.includes("successfully"))),O(),ae(n.message)}}function iB(t,e){if(t&1){let n=Ii();w(0,"div",1)(1,"form",2)(2,"label"),b(3,"Old Password:"),E(),re(4,"input",13),_e(5,eB,2,0,"div",4)(6,tB,2,1,"div",4),w(7,"label"),b(8,"New Password:"),E(),re(9,"input",14),_e(10,nB,2,0,"div",4),w(11,"button",8),ge("click",function(){pn(n);let i=$e();return mn(i.onChangePassword())}),b(12,"Update"),E(),w(13,"button",8),ge("click",function(){pn(n);let i=$e();return mn(i.toggleChangePasswordMode())}),b(14,"Cancel"),E()(),_e(15,rB,2,4,"div",10),E()}if(t&2){let n,r,i=$e();O(),W("formGroup",i.passwordForm),O(4),W("ngIf",((n=i.passwordForm.get("oldPassword"))==null?null:n.invalid)&&((n=i.passwordForm.get("oldPassword"))==null?null:n.dirty)),O(),W("ngIf",i.message&&i.message.includes("Old password is incorrect")),O(4),W("ngIf",((r=i.passwordForm.get("newPassword"))==null?null:r.invalid)&&((r=i.passwordForm.get("newPassword"))==null?null:r.dirty)),O(5),W("ngIf",i.message&&!i.message.includes("Old password is incorrect"))}}var Yy=(()=>{let e=class e{constructor(r,i,s,o,a){this.authService=r,this.fb=i,this.auth=s,this.firestore=o,this.router=a,this.message="",this.changePasswordMode=!1,this.profileForm=this.fb.group({email:["",[ce.required,ce.email]],firstName:["",[ce.required,ce.minLength(2)]],lastName:["",[ce.required,ce.minLength(2)]],birthDate:["",[ce.required,this.ageValidator]]}),this.passwordForm=this.fb.group({oldPassword:["",[ce.required]],newPassword:["",[ce.required,ce.minLength(6)]]})}ngOnInit(){this.authService.getUserProfile().subscribe(r=>{this.currentUser=r,this.profileForm.patchValue({email:r.email,firstName:r.firstName,lastName:r.lastName,birthDate:new Date(r.birthDate).toISOString().substring(0,10)})},r=>{console.error("Failed to fetch user profile",r)})}onUpdate(){if(this.profileForm.valid){let{email:r,firstName:i,lastName:s,birthDate:o}=this.profileForm.value;this.authService.updateUserProfile({email:r,firstName:i,lastName:s,birthDate:o}).subscribe(()=>{this.message="Profile updated successfully",setTimeout(()=>{this.message=""},2e3)},a=>{this.message="Failed to update profile"})}else this.markFormFieldsAsTouched(this.profileForm)}onDelete(){this.authService.deleteUserProfile().subscribe(()=>{this.message="Account deleted successfully",setTimeout(()=>{this.router.navigateByUrl("/login")},1e3)},r=>{this.message="Failed to delete account"})}ageValidator(r){let i=new Date(r.value),s=new Date().getFullYear()-i.getFullYear();return s>=6&&s<=130?null:{ageRange:!0}}toggleChangePasswordMode(){this.changePasswordMode=!this.changePasswordMode,this.changePasswordMode||(this.passwordForm.reset(),this.message="")}onChangePassword(){if(this.passwordForm.valid){let{oldPassword:r,newPassword:i}=this.passwordForm.value;this.authService.changePassword(r,i).subscribe(()=>{this.message="Password changed successfully",setTimeout(()=>{this.message="",this.passwordForm.reset(),this.toggleChangePasswordMode()},2e3)},s=>{this.passwordForm.get("oldPassword")?.setErrors({incorrectPassword:!0})})}else this.markFormFieldsAsTouched(this.passwordForm)}markFormFieldsAsTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}};e.\u0275fac=function(i){return new(i||e)(U(ut),U(en),U(It),U(mr),U(Et))},e.\u0275cmp=Be({type:e,selectors:[["app-profile"]],standalone:!0,features:[He],decls:4,vars:2,consts:[["class","form",4,"ngIf"],[1,"form"],[3,"formGroup"],["type","text","formControlName","email"],["class","error",4,"ngIf"],["type","text","formControlName","firstName"],["type","text","formControlName","lastName"],["type","date","formControlName","birthDate"],["type","button",3,"click"],[3,"click"],[3,"ngClass",4,"ngIf"],[1,"error"],[3,"ngClass"],["type","password","formControlName","oldPassword"],["type","password","formControlName","newPassword"]],template:function(i,s){i&1&&(w(0,"h1"),b(1,"Profile"),E(),_e(2,Xj,25,6,"div",0)(3,iB,16,5,"div",0)),i&2&&(O(2),W("ngIf",!s.changePasswordMode&&s.currentUser),O(),W("ngIf",s.changePasswordMode))},dependencies:[tn,qn,At,Zt,Xt,jt,Bt,Ge,zs,kn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}"]});let t=e;return t})();var DD=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"editshift/:id",component:bc},{path:"home",component:dy},{path:"register",component:Iy},{path:"login",component:Cy},{path:"shifts",component:Qy},{path:"addshift",component:bD},{path:"editshift",component:bc},{path:"profile",component:Yy},{path:"editshift/:id",component:bc}];var SD={providers:[rC(),KC(DD),wa(Ib(()=>Cb({projectId:"shiftbuilder-ed2e0",appId:"1:667360274742:web:9e25358a7e2ea342c66b97",storageBucket:"shiftbuilder-ed2e0.appspot.com",apiKey:"AIzaSyCsKEm9m-zftadgt8KnnqH3EYAGl212Py4",authDomain:"shiftbuilder-ed2e0.firebaseapp.com",messagingSenderId:"667360274742"}))),wa(yT(()=>vT())),wa(ED(()=>ID()))]};function sB(t,e){if(t&1){let n=Ii();zp(0),w(1,"li",9),b(2),E(),w(3,"li",10),ge("click",function(){pn(n);let i=$e(2);return mn(i.logout())}),b(4,"Log Out"),E(),Gp()}if(t&2){let n=$e(2);O(2),Tt("Hello ",n.userName,"")}}function oB(t,e){t&1&&(w(0,"li",11),b(1,"Login"),E())}function aB(t,e){if(t&1&&(w(0,"div")(1,"ul",2)(2,"div",3)(3,"li",4),b(4,"Home"),E(),w(5,"li",5),b(6,"My Shifts"),E(),w(7,"li",6),b(8,"Add Shift"),E()(),w(9,"div",7),_e(10,sB,5,1,"ng-container",8)(11,oB,2,0,"ng-template",null,0,A0),E()()()),t&2){let n=D0(12),r=$e();O(10),W("ngIf",r.isLoggedIn)("ngIfElse",n)}}var AD=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.router=i,this.auth=s,this.userName="",this.isNavbarVisible=!0,this.router.events.subscribe(o=>{o instanceof Ri&&(this.isNavbarVisible=!["/login","/register"].includes(o.url))})}ngOnInit(){this.authService.loginEvent.subscribe(()=>{this.updateLoginStatus()}),this.updateLoginStatus()}updateLoginStatus(){this.authService.isAuthenticated().subscribe(r=>{this.isLoggedIn=r,r?this.authService.getUserProfile().subscribe(i=>this.userName=i.firstName,i=>console.error("Failed to fetch user profile",i)):this.userName=""})}logout(){localStorage.removeItem("token"),this.router.navigate(["/login"])}navigateToProfile(){this.router.navigate(["/profile"])}};e.\u0275fac=function(i){return new(i||e)(U(ut),U(Et),U(It))},e.\u0275cmp=Be({type:e,selectors:[["app-navbar"]],standalone:!0,features:[He],decls:1,vars:1,consts:[["notLoggedIn",""],[4,"ngIf"],[1,"navbar"],[1,"left"],["routerLink","/home","routerLinkActive","active"],["routerLink","/shifts","routerLinkActive","active"],["routerLink","/addshift","routerLinkActive","active"],[1,"right"],[4,"ngIf","ngIfElse"],["routerLink","/profile","routerLinkActive","active"],[3,"click"],["routerLink","/login","routerLinkActive","active"]],template:function(i,s){i&1&&_e(0,aB,13,2,"div",1),i&2&&W("ngIf",s.isNavbarVisible)},dependencies:[WC,Ge,kn],styles:[".navbar[_ngcontent-%COMP%]{font-family:Your Chosen Font,sans-serif;font-size:14px;background-color:#395b64;border-radius:10px;color:#e7f6f2;list-style:none;padding:10px;margin:0;display:flex;justify-content:space-between;box-shadow:0 2px 5px #0000001a}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;align-items:center}.left[_ngcontent-%COMP%]{width:60%;justify-content:space-evenly}.right[_ngcontent-%COMP%]{width:40%;justify-content:space-evenly}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;border-radius:5px;transition:background-color .3s ease,transform .2s ease;text-align:center;cursor:pointer}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#a5c9ca;color:#2c3333;transform:scale(1.05)}"]});let t=e;return t})();var ND="@firebase/database",RD="1.0.5";var Qv="";function cB(t){Qv=t}var iv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xe(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ro(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ln(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var lS=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iv(e)}}catch{}return new sv},Ji=lS("localStorage"),ov=lS("sessionStorage");var Do=new Vn("@firebase/database"),lB=function(){let t=1;return function(){return t++}}(),uS=function(t){let e=ab(t),n=new Xu;n.update(e);let r=n.digest();return ed.encodeByteArray(r)},Fc=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Fc.apply(null,r):typeof r=="object"?e+=Xe(r):e+=r,e+=" "}return e},Zi=null,xD=!0,uB=function(t,e){V(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Do.logLevel=ye.VERBOSE,Zi=Do.log.bind(Do),e&&ov.set("logging_enabled",!0)):typeof t=="function"?Zi=t:(Zi=null,ov.remove("logging_enabled"))},dt=function(...t){if(xD===!0&&(xD=!1,Zi===null&&ov.get("logging_enabled")===!0&&uB(!0)),Zi){let e=Fc.apply(null,t);Zi(e)}},Lc=function(t){return function(...e){dt(t,...e)}},av=function(...t){let e="FIREBASE INTERNAL ERROR: "+Fc(...t);Do.error(e)},Xi=function(...t){let e=`FIREBASE FATAL ERROR: ${Fc(...t)}`;throw Do.error(e),new Error(e)},Ht=function(...t){let e="FIREBASE WARNING: "+Fc(...t);Do.warn(e)},dB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ht("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dS=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hB=function(t){if(Fn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ao="[MIN_NAME]",es="[MAX_NAME]",Oo=function(t,e){if(t===e)return 0;if(t===Ao||e===es)return-1;if(e===Ao||t===es)return 1;{let n=MD(t),r=MD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fB=function(t,e){return t===e?0:t<e?-1:1},Tc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Xe(e))},Yv=function(t){if(typeof t!="object"||t===null)return Xe(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Xe(e[r]),n+=":",n+=Yv(t[e[r]]);return n+="}",n},hS=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function sn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var fS=function(t){V(!dS(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let f=u.join(""),p="";for(l=0;l<64;l+=8){let g=parseInt(f.substr(l,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},pB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var gB=new RegExp("^-?(0*)\\d{1,10}$"),yB=-2147483648,vB=2147483647,MD=function(t){if(gB.test(t)){let e=Number(t);if(e>=yB&&e<=vB)return e}return null},Vc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Ht("Exception was thrown by user callback.",n),e},Math.floor(0))}},_B=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var cv=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ht(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var lv=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ht(e)}},PD=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Jd="5",pS="v",mS="s",gS="r",yS="f",vS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_S="ls",wS="p",uv="ac",ES="websocket",IS="long_polling";var dv=class{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ji.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ji.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function wB(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function CS(t,e,n){V(typeof e=="string","typeof type must == string"),V(typeof n=="object","typeof params must == object");let r;if(e===ES)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===IS)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wB(t)&&(n.ns=t.namespace);let i=[];return sn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var hv=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ln(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return JC(this.counters_)}};var Jy={},Zy={};function Jv(t){let e=t.toString();return Jy[e]||(Jy[e]=new hv),Jy[e]}function EB(t,e){let n=t.toString();return Zy[n]||(Zy[n]=e()),Zy[n]}var fv=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Vc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var kD="start",IB="close",CB="pLPCommand",bB="pRTLPCB",bS="id",TS="pw",DS="ser",TB="cb",DB="seg",SB="ts",AB="d",NB="dframe",SS=1870,AS=30,RB=SS-AS,xB=25e3,MB=3e4,pv=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lc(e),this.stats_=Jv(n),this.urlFn=l=>(this.appCheckToken&&(l[uv]=this.appCheckToken),CS(n,IS,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(MB)),hB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mv((...s)=>{let[o,a,l,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===kD)this.id=a,this.password=l;else if(o===IB)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[kD]="t",r[DS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TB]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pS]=Jd,this.transportSessionId&&(r[mS]=this.transportSessionId),this.lastSessionId&&(r[_S]=this.lastSessionId),this.applicationId&&(r[wS]=this.applicationId),this.appCheckToken&&(r[uv]=this.appCheckToken),typeof location<"u"&&location.hostname&&vS.test(location.hostname)&&(r[gS]=yS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Fn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pB()&&!mB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Xe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=rg(n),i=hS(r,RB);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Fn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[NB]="t",r[bS]=e,r[TS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Xe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},mv=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Fn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=lB(),window[CB+this.uniqueCallbackIdentifier]=e,window[bB+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dt("frame writing exception"),a.stack&&dt(a.stack),dt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[bS]=this.myID,e[TS]=this.myPW,e[DS]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AS+r.length<=SS;){let o=this.pendingSegs.shift();r=r+"&"+DB+i+"="+o.seg+"&"+SB+i+"="+o.ts+"&"+AB+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(xB)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Fn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{dt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var PB=16384,kB=45e3,Zd=null;typeof MozWebSocket<"u"?Zd=MozWebSocket:typeof WebSocket<"u"&&(Zd=WebSocket);var Dc=(()=>{class t{constructor(n,r,i,s,o,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lc(this.connId),this.stats_=Jv(r),this.connURL=t.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[pS]=Jd,!Fn()&&typeof location<"u"&&location.hostname&&vS.test(location.hostname)&&(a[gS]=yS),r&&(a[mS]=r),i&&(a[_S]=i),s&&(a[uv]=s),o&&(a[wS]=o),CS(n,ES,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ji.set("previous_websocket_failure",!0);try{let i;if(Fn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Jd}/${Qv}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Zd!==null&&!t.forceDisallow_}static previouslyFailed(){return Ji.isInMemoryStorage||Ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ji.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ro(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(V(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Xe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=hS(r,PB);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kB))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),OB=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[pv,Dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Dc&&Dc.isAvailable(),i=r&&!Dc.previouslyFailed();if(n.webSocketOnly&&(r||Ht("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dc];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),FB=6e4,LB=5e3,VB=10*1024,UB=100*1024,Xy="t",OD="d",jB="s",FD="r",BB="e",LD="o",VD="a",UD="n",jD="p",$B="h",gv=class{constructor(e,n,r,i,s,o,a,l,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lc("c:"+this.id+":"),this.transportManager_=new OB(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Rc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UB?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VB?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xy in e){let n=e[Xy];n===VD?this.upgradeIfSecondaryHealthy_():n===FD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===LD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Tc("t",e),r=Tc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:VD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:UD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Tc("t",e),r=Tc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Tc(Xy,e);if(OD in e){let r=e[OD];if(n===$B){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===UD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jB?this.onConnectionShutdown_(r):n===FD?this.onReset_(r):n===BB?av("Server Error: "+r):n===LD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):av("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jd!==r&&Ht("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Rc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FB))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(LB))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jD,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Xd=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var eh=class{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){V(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var th=class t extends eh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xa()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var BD=32,$D=768,De=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ce(){return new De("")}function pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ei(t){return t.pieces_.length-t.pieceNum_}function Ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new De(t.pieces_,e)}function NS(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function HB(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function RS(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xS(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new De(e,0)}function tt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof De)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new De(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function nn(t,e){let n=pe(t),r=pe(e);if(n===null)return e;if(n===r)return nn(Ne(t),Ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function MS(t,e){if(ei(t)!==ei(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function En(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ei(t)>ei(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var yv=class{constructor(e,n){this.errorPrefix_=n,this.parts_=RS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=nc(this.parts_[r]);PS(this)}};function qB(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=nc(e),PS(t)}function zB(t){let e=t.parts_.pop();t.byteLength_-=nc(e),t.parts_.length>0&&(t.byteLength_-=1)}function PS(t){if(t.byteLength_>$D)throw new Error(t.errorPrefix_+"has a key path longer than "+$D+" bytes ("+t.byteLength_+").");if(t.parts_.length>BD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+BD+") or object contains a cycle "+Yi(t))}function Yi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var vv=class t extends eh{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}};var Sc=1e3,GB=60*5*1e3,HD=30*1e3,WB=1.3,KB=3e4,QB="server_kill",qD=3,Zv=(()=>{class t extends Xd{constructor(n,r,i,s,o,a,l,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Lc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sc,this.maxReconnectDelay_=GB,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Fn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&th.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Xe(o)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Mi,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),V(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let u=l.d,f=l.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(f,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ln(n,"w")){let i=ki(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ht(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||ib(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=HD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=rb(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),V(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Xe(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):av("Unrecognized action received from server: "+Xe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Sc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KB&&(this.reconnectDelay_=Sc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*WB)}this.onConnectStatus_(!1)}establishConnection_(){return R(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,u=function(){l?l.close():(a=!0,i())},f=function(g){V(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(g)};this.realtime_={close:u,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,S]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?dt("getToken() completed but was canceled"):(dt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=S&&S.token,l=new gv(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,N=>{Ht(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(QB)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Ht(g),u())}}})}interrupt(n){dt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){dt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ec(this.interruptReasons_)&&(this.reconnectDelay_=Sc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Yv(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new De(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){dt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qD&&(this.reconnectDelay_=HD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){dt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Fn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Qv.replace(/\./g,"-")]=1,Xa()?n["framework.cordova"]=1:td()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=th.getInstance().currentlyOnline();return ec(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),me=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var No=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new me(Ao,e),i=new me(Ao,n);return this.compare(r,i)!==0}minPost(){return me.MIN}};var Yd,nh=class extends No{static get __EMPTY_NODE(){return Yd}static set __EMPTY_NODE(e){Yd=e}compare(e,n){return Oo(e.name,n.name)}isDefinedOn(e){throw Pi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return me.MIN}maxPost(){return new me(es,Yd)}makePost(e,n){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new me(e,Yd)}toString(){return".key"}},So=new nh;var bo=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},wn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??rn.EMPTY_NODE,this.right=o??rn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return rn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return rn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),_v=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new wn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},rn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,wn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bo(this.root_,null,this.comparator_,!0,e)}};rn.EMPTY_NODE=new _v;function YB(t,e){return Oo(t.name,e.name)}function Xv(t,e){return Oo(t,e)}var wv;function JB(t){wv=t}var kS=function(t){return typeof t=="number"?"number:"+fS(t):"string:"+t},OS=function(t){if(t.isLeafNode()){let e=t.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ln(e,".sv"),"Priority must be a string or number.")}else V(t===wv||t.isEmpty(),"priority of unexpected type.");V(t===wv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var zD,Ro=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OS(this.priorityNode_)}static set __childrenNodeConstructor(n){zD=n}static get __childrenNodeConstructor(){return zD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ue(n)?this:pe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=pe(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(V(i!==".priority"||ei(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+kS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=fS(this.value_):n+=this.value_,this.lazyHash_=uS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(V(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return V(s>=0,"Unknown leaf type: "+r),V(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),FS,LS;function ZB(t){FS=t}function XB(t){LS=t}var Ev=class extends No{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Oo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return me.MIN}maxPost(){return new me(es,new Ro("[PRIORITY-POST]",LS))}makePost(e,n){let r=FS(e);return new me(n,new Ro("[PRIORITY-POST]",r))}toString(){return".priority"}},ft=new Ev;var e$=Math.log(2),Iv=class{constructor(e){let n=s=>parseInt(Math.log(s)/e$,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},rh=function(t,e,n,r){t.sort(e);let i=function(l,u){let f=u-l,p,g;if(f===0)return null;if(f===1)return p=t[l],g=n?n(p):p,new wn(g,p.node,wn.BLACK,null,null);{let S=parseInt(f/2,10)+l,N=i(l,S),P=i(S+1,u);return p=t[S],g=n?n(p):p,new wn(g,p.node,wn.BLACK,N,P)}},s=function(l){let u=null,f=null,p=t.length,g=function(N,P){let M=p-N,j=p;p-=N;let ee=i(M+1,j),G=t[M],Z=n?n(G):G;S(new wn(Z,G.node,P,null,ee))},S=function(N){u?(u.left=N,u=N):(f=N,u=N)};for(let N=0;N<l.count;++N){let P=l.nextBitIsOne(),M=Math.pow(2,l.count-(N+1));P?g(M,wn.BLACK):(g(M,wn.BLACK),g(M,wn.RED))}return f},o=new Iv(t.length),a=s(o);return new rn(r||e,a)};var ev,Co={},xo=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return V(Co&&ft,"ChildrenNode.ts has not been loaded"),ev=ev||new t({".priority":Co},{".priority":ft}),ev}get(e){let n=ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof rn?n:null}hasIndex(e){return Ln(this.indexSet_,e.toString())}addIndex(e,n){V(e!==So,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(me.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=rh(r,e.getCompare()):a=Co;let l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;let f=Object.assign({},this.indexes_);return f[l]=a,new t(f,u)}addToIndexes(e,n){let r=tc(this.indexes_,(i,s)=>{let o=ki(this.indexSet_,s);if(V(o,"Missing index implementation for "+s),i===Co)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(me.Wrap),u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),rh(a,o.getCompare())}else return Co;else{let a=n.get(e.name),l=i;return a&&(l=l.remove(new me(e.name,a))),l.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=tc(this.indexes_,i=>{if(i===Co)return i;{let s=n.get(e.name);return s?i.remove(new me(e.name,s)):i}});return new t(r,this.indexSet_)}};var Ac,ke=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OS(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ac||(Ac=new t(new rn(Xv),null,xo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ac}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ac:r}}getChild(n){let r=pe(n);return r===null?this:this.getImmediateChild(r).getChild(Ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(V(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new me(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ac:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=pe(n);if(i===null)return r;{V(pe(n)!==".priority"||ei(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ne(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ft,(a,l)=>{r[a]=l.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+kS(this.getPriority().val())+":"),this.forEachChild(ft,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":uS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new me(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new me(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new me(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Uc?-1:0}withIndex(n){if(n===So||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===So||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ft),s=r.getIterator(ft),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===So?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Cv=class extends ke{constructor(){super(new rn(Xv),ke.EMPTY_NODE,xo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ke.EMPTY_NODE}isEmpty(){return!1}},Uc=new Cv;Object.defineProperties(me,{MIN:{value:new me(Ao,ke.EMPTY_NODE)},MAX:{value:new me(es,Uc)}});nh.__EMPTY_NODE=ke.EMPTY_NODE;Ro.__childrenNodeConstructor=ke;JB(Uc);XB(Uc);var t$=!0;function ht(t,e=null){if(t===null)return ke.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ro(n,ht(e))}if(!(t instanceof Array)&&t$){let n=[],r=!1;if(sn(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=ht(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new me(o,l)))}}),n.length===0)return ke.EMPTY_NODE;let s=rh(n,YB,o=>o.name,Xv);if(r){let o=rh(n,ft.getCompare());return new ke(s,ht(e),new xo({".priority":o},{".priority":ft}))}else return new ke(s,ht(e),xo.Default)}else{let n=ke.EMPTY_NODE;return sn(t,(r,i)=>{if(Ln(t,r)&&r.substring(0,1)!=="."){let s=ht(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ht(e))}}ZB(ht);var bv=class extends No{constructor(e){super(),this.indexPath_=e,V(!ue(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Oo(e.name,n.name):s}makePost(e,n){let r=ht(e),i=ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new me(n,i)}maxPost(){let e=ke.EMPTY_NODE.updateChild(this.indexPath_,Uc);return new me(es,e)}toString(){return RS(this.indexPath_,0).join("/")}};var Tv=class extends No{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Oo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(e,n){let r=ht(e);return new me(n,r)}toString(){return".value"}},n$=new Tv;function r$(t){return{type:"value",snapshotNode:t}}function i$(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function s$(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function GD(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function o$(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Dv=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ao}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:es}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ft}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function WD(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ft?n="$priority":t.index_===n$?n="$value":t.index_===So?n="$key":(V(t.index_ instanceof bv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Xe(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Xe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Xe(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Xe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Xe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function KD(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ft&&(e.i=t.index_.toString()),e}var Sv=class t extends Xd{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let l=WD(e._queryParams);this.restRequest_(s+".json",l,(u,f)=>{let p=f;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),ki(this.listens_,o)===a){let g;u?u===401?g="permission_denied":g="rest_error:"+u:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=WD(e._queryParams),r=e._path.toString(),i=new Mi;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fi(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ro(a.responseText)}catch{Ht("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Ht("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Av=class{constructor(){this.rootNode_=ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ih(){return{value:null,children:new Map}}function VS(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=pe(e);t.children.has(r)||t.children.set(r,ih());let i=t.children.get(r);e=Ne(e),VS(i,e,n)}}function Nv(t,e,n){t.value!==null?n(e,t.value):a$(t,(r,i)=>{let s=new De(e.toString()+"/"+r);Nv(i,s,n)})}function a$(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Rv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&sn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var QD=10*1e3,c$=30*1e3,l$=5*60*1e3,xv=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Rv(e);let r=QD+(c$-QD)*Math.random();Rc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;sn(e,(i,s)=>{s>0&&Ln(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Rc(this.reportStats_.bind(this),Math.floor(Math.random()*2*l$))}};var gr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(gr||{});function US(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function jS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function BS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Mv=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gr.ACK_USER_WRITE,this.source=US()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new De(e));return new t(Ce(),n,this.revert)}}else return V(pe(this.path)===e,"operationForChild called for unrelated child."),new t(Ne(this.path),this.affectedTree,this.revert)}};var Mo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gr.OVERWRITE}operationForChild(e){return ue(this.path)?new t(this.source,Ce(),this.snap.getImmediateChild(e)):new t(this.source,Ne(this.path),this.snap)}};var sh=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gr.MERGE}operationForChild(e){if(ue(this.path)){let n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new Mo(this.source,Ce(),n.value):new t(this.source,Ce(),n)}else return V(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Pc=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;let n=pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function u$(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(o$(o.childName,o.snapshotNode))}),Nc(t,i,"child_removed",e,r,n),Nc(t,i,"child_added",e,r,n),Nc(t,i,"child_moved",s,r,n),Nc(t,i,"child_changed",e,r,n),Nc(t,i,"value",e,r,n),i}function Nc(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,l)=>h$(t,a,l)),o.forEach(a=>{let l=d$(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function d$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function h$(t,e,n){if(e.childName==null||n.childName==null)throw Pi("Should only compare child_ events.");let r=new me(e.childName,e.snapshotNode),i=new me(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function $S(t,e){return{eventCache:t,serverCache:e}}function xc(t,e,n,r){return $S(new Pc(e,n,r),t.serverCache)}function HS(t,e,n,r){return $S(t.eventCache,new Pc(e,n,r))}function Pv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ts(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var tv,f$=()=>(tv||(tv=new rn(fB)),tv),Rt=class t{constructor(e,n=f$()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return sn(e,(r,i)=>{n=n.set(new De(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ce(),value:this.value};if(ue(e))return null;{let r=pe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ne(e),n);return s!=null?{path:tt(new De(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{let n=pe(e),r=this.children.get(n);return r!==null?r.subtree(Ne(e)):new t(null)}}set(e,n){if(ue(e))return new t(n,this.children);{let r=pe(e),s=(this.children.get(r)||new t(null)).set(Ne(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=pe(e),r=this.children.get(n);if(r){let i=r.remove(Ne(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ue(e))return this.value;{let n=pe(e),r=this.children.get(n);return r?r.get(Ne(e)):null}}setTree(e,n){if(ue(e))return n;{let r=pe(e),s=(this.children.get(r)||new t(null)).setTree(Ne(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ce(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ce(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ue(e))return null;{let s=pe(e),o=this.children.get(s);return o?o.findOnPath_(Ne(e),tt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ce(),n)}foreachOnPath_(e,n,r){if(ue(e))return this;{this.value&&r(n,this.value);let i=pe(e),s=this.children.get(i);return s?s.foreachOnPath_(Ne(e),tt(n,i),r):new t(null)}}foreach(e){this.foreach_(Ce(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var In=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Rt(null))}};function Mc(t,e,n){if(ue(e))return new In(new Rt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=nn(i,e);return s=s.updateChild(o,n),new In(t.writeTree_.set(i,s))}else{let i=new Rt(n),s=t.writeTree_.setTree(e,i);return new In(s)}}}function YD(t,e,n){let r=t;return sn(n,(i,s)=>{r=Mc(r,tt(e,i),s)}),r}function JD(t,e){if(ue(e))return In.empty();{let n=t.writeTree_.setTree(e,new Rt(null));return new In(n)}}function kv(t,e){return ns(t,e)!=null}function ns(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nn(n.path,e)):null}function ZD(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ft,(r,i)=>{e.push(new me(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new me(r,i.value))}),e}function Xr(t,e){if(ue(e))return t;{let n=ns(t,e);return n!=null?new In(new Rt(n)):new In(t.writeTree_.subtree(e))}}function Ov(t){return t.writeTree_.isEmpty()}function Po(t,e){return qS(Ce(),t.writeTree_,e)}function qS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(V(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=qS(tt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tt(t,".priority"),r)),n}}function zS(t,e){return YS(e,t)}function p$(t,e,n,r,i){V(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Mc(t.visibleWrites,e,n)),t.lastWriteId=r}function m$(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function g$(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);V(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&y$(a,r.path)?i=!1:En(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return v$(t),!0;if(r.snap)t.visibleWrites=JD(t.visibleWrites,r.path);else{let a=r.children;sn(a,l=>{t.visibleWrites=JD(t.visibleWrites,tt(r.path,l))})}return!0}else return!1}function y$(t,e){if(t.snap)return En(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&En(tt(t.path,n),e))return!0;return!1}function v$(t){t.visibleWrites=GS(t.allWrites,_$,Ce()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _$(t){return t.visible}function GS(t,e,n){let r=In.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)En(n,o)?(a=nn(n,o),r=Mc(r,a,s.snap)):En(o,n)&&(a=nn(o,n),r=Mc(r,Ce(),s.snap.getChild(a)));else if(s.children){if(En(n,o))a=nn(n,o),r=YD(r,a,s.children);else if(En(o,n))if(a=nn(o,n),ue(a))r=YD(r,Ce(),s.children);else{let l=ki(s.children,pe(a));if(l){let u=l.getChild(Ne(a));r=Mc(r,Ce(),u)}}}else throw Pi("WriteRecord should have .snap or .children")}}return r}function WS(t,e,n,r,i){if(!r&&!i){let s=ns(t.visibleWrites,e);if(s!=null)return s;{let o=Xr(t.visibleWrites,e);if(Ov(o))return n;if(n==null&&!kv(o,Ce()))return null;{let a=n||ke.EMPTY_NODE;return Po(o,a)}}}else{let s=Xr(t.visibleWrites,e);if(!i&&Ov(s))return n;if(!i&&n==null&&!kv(s,Ce()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(En(u.path,e)||En(e,u.path))},a=GS(t.allWrites,o,e),l=n||ke.EMPTY_NODE;return Po(a,l)}}}function w$(t,e,n){let r=ke.EMPTY_NODE,i=ns(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ft,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Xr(t.visibleWrites,e);return n.forEachChild(ft,(o,a)=>{let l=Po(Xr(s,new De(o)),a);r=r.updateImmediateChild(o,l)}),ZD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Xr(t.visibleWrites,e);return ZD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function E$(t,e,n,r,i){V(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=tt(e,n);if(kv(t.visibleWrites,s))return null;{let o=Xr(t.visibleWrites,s);return Ov(o)?i.getChild(n):Po(o,i.getChild(n))}}function I$(t,e,n,r){let i=tt(e,n),s=ns(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Xr(t.visibleWrites,i);return Po(o,r.getNode().getImmediateChild(n))}else return null}function C$(t,e){return ns(t.visibleWrites,e)}function b$(t,e,n,r,i,s,o){let a,l=Xr(t.visibleWrites,e),u=ns(l,Ce());if(u!=null)a=u;else if(n!=null)a=Po(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],p=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),S=g.getNext();for(;S&&f.length<i;)p(S,r)!==0&&f.push(S),S=g.getNext();return f}else return[]}function T$(){return{visibleWrites:In.empty(),allWrites:[],lastWriteId:-1}}function Fv(t,e,n,r){return WS(t.writeTree,t.treePath,e,n,r)}function KS(t,e){return w$(t.writeTree,t.treePath,e)}function XD(t,e,n,r){return E$(t.writeTree,t.treePath,e,n,r)}function oh(t,e){return C$(t.writeTree,tt(t.treePath,e))}function D$(t,e,n,r,i,s){return b$(t.writeTree,t.treePath,e,n,r,i,s)}function e_(t,e,n){return I$(t.writeTree,t.treePath,e,n)}function QS(t,e){return YS(tt(t.treePath,e),t.writeTree)}function YS(t,e){return{treePath:t,writeTree:e}}var Lv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;V(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),V(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,GD(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,s$(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,i$(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,GD(r,e.snapshotNode,i.oldSnap));else throw Pi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Vv=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},JS=new Vv,kc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Pc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e_(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ts(this.viewCache_),s=D$(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function S$(t,e){V(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function A$(t,e,n,r,i){let s=new Lv,o,a;if(n.type===gr.OVERWRITE){let u=n;u.source.fromUser?o=Uv(t,e,u.path,u.snap,r,i,s):(V(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ue(u.path),o=ah(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===gr.MERGE){let u=n;u.source.fromUser?o=R$(t,e,u.path,u.children,r,i,s):(V(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=jv(t,e,u.path,u.children,r,i,a,s))}else if(n.type===gr.ACK_USER_WRITE){let u=n;u.revert?o=P$(t,e,u.path,r,i,s):o=x$(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===gr.LISTEN_COMPLETE)o=M$(t,e,n.path,r,s);else throw Pi("Unknown operation type: "+n.type);let l=s.getChanges();return N$(e,o,l),{viewCache:o,changes:l}}function N$(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Pv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(r$(Pv(e)))}}function ZS(t,e,n,r,i,s){let o=e.eventCache;if(oh(r,n)!=null)return e;{let a,l;if(ue(n))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=ts(e),f=u instanceof ke?u:ke.EMPTY_NODE,p=KS(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let u=Fv(r,ts(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=pe(n);if(u===".priority"){V(ei(n)===1,"Can't have a priority with additional path components");let f=o.getNode();l=e.serverCache.getNode();let p=XD(r,n,f,l);p!=null?a=t.filter.updatePriority(f,p):a=o.getNode()}else{let f=Ne(n),p;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();let g=XD(r,n,o.getNode(),l);g!=null?p=o.getNode().getImmediateChild(u).updateChild(f,g):p=o.getNode().getImmediateChild(u)}else p=e_(r,u,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),u,p,f,i,s):a=o.getNode()}}return xc(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function ah(t,e,n,r,i,s,o,a){let l=e.serverCache,u,f=o?t.filter:t.filter.getIndexedFilter();if(ue(n))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){let S=l.getNode().updateChild(n,r);u=f.updateFullNode(l.getNode(),S,null)}else{let S=pe(n);if(!l.isCompleteForPath(n)&&ei(n)>1)return e;let N=Ne(n),M=l.getNode().getImmediateChild(S).updateChild(N,r);S===".priority"?u=f.updatePriority(l.getNode(),M):u=f.updateChild(l.getNode(),S,M,N,JS,null)}let p=HS(e,u,l.isFullyInitialized()||ue(n),f.filtersNodes()),g=new kc(i,p,s);return ZS(t,p,n,i,g,a)}function Uv(t,e,n,r,i,s,o){let a=e.eventCache,l,u,f=new kc(i,e,s);if(ue(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=xc(e,u,!0,t.filter.filtersNodes());else{let p=pe(n);if(p===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=xc(e,u,a.isFullyInitialized(),a.isFiltered());else{let g=Ne(n),S=a.getNode().getImmediateChild(p),N;if(ue(g))N=r;else{let P=f.getCompleteChild(p);P!=null?NS(g)===".priority"&&P.getChild(xS(g)).isEmpty()?N=P:N=P.updateChild(g,r):N=ke.EMPTY_NODE}if(S.equals(N))l=e;else{let P=t.filter.updateChild(a.getNode(),p,N,g,f,o);l=xc(e,P,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function eS(t,e){return t.eventCache.isCompleteForChild(e)}function R$(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{let f=tt(n,l);eS(e,pe(f))&&(a=Uv(t,a,f,u,i,s,o))}),r.foreach((l,u)=>{let f=tt(n,l);eS(e,pe(f))||(a=Uv(t,a,f,u,i,s,o))}),a}function tS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ue(n)?u=r:u=new Rt(null).setTree(n,r);let f=e.serverCache.getNode();return u.children.inorderTraversal((p,g)=>{if(f.hasChild(p)){let S=e.serverCache.getNode().getImmediateChild(p),N=tS(t,S,g);l=ah(t,l,new De(p),N,i,s,o,a)}}),u.children.inorderTraversal((p,g)=>{let S=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!f.hasChild(p)&&!S){let N=e.serverCache.getNode().getImmediateChild(p),P=tS(t,N,g);l=ah(t,l,new De(p),P,i,s,o,a)}}),l}function x$(t,e,n,r,i,s,o){if(oh(i,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ue(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ah(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ue(n)){let u=new Rt(null);return l.getNode().forEachChild(So,(f,p)=>{u=u.set(new De(f),p)}),jv(t,e,n,u,i,s,a,o)}else return e}else{let u=new Rt(null);return r.foreach((f,p)=>{let g=tt(n,f);l.isCompleteForPath(g)&&(u=u.set(f,l.getNode().getChild(g)))}),jv(t,e,n,u,i,s,a,o)}}function M$(t,e,n,r,i){let s=e.serverCache,o=HS(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered());return ZS(t,o,n,r,JS,i)}function P$(t,e,n,r,i,s){let o;if(oh(r,n)!=null)return e;{let a=new kc(r,e,i),l=e.eventCache.getNode(),u;if(ue(n)||pe(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Fv(r,ts(e));else{let p=e.serverCache.getNode();V(p instanceof ke,"serverChildren would be complete if leaf node"),f=KS(r,p)}f=f,u=t.filter.updateFullNode(l,f,s)}else{let f=pe(n),p=e_(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=l.getImmediateChild(f)),p!=null?u=t.filter.updateChild(l,f,p,Ne(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(l,f,ke.EMPTY_NODE,Ne(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fv(r,ts(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||oh(r,Ce())!=null,xc(e,u,o,t.filter.filtersNodes())}}function k$(t,e){let n=ts(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(pe(e)).isEmpty())?n.getChild(e):null}function nS(t,e,n,r){e.type===gr.MERGE&&e.source.queryId!==null&&(V(ts(t.viewCache_),"We should always have a full cache before handling merges"),V(Pv(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=A$(t.processor_,i,e,n,r);return S$(t.processor_,s.viewCache),V(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,O$(t,s.changes,s.viewCache.eventCache.getNode(),null)}function O$(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return u$(t.eventGenerator_,e,n,i)}var rS;function F$(t){V(!rS,"__referenceConstructor has already been defined"),rS=t}function t_(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return V(s!=null,"SyncTree gave us an op for an invalid query."),nS(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(nS(o,e,n,r));return s}}function n_(t,e){let n=null;for(let r of t.views.values())n=n||k$(r,e);return n}var iS;function L$(t){V(!iS,"__referenceConstructor has already been defined"),iS=t}var ch=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Rt(null),this.pendingWriteTree_=T$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function V$(t,e,n,r,i){return p$(t.pendingWriteTree_,e,n,r,i),i?uh(t,new Mo(US(),e,n)):[]}function To(t,e,n=!1){let r=m$(t.pendingWriteTree_,e);if(g$(t.pendingWriteTree_,e)){let s=new Rt(null);return r.snap!=null?s=s.set(Ce(),!0):sn(r.children,o=>{s=s.set(new De(o),!0)}),uh(t,new Mv(r.path,s,n))}else return[]}function lh(t,e,n){return uh(t,new Mo(jS(),e,n))}function U$(t,e,n){let r=Rt.fromObject(n);return uh(t,new sh(jS(),e,r))}function j$(t,e,n,r){let i=nA(t,r);if(i!=null){let s=rA(i),o=s.path,a=s.queryId,l=nn(o,e),u=new Mo(BS(a),l,n);return iA(t,o,u)}else return[]}function B$(t,e,n,r){let i=nA(t,r);if(i){let s=rA(i),o=s.path,a=s.queryId,l=nn(o,e),u=Rt.fromObject(n),f=new sh(BS(a),l,u);return iA(t,o,f)}else return[]}function XS(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=nn(o,e),u=n_(a,l);if(u)return u});return WS(i,e,s,n,!0)}function uh(t,e){return eA(e,t.syncPointTree_,null,zS(t.pendingWriteTree_,Ce()))}function eA(t,e,n,r){if(ue(t.path))return tA(t,e,n,r);{let i=e.get(Ce());n==null&&i!=null&&(n=n_(i,Ce()));let s=[],o=pe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let u=n?n.getImmediateChild(o):null,f=QS(r,o);s=s.concat(eA(a,l,u,f))}return i&&(s=s.concat(t_(i,t,r,n))),s}}function tA(t,e,n,r){let i=e.get(Ce());n==null&&i!=null&&(n=n_(i,Ce()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,u=QS(r,o),f=t.operationForChild(o);f&&(s=s.concat(tA(f,a,l,u)))}),i&&(s=s.concat(t_(i,t,r,n))),s}function nA(t,e){return t.tagToQueryMap.get(e)}function rA(t){let e=t.indexOf("$");return V(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new De(t.substr(0,e))}}function iA(t,e,n){let r=t.syncPointTree_.get(e);V(r,"Missing sync point for query tag that we're tracking");let i=zS(t.pendingWriteTree_,e);return t_(r,n,i,null)}var Bv=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},$v=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=tt(this.path_,e);return new t(this.syncTree_,n)}node(){return XS(this.syncTree_,this.path_)}},$$=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sS=function(t,e,n){if(!t||typeof t!="object")return t;if(V(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return H$(t[".sv"],e,n);if(typeof t[".sv"]=="object")return q$(t[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},H$=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:V(!1,"Unexpected server value: "+t)}},q$=function(t,e,n){t.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&V(!1,"Unexpected increment value: "+r);let i=e.node();if(V(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},z$=function(t,e,n,r){return r_(e,new $v(n,t),r)},G$=function(t,e,n){return r_(t,new Bv(e),n)};function r_(t,e,n){let r=t.getPriority().val(),i=sS(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=sS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ro(a,ht(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ro(i))),o.forEachChild(ft,(a,l)=>{let u=r_(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}var Oc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function i_(t,e){let n=e instanceof De?e:new De(e),r=t,i=pe(n);for(;i!==null;){let s=ki(r.node.children,i)||{children:{},childCount:0};r=new Oc(i,r,s),n=Ne(n),i=pe(n)}return r}function Fo(t){return t.node.value}function sA(t,e){t.node.value=e,Hv(t)}function oA(t){return t.node.childCount>0}function W$(t){return Fo(t)===void 0&&!oA(t)}function dh(t,e){sn(t.node.children,(n,r)=>{e(new Oc(n,t,r))})}function aA(t,e,n,r){n&&!r&&e(t),dh(t,i=>{aA(i,e,!0,r)}),n&&r&&e(t)}function K$(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jc(t){return new De(t.parent===null?t.name:jc(t.parent)+"/"+t.name)}function Hv(t){t.parent!==null&&Q$(t.parent,t.name,t)}function Q$(t,e,n){let r=W$(n),i=Ln(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Hv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Hv(t))}var Y$=/[\[\].#$\/\u0000-\u001F\u007F]/,J$=/[\[\].#$\u0000-\u001F\u007F]/,nv=10*1024*1024,cA=function(t){return typeof t=="string"&&t.length!==0&&!Y$.test(t)},Z$=function(t){return typeof t=="string"&&t.length!==0&&!J$.test(t)},X$=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Z$(t)};var lA=function(t,e,n){let r=n instanceof De?new yv(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Yi(r)+" with contents = "+e.toString());if(dS(e))throw new Error(t+"contains "+e.toString()+" "+Yi(r));if(typeof e=="string"&&e.length>nv/3&&nc(e)>nv)throw new Error(t+"contains a string greater than "+nv+" utf8 bytes "+Yi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(sn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!cA(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qB(r,o),lA(t,a,r),zB(r)}),i&&s)throw new Error(t+' contains ".value" child '+Yi(r)+" in addition to actual children.")}};var eH=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!X$(n))throw new Error(ob(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var qv=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function tH(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!MS(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function rs(t,e,n){tH(t,n),nH(t,r=>En(r,e)||En(e,r))}function nH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(rH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rH(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Zi&&dt("event: "+n.toString()),Vc(r)}}}var iH="repo_interrupt",sH=25,zv=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ih(),this.transactionQueueTree_=new Oc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function oH(t,e,n){if(t.stats_=Jv(t.repoInfo_),t.forceRestClient_||_B())t.server_=new Sv(t.repoInfo_,(r,i,s,o)=>{oS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>aS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zv(t.repoInfo_,e,(r,i,s,o)=>{oS(t,r,i,s,o)},r=>{aS(t,r)},r=>{cH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=EB(t.repoInfo_,()=>new xv(t.stats_,t.server_)),t.infoData_=new Av,t.infoSyncTree_=new ch({startListening:(r,i,s,o)=>{let a=[],l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=lh(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),s_(t,"connected",!1),t.serverSyncTree_=new ch({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{let u=o(a,l);rs(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function aH(t){let n=t.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uA(t){return $$({timestamp:aH(t)})}function oS(t,e,n,r,i){t.dataUpdateCount++;let s=new De(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let l=tc(n,u=>ht(u));o=B$(t.serverSyncTree_,s,l,i)}else{let l=ht(n);o=j$(t.serverSyncTree_,s,l,i)}else if(r){let l=tc(n,u=>ht(u));o=U$(t.serverSyncTree_,s,l)}else{let l=ht(n);o=lh(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=a_(t,s)),rs(t.eventQueue_,a,o)}function aS(t,e){s_(t,"connected",e),e===!1&&uH(t)}function cH(t,e){sn(e,(n,r)=>{s_(t,n,r)})}function s_(t,e,n){let r=new De("/.info/"+e),i=ht(n);t.infoData_.updateSnapshot(r,i);let s=lh(t.infoSyncTree_,r,i);rs(t.eventQueue_,r,s)}function lH(t){return t.nextWriteId_++}function uH(t){dA(t,"onDisconnectEvents");let e=uA(t),n=ih();Nv(t.onDisconnect_,Ce(),(i,s)=>{let o=z$(i,s,t.serverSyncTree_,e);VS(n,i,o)});let r=[];Nv(n,Ce(),(i,s)=>{r=r.concat(lh(t.serverSyncTree_,i,s));let o=pH(t,i);a_(t,o)}),t.onDisconnect_=ih(),rs(t.eventQueue_,Ce(),r)}function dH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iH)}function dA(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),dt(n,...e)}function hA(t,e,n){return XS(t.serverSyncTree_,e,n)||ke.EMPTY_NODE}function o_(t,e=t.transactionQueueTree_){if(e||hh(t,e),Fo(e)){let n=pA(t,e);V(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&hH(t,jc(e),n)}else oA(e)&&dh(e,n=>{o_(t,n)})}function hH(t,e,n){let r=n.map(u=>u.currentWriteId),i=hA(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let f=n[u];V(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=nn(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{dA(t,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){let p=[];for(let g=0;g<n.length;g++)n[g].status=2,f=f.concat(To(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&p.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();hh(t,i_(t.transactionQueueTree_,e)),o_(t,t.transactionQueueTree_),rs(t.eventQueue_,e,f);for(let g=0;g<p.length;g++)Vc(p[g])}else{if(u==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Ht("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=u}a_(t,e)}},o)}function a_(t,e){let n=fA(t,e),r=jc(n),i=pA(t,n);return fH(t,i,r),r}function fH(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],u=nn(n,l.path),f=!1,p;if(V(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,p=l.abortReason,i=i.concat(To(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=sH)f=!0,p="maxretry",i=i.concat(To(t.serverSyncTree_,l.currentWriteId,!0));else{let g=hA(t,l.path,o);l.currentInputSnapshot=g;let S=e[a].update(g.val());if(S!==void 0){lA("transaction failed: Data returned ",S,l.path);let N=ht(S);typeof S=="object"&&S!=null&&Ln(S,".priority")||(N=N.updatePriority(g.getPriority()));let M=l.currentWriteId,j=uA(t),ee=G$(N,g,j);l.currentOutputSnapshotRaw=N,l.currentOutputSnapshotResolved=ee,l.currentWriteId=lH(t),o.splice(o.indexOf(M),1),i=i.concat(V$(t.serverSyncTree_,l.path,ee,l.currentWriteId,l.applyLocally)),i=i.concat(To(t.serverSyncTree_,M,!0))}else f=!0,p="nodata",i=i.concat(To(t.serverSyncTree_,l.currentWriteId,!0))}rs(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}hh(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Vc(r[a]);o_(t,t.transactionQueueTree_)}function fA(t,e){let n,r=t.transactionQueueTree_;for(n=pe(e);n!==null&&Fo(r)===void 0;)r=i_(r,n),e=Ne(e),n=pe(e);return r}function pA(t,e){let n=[];return mA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mA(t,e,n){let r=Fo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);dh(e,i=>{mA(t,i,n)})}function hh(t,e){let n=Fo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,sA(e,n.length>0?n:void 0)}dh(e,r=>{hh(t,r)})}function pH(t,e){let n=jc(fA(t,e)),r=i_(t.transactionQueueTree_,e);return K$(r,i=>{rv(t,i)}),rv(t,r),aA(r,i=>{rv(t,i)}),n}function rv(t,e){let n=Fo(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(V(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(V(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(To(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?sA(e,void 0):n.length=s+1,rs(t.eventQueue_,jc(e),i);for(let o=0;o<r.length;o++)Vc(r[o])}}function mH(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function gH(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ht(`Invalid query segment '${n}' in query '${t}'`)}return e}var cS=function(t,e){let n=yH(t),r=n.namespace;n.domain==="firebase.com"&&Xi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dB();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new dv(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new De(n.pathString)}},yH=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=mH(t.substring(f,p)));let g=gH(t.substring(Math.min(t.length,p)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;let S=e.slice(0,u);if(S.toLowerCase()==="localhost")n="localhost";else if(S.split(".").length<=2)n=S;else{let N=e.indexOf(".");r=e.substring(0,N).toLowerCase(),n=e.substring(N+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Gv=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ue(this._path)?null:NS(this._path)}get ref(){return new ko(this._repo,this._path)}get _queryIdentifier(){let e=KD(this._queryParams),n=Yv(e);return n==="{}"?"default":n}get _queryObject(){return KD(this._queryParams)}isEqual(e){if(e=Jt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=MS(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+HB(this._path)}};var ko=class t extends Gv{constructor(e,n){super(e,n,new Dv,!1)}get parent(){let e=xS(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};F$(ko);L$(ko);var vH="FIREBASE_DATABASE_EMULATOR_HOST",Wv={},_H=!1;function wH(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cS(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[vH]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=cS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let f=i&&l?new PD(PD.OWNER):new lv(t.name,t.options,e);eH("Invalid Firebase Database URL",o),ue(o.path)||Xi("Database URL must point to the root of a Firebase Database (not including a child path).");let p=IH(a,t,f,new cv(t.name,n));return new Kv(p,t)}function EH(t,e){let n=Wv[e];(!n||n[t.key]!==t)&&Xi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dH(t),delete n[t.key]}function IH(t,e,n,r){let i=Wv[e.name];i||(i={},Wv[e.name]=i);let s=i[t.toURLString()];return s&&Xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new zv(t,_H,n,r),i[t.toURLString()]=s,s}var Kv=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ko(this._repo,Ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(EH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xi("Cannot call "+e+" on a deleted database.")}};function CH(t){cB(Bn),jn(new St("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return wH(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Re(ND,RD,t),Re(ND,RD,"esm2017")}Zv.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zv.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};CH();var fh=class{constructor(e){return e}},gA="database",c_=class{constructor(){return $i(gA)}};var yA=new B("angularfire2.database-instances");function bH(t,e){let n=co(gA,t,e);return n&&new fh(n)}var TH={provide:c_,deps:[[new Ye,yA]]},DH={provide:fh,useFactory:bH,deps:[[new Ye,yA],vn]},vA=(()=>{class t{constructor(){Re("angularfire",ur.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Qe({providers:[DH,TH]})}return t})();var _A=(()=>{let e=class e{constructor(){this.title="shiftbuilder"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-root"]],standalone:!0,features:[He],decls:3,vars:0,template:function(i,s){i&1&&(w(0,"div"),re(1,"app-navbar")(2,"router-outlet"),E())},dependencies:[Ge,Gm,AD,Sg,vA,uy]});let t=e;return t})();dC(_A,SD).catch(t=>console.error(t));
